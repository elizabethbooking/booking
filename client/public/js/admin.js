var Booking;Booking=angular.module("Booking",["ngRoute","angularUtils.directives.dirPagination","ngDialog","ui.calendar"]),Booking.factory("authInterceptor",["$rootScope","$q","$window",function(e,o,r){return{request:function(e){return e.headers=e.headers||{},r.sessionStorage.token?e.headers.token=r.sessionStorage.token:r.location.href="Error.html",e},response:function(e){return 401===e.status&&(r.location.href="Error.html"),e||o.when(e)}}}]),Booking.config(["$routeProvider","$locationProvider","$httpProvider",function(e,o,r){r.interceptors.push("authInterceptor"),e.when("/",{templateUrl:"/templates/admin/index.html",controller:"HomeController"}).when("/policies",{templateUrl:"/templates/views/policies.html",controller:"PoliciesController"}).when("/inventory",{templateUrl:"/templates/views/inventory.html",controller:"InventoryController"}).when("/users",{templateUrl:"/templates/views/users.html",controller:"UsersController"}).when("/user-profile",{templateUrl:"/templates/views/user_profile.html",controller:"UserProfileController"}).when("/calender",{templateUrl:"/templates/views/calender.html",controller:"CalendarController"}).when("/logout",{templateUrl:"templates/admin/logout.html",controller:"LogoutController"}).otherwise({redirectTo:"/"})}]),Booking.run(["$rootScope","$location",function(e,o){e.loggedIn=!0}]);
Booking.factory("CompanyService",["$http",function(n){return{data:function(t){n.get("/api/company").success(function(n,c){t(n)})}}}]);
Booking.factory("CustomerService",["$http",function(t){return{data:function(c){t.get("/api/customer").success(function(t,n){c(t)})}}}]);
Booking.service("DataService",["$http",function(o){var t=[];this.save=function(o){t.push(o),console.log("data Saved"),console.log(t)},this.get=function(){return t}}]);
Booking.factory("InventoryService",["$http",function(t){var n=10001;return{results:[],data:function(n){t.get("/api/inventory").success(function(t,i){n(t)})},query:function(i,s){t.post("/api/availability/"+n,i).success(function(t,n){this.results=t,s(t)}.bind(this))}}}]);
Booking.factory("LoginService",["$http","$rootScope",function(o,e){return{auth:function(e,n){o.post("/api/login",e).success(function(o,e){n(o,e)}).error(function(){console.log("error")})},user:function(){var o="";return $cookies.get("user")&&(e.loggedIn=o=JSON.parse($cookies.get("user"))),o},logout:function(){e.loggedIn=null,$cookies.remove("user")}}}]);
Booking.factory("PoliciesService",["$http",function(i){return{data:function(c){i.get("/api/policies").success(function(i,t){c(i)})}}}]);
Booking.factory("ReservationService",["$http",function(n){var e={};return e.data=function(){return n.get("/api/reservation")},e.query=function(e){return n.get("/api/reservation")},e.create=function(e){return n.post("/api/reservation",e)},e.pendingReservations=function(){return n.get("/admin/PendingReservations")},e.confirmReservation=function(e){return n.post("/admin/Confirmreservation",e)},e.confirmCheckin=function(e){return n.post("/admin/Confirmcheckin",e)},e.confirmCheckout=function(e){return n.post("/admin/confirmCheckout",e)},e.Todaycheckins=function(){return n.get("/admin/todayCheckins")},e.Todaycheckouts=function(){return n.get("/admin/todayCheckOuts")},e.GuestCheckedin=function(){return n.get("/Admin/GuestCheckedin")},e}]);
Booking.factory("RoleService",["$http",function(t){return{data:function(n){t.get("/api/role").success(function(t,o){n(t)})}}}]);
Booking.factory("UsersService",["$http",function(t){return{data:function(n){t.get("/api/users").success(function(t,c){n(t)})}}}]);
Booking.directive("availability",["$rootScope","dateFilter",function(e,o){return{restrict:"E",templateUrl:"/templates/directives/availability.html",controller:["$scope","$location","ReservationService","$stateParams","DataService",function(e,o,r,t,s){e.selectedrooms=[],e.number=-1,e.querry=angular.fromJson(atob(t.querry)),e.selectroom=function(o,r){var t={};t.id=o,t.room=r,r.selected=!0,e.selectedrooms.push(t),e.number=o,console.log(e.selectedrooms)},e.removeroom=function(o){for(i in e.selectedrooms)e.selectedrooms[i].id==o&&e.selectedrooms.splice(i,1)},e.book=function(){var r={};r.selectedrooms=e.selectedrooms,r.querry=e.querry,r.companyid=e.selectedrooms[0].room.company_id,r.id="bookinginfo";var t=btoa(angular.toJson(r));s.save(r),o.path("/reserve/"+t)},e.submit=function(){r.query(e.query).success(function(e){}).error(function(e){alert("Errror "+e.message)})}}]}}]);
Booking.directive("footerNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/footer.html",controller:"FooterController"}}]);
Booking.directive("home",[function(){return{restrict:"E",templateUrl:"/templates/home.html"}}]);
Booking.directive("inventory",[function(){return{restrict:"E",templateUrl:"/templates/inventory.html"}}]);
Booking.directive("leftNav",[function(){return{restrict:"A",scope:{},transclude:!0,templateUrl:"/templates/directives/left_nav.html",controller:"LeftNavController"}}]);
Booking.directive("login",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/login.html",controller:"LoginController"}}]);
Booking.directive("policies",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/policies.html",controller:"PoliciesController"}}]);
Booking.directive("query",["$rootScope","dateFilter","$location",function(t,e,o){return{restrict:"E",templateUrl:"/templates/directives/query.html",controller:["$scope","InventoryService",function(e,r){e.max_adults=[1,2,3],e.max_childs=[0,1,2,3],e.query={adults:1,childs:0,check_in:(new moment).toDate(),check_out:(new moment).add(3,"days").toDate()},e.submit=function(){r.query(e.query,function(e){t.$broadcast("query:results")});var n=btoa(angular.toJson(e.query));o.path("/booking/"+n)}}]}}]);
Booking.directive("resNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/res-nav.html",controller:"ResController"}}]);
Booking.directive("topNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/header.html",controller:"HeaderController"}}]);
Booking.directive("users",[function(){return{restrict:"E",templateUrl:"/templates/users.html"}}]);
Booking.directive("user_profile",[function(){return{restrict:"E",templateUrl:"/templates/user_profile.html"}}]);
Booking.controller("CalendarController",["$scope","$compile","uiCalendarConfig",function(e,t,n){var a=new Date,l=a.getDate(),r=a.getMonth(),o=a.getFullYear();e.changeTo="Hungarian",e.eventSource={url:"http://www.google.com/calendar/feeds/usa__en%40holiday.calendar.google.com/public/basic",className:"gcal-event",currentTimezone:"America/Chicago"},e.events=[{title:"All Day Event",start:new Date(o,r,1)},{title:"Long Event",start:new Date(o,r,l-5),end:new Date(o,r,l-2)},{id:999,title:"Repeating Event",start:new Date(o,r,l-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(o,r,l+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(o,r,l+1,19,0),end:new Date(o,r,l+1,22,30),allDay:!1},{title:"Click for Google",start:new Date(o,r,28),end:new Date(o,r,29),url:"http://google.com/"}],e.eventsF=function(e,t,n,a){var l=new Date(e).getTime()/1e3,r=(new Date(t).getTime()/1e3,new Date(e).getMonth()),o=[{title:"Feed Me "+r,start:l+5e4,end:l+1e5,allDay:!1,className:["customFeed"]}];a(o)},e.calEventsExt={color:"#f00",textColor:"yellow",events:[{type:"party",title:"Lunch",start:new Date(o,r,l,12,0),end:new Date(o,r,l,14,0),allDay:!1},{type:"party",title:"Lunch 2",start:new Date(o,r,l,12,0),end:new Date(o,r,l,14,0),allDay:!1},{type:"party",title:"Click for Google",start:new Date(o,r,28),end:new Date(o,r,29),url:"http://google.com/"}]},e.alertOnEventClick=function(t,n,a){e.alertMessage=t.title+" was clicked "},e.alertOnDrop=function(t,n,a,l,r,o){e.alertMessage="Event Droped to make dayDelta "+n},e.alertOnResize=function(t,n,a,l,r,o){e.alertMessage="Event Resized to make dayDelta "+n},e.addEvent=function(){e.events.push({title:"Open Sesame",start:new Date(o,r,28),end:new Date(o,r,29),className:["openSesame"]})},e.remove=function(t){e.events.splice(t,1)},e.changeView=function(e,t){n.calendars[t].fullCalendar("changeView",e)},e.renderCalender=function(e){n.calendars[e]&&n.calendars[e].fullCalendar("render")},e.eventRender=function(n,a,l){a.attr({tooltip:n.title,"tooltip-append-to-body":!0}),t(a)(e)},e.uiConfig={calendar:{height:450,editable:!0,header:{left:"title",center:"",right:"today prev,next"},eventClick:e.alertOnEventClick,eventDrop:e.alertOnDrop,eventResize:e.alertOnResize,eventRender:e.eventRender}},e.eventSources=[e.events,e.eventSource,e.eventsF],e.eventSources2=[e.calEventsExt,e.eventsF,e.events]}]);
Booking.controller("confirmationController",["DataService","$location","$scope","ReservationService",function(o,r,n,i){n.formData=o.get(),n.guestinfo=_.findWhere(n.formData,{id:"guestinfo"}).customerProfile,n.cardinfo=_.findWhere(n.formData,{id:"paymentinfo"}).paymentDetails,n.bookinginfo=_.findWhere(n.formData,{id:"bookinginfo"}).selectedrooms,n.guestSummary=_.findWhere(n.formData,{id:"bookinginfo"}).querry,n.roomsSummary=_.findWhere(n.formData,{id:"roominfo"}).summary,n.company_id=_.findWhere(n.formData,{id:"bookinginfo"}).companyid,n.processForm=function(){var o={};o.guestinfo=n.guestinfo,o.cardinfo=n.cardinfo,o.bookinginfo=n.bookinginfo,o.guestSummary=n.guestSummary,o.roomSummary=n.roomsSummary,o.company_id=n.company_id,i.create(o).success(function(o){console.log(o),n.formData="",r.path("/thanknote/"+o.success)}).error(function(o){alert("Errror "+o)})}}]);
Booking.controller("CustomerController",["CustomerService",function(o){this.customer=null,this.data="Booking Customer";var t=this;CustomerService.data(function(o){t.customer=o,console.log(o)})}]);
Booking.controller("FooterController",["$scope",function(o){}]);
Booking.controller("guestController",["DataService","$state","$scope",function(o,t,e){e.formData={},e.payment=function(){var a={};a.id="guestinfo",a.customerProfile=e.formData,o.save(a),t.go("payment")}}]);
Booking.controller("HeaderController",["$scope",function(o){}]);
Booking.controller("HomeController",["CompanyService","ReservationService","$scope","ngDialog","InventoryService",function(e,n,t,o,c){this.company=null,this.data="Booking Home";var i=this;e.data(function(e){i.company=e,console.log(e),t.query={adults:1,childs:0,check_in:(new moment).toDate(),check_out:(new moment).add(3,"days").toDate()},c.query(t.query,function(e){t.availability=e})}),n.pendingReservations().success(function(e){t.pendingConfirmation=e.result}).error(function(e){t.pendingConfirmation=[]}),n.Todaycheckins().success(function(e){t.Todaycheckins=e.result}).error(function(e){t.Todaycheckins=[]}),n.Todaycheckouts().success(function(e){t.Todaycheckouts=e.result}).error(function(e){t.Todaycheckouts=[]}),n.GuestCheckedin().success(function(e){t.GuestCheckedin=e.result}).error(function(e){t.GuestCheckedin=[]}),t.viewdetails=function(e){t.cust=e,o.openConfirm({template:"customertmpl",className:"ngdialog-theme-default",scope:t}).then(function(e){n.confirmReservation(t.cust).success(function(e){o.open({template:"<p>Reservation Updated</p>",plain:!0}),t.pendingConfirmation.splice(t.pendingConfirmation.indexOf(t.cust),1)}).error(function(e){o.open({template:"<p>Error Updating Reservation </p>",plain:!0})})},function(e){})},t.checkin=function(e){t.client=e,o.openConfirm({template:"checkinmpl",className:"ngdialog-theme-default",scope:t}).then(function(e){n.confirmCheckin(t.client).success(function(e){o.open({template:"<p>Client Reservation Updated to Checked in </p>",plain:!0}),t.Todaycheckins.splice(t.Todaycheckins.indexOf(t.client),1)}).error(function(e){o.open({template:"<p>Error Updating Client Reservation Status</p>",plain:!0})})},function(e){})},t.checkout=function(e){t.checkout=e,o.openConfirm({template:"checkoutmpl",className:"ngdialog-theme-default",scope:t}).then(function(e){n.confirmCheckout(t.checkout).success(function(e){o.open({template:"<p>Client Reservation Updated to Checked-OUT </p>",plain:!0}),t.Todaycheckouts.splice(t.Todaycheckouts.indexOf(t.checkout),1)}).error(function(e){o.open({template:"<p>Error Updating Client Reservation Status</p>",plain:!0})})},function(e){})}}]);
Booking.controller("InventoryController",["$rootScope","InventoryService",function(t,o){this.results=o.results,t.$on("query:results",function(){this.results=o.results}.bind(this))}]);
Booking.controller("LeftNavController",["$scope",function(o){}]);
Booking.controller("LoginController",["$rootScope","$scope","$window","LoginService",function(o,n,e,t){n.submit=function(){t.auth(n.user,function(n,t){200===t?(e.sessionStorage.token=n.token,o.loggedIn=n,e.location.href="/Admin.html"):delete e.sessionStorage.token})}}]);
Booking.controller("LogoutController",["$location","LoginService",function(o,n){n.logout(),o.path("/login")}]);
Booking.controller("paymentController",["DataService","$state","$scope",function(o,t,a){a.formData={},a.gotoConfirm=function(){var n={};n.id="paymentinfo",n.paymentDetails=a.formData,o.save(n),t.go("Confirmation")}}]);
Booking.controller("PoliciesController",["$rootScope","$scope","$location",function(o,i,c){i.policies=function(o){return policies.show=!0}}]);
Booking.controller("ResController",["$scope",function(o){}]);
Booking.controller("ReservationController",["ReservationService",function(o){this.reservation=null,this.data="Booking Rerservation";var e=this;RoleService.data(function(o){e.reservation=o,console.log(o)})}]);
Booking.controller("ReserveController",["$scope","$stateParams","$state","ReservationService","DataService","$anchorScroll","$location",function(o,r,a,e,t,m,s){s.hash("top"),m(),o.formData={},o.formData.roomDetails=angular.fromJson(atob(r.roomdetails)),o.summary={},o.summary.noRooms=o.formData.roomDetails.selectedrooms.length,o.summary.noGuest=o.formData.roomDetails.querry.adults,o.summary.startdate=o.formData.roomDetails.querry.check_in,o.summary.enddate=o.formData.roomDetails.querry.check_out,o.totalprice=function(){for(var r=0,a=0;a<o.summary.noRooms;a++)r+=o.formData.roomDetails.selectedrooms[a].room.base_price;return r},o.summary.tPrice=o.totalprice(),o.processForm=function(){e.create(o.formData).success(function(r){alert("data saved Reservation ID 9889"),o.formData=""}).error(function(o){alert("Errror "+o.message)})},o.proceed=function(){var r={};r.id="roominfo",r.roomdetails=o.formData,r.summary=o.summary,t.save(r),a.go("guestinfo")}}]);
Booking.controller("ReservePaymentController",["ReservationService",function(e){}]);
Booking.controller("bookingController",["ReservationService",function(o){}]);
Booking.controller("RoleController",["RoleService",function(o){this.role=null,this.data="Booking User Role";var l=this;o.data(function(o){l.role=o,console.log(o)})}]);
Booking.controller("thanknoteController",["$location","$scope","$stateParams",function(o,n,t){n.reservationid=t.reservationid}]);
Booking.controller("UsersController",["UsersService",function(s){this.users=null,this.data="Booking Users";var o=this;s.data(function(s){o.users=s,console.log(s)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIiwiY29tcGFueS5qcyIsImN1c3RvbWVyLmpzIiwiRGF0YVNlcnZpY2UuanMiLCJpbnZlbnRvcnkuanMiLCJsb2dpbi5qcyIsInBvbGljaWVzLmpzIiwicmVzZXJ2YXRpb24uanMiLCJyb2xlLmpzIiwidXNlcnMuanMiLCJhdmFpbGFiaWxpdHkuanMiLCJmb290ZXJfbmF2LmpzIiwiaG9tZS5qcyIsImxlZnRfbmF2LmpzIiwicXVlcnkuanMiLCJyZXpfbmF2LmpzIiwidG9wX25hdi5qcyIsInVzZXJfcHJvZmlsZS5qcyIsImNhbGVuZGVyLmpzIiwiY29uZmlybWF0aW9uQ29udHJvbGxlci5qcyIsImZvb3Rlci5qcyIsImd1ZXN0Q29udHJvbGxlci5qcyIsImhlYWRlci5qcyIsImxvZ291dC5qcyIsInBheW1lbnRDb250cm9sbGVyLmpzIiwicmVzLWhlYWRlci5qcyIsIlJlc2VydmVDb250cm9sbGVyLmpzIiwiUmVzZXJ2ZVBheW1lbnRDb250cm9sbGVyLmpzIiwiUmVzZXJ2ZVByb2ZpbGVDb250cm9sbGVyLmpzIiwidGhhbmtub3RlQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJCb29raW5nIiwiYW5ndWxhciIsIm1vZHVsZSIsImZhY3RvcnkiLCIkcm9vdFNjb3BlIiwiJHEiLCIkd2luZG93IiwicmVxdWVzdCIsImNvbmZpZyIsImhlYWRlcnMiLCJzZXNzaW9uU3RvcmFnZSIsInRva2VuIiwibG9jYXRpb24iLCJocmVmIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJ3aGVuIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJpbnRlcmNlcHRvcnMiLCJwdXNoIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsInJ1biIsIiRsb2NhdGlvbiIsImxvZ2dlZEluIiwiJGh0dHAiLCJkYXRhIiwiY2FsbGJhY2siLCJnZXQiLCJzdWNjZXNzIiwic2VydmljZSIsInRoaXMiLCJzYXZlIiwiZHQiLCJjb25zb2xlIiwibG9nIiwiY29tcGFueV9pZCIsInJlc3VsdHMiLCJxdWVyeSIsInBvc3QiLCJiaW5kIiwiYXV0aCIsImNyZWRlbnRpYWxzIiwiZXJyb3IiLCJ1c2VyIiwiJGNvb2tpZXMiLCJKU09OIiwicGFyc2UiLCJsb2dvdXQiLCJyZW1vdmUiLCJyZXNlcnZhdGlvbiIsInF1ZXJyeSIsImNyZWF0ZSIsInBlbmRpbmdSZXNlcnZhdGlvbnMiLCJjb25maXJtUmVzZXJ2YXRpb24iLCJjb25maXJtQ2hlY2tpbiIsImNvbmZpcm1DaGVja291dCIsIlRvZGF5Y2hlY2tpbnMiLCJUb2RheWNoZWNrb3V0cyIsIkd1ZXN0Q2hlY2tlZGluIiwiZGlyZWN0aXZlIiwiZGF0ZUZpbHRlciIsInJlc3RyaWN0IiwiJHNjb3BlIiwiUmVzZXJ2YXRpb25TZXJ2aWNlIiwiJHN0YXRlUGFyYW1zIiwiRGF0YVNlcnZpY2UiLCJzZWxlY3RlZHJvb21zIiwibnVtYmVyIiwiZnJvbUpzb24iLCJhdG9iIiwic2VsZWN0cm9vbSIsImluZGV4Iiwicm9vbSIsInJtIiwiaWQiLCJzZWxlY3RlZCIsInJlbW92ZXJvb20iLCJpIiwic3BsaWNlIiwiYm9vayIsImsiLCJjb21wYW55aWQiLCJkZXQiLCJidG9hIiwidG9Kc29uIiwicGF0aCIsInN1Ym1pdCIsImFsZXJ0IiwibWVzc2FnZSIsInNjb3BlIiwidHJhbnNjbHVkZSIsIkludmVudG9yeVNlcnZpY2UiLCJtYXhfYWR1bHRzIiwibWF4X2NoaWxkcyIsImFkdWx0cyIsImNoaWxkcyIsImNoZWNrX2luIiwibW9tZW50IiwidG9EYXRlIiwiY2hlY2tfb3V0IiwiYWRkIiwiJGJyb2FkY2FzdCIsIiRjb21waWxlIiwidWlDYWxlbmRhckNvbmZpZyIsImRhdGUiLCJEYXRlIiwiZCIsImdldERhdGUiLCJtIiwiZ2V0TW9udGgiLCJ5IiwiZ2V0RnVsbFllYXIiLCJjaGFuZ2VUbyIsImV2ZW50U291cmNlIiwidXJsIiwiY2xhc3NOYW1lIiwiY3VycmVudFRpbWV6b25lIiwiZXZlbnRzIiwidGl0bGUiLCJzdGFydCIsImVuZCIsImFsbERheSIsImV2ZW50c0YiLCJ0aW1lem9uZSIsInMiLCJnZXRUaW1lIiwiY2FsRXZlbnRzRXh0IiwiY29sb3IiLCJ0ZXh0Q29sb3IiLCJ0eXBlIiwiYWxlcnRPbkV2ZW50Q2xpY2siLCJqc0V2ZW50IiwidmlldyIsImFsZXJ0TWVzc2FnZSIsImFsZXJ0T25Ecm9wIiwiZXZlbnQiLCJkZWx0YSIsInJldmVydEZ1bmMiLCJ1aSIsImFsZXJ0T25SZXNpemUiLCJhZGRFdmVudCIsImNoYW5nZVZpZXciLCJjYWxlbmRhciIsImNhbGVuZGFycyIsImZ1bGxDYWxlbmRhciIsInJlbmRlckNhbGVuZGVyIiwiZXZlbnRSZW5kZXIiLCJlbGVtZW50IiwiYXR0ciIsInRvb2x0aXAiLCJ0b29sdGlwLWFwcGVuZC10by1ib2R5IiwidWlDb25maWciLCJoZWlnaHQiLCJlZGl0YWJsZSIsImhlYWRlciIsImxlZnQiLCJjZW50ZXIiLCJyaWdodCIsImV2ZW50Q2xpY2siLCJldmVudERyb3AiLCJldmVudFJlc2l6ZSIsImV2ZW50U291cmNlcyIsImV2ZW50U291cmNlczIiLCJmb3JtRGF0YSIsImd1ZXN0aW5mbyIsIl8iLCJmaW5kV2hlcmUiLCJjdXN0b21lclByb2ZpbGUiLCJjYXJkaW5mbyIsInBheW1lbnREZXRhaWxzIiwiYm9va2luZ2luZm8iLCJndWVzdFN1bW1hcnkiLCJyb29tc1N1bW1hcnkiLCJzdW1tYXJ5IiwicHJvY2Vzc0Zvcm0iLCJyb29tU3VtbWFyeSIsInJlc3AiLCJVc2Vyc1NlcnZpY2UiLCJjdXN0b21lciIsIl9zZWxmIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiJHN0YXRlIiwicGF5bWVudCIsImdvIiwiQ29tcGFueVNlcnZpY2UiLCJuZ0RpYWxvZyIsImNvbXBhbnkiLCJhdmFpbGFiaWxpdHkiLCJwZW5kaW5nQ29uZmlybWF0aW9uIiwicmVzdWx0Iiwidmlld2RldGFpbHMiLCJjdXN0Iiwib3BlbkNvbmZpcm0iLCJ0ZW1wbGF0ZSIsInRoZW4iLCJ2YWx1ZSIsIm9wZW4iLCJwbGFpbiIsImluZGV4T2YiLCJyZWFzb24iLCJjaGVja2luIiwiY2xpZW50IiwiY2hlY2tvdXQiLCJjdXNtIiwiJG9uIiwiTG9naW5TZXJ2aWNlIiwiZ290b0NvbmZpcm0iLCJwb2xpY2llcyIsInNob3ciLCJSb2xlU2VydmljZSIsIiRhbmNob3JTY3JvbGwiLCJoYXNoIiwicm9vbURldGFpbHMiLCJyb29tZGV0YWlscyIsIm5vUm9vbXMiLCJsZW5ndGgiLCJub0d1ZXN0Iiwic3RhcnRkYXRlIiwiZW5kZGF0ZSIsInRvdGFscHJpY2UiLCJ0cHJpY2UiLCJiYXNlX3ByaWNlIiwidFByaWNlIiwicHJvY2VlZCIsInJvbGUiLCJyZXNlcnZhdGlvbmlkIiwidXNlcnMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFFBRUpBLFNBQVVDLFFBQVFDLE9BQU8sV0FBWSxVQUFVLHdDQUF3QyxXQUFXLGdCQUVsR0YsUUFBUUcsUUFBUSxtQkFBbUIsYUFBYyxLQUFNLFVBQVcsU0FBVUMsRUFBWUMsRUFBSUMsR0FDdEYsT0FDQUMsUUFBUyxTQUFVQyxHQVVqQixNQVJBQSxHQUFPQyxRQUFVRCxFQUFPQyxZQUNwQkgsRUFBUUksZUFBZUMsTUFDM0JILEVBQU9DLFFBQVFFLE1BQVFMLEVBQVFJLGVBQWVDLE1BSWxDTCxFQUFRTSxTQUFTQyxLQUFPLGFBRTdCTCxHQUVUTSxTQUFVLFNBQVVBLEdBTWxCLE1BTHdCLE9BQXBCQSxFQUFTQyxTQUViVCxFQUFRTSxTQUFTQyxLQUFPLGNBR2pCQyxHQUFZVCxFQUFHVyxLQUFLRixRQU9uQ2QsUUFBUVEsUUFBUSxpQkFBa0Isb0JBQW9CLGdCQUFpQixTQUFTUyxFQUFnQkMsRUFBa0JDLEdBRzlHQSxFQUFjQyxhQUFhQyxLQUFLLG1CQUVsQ0osRUFDR0QsS0FBSyxLQUNKTSxZQUFjLDhCQUNkQyxXQUFjLG1CQUdmUCxLQUFLLGFBQ0pNLFlBQWMsaUNBQ2RDLFdBQWMsdUJBRWZQLEtBQUssY0FDSk0sWUFBYyxrQ0FDZEMsV0FBYyx3QkFFZlAs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MEosRUFBTTZDLEtBQU92TSxFQUNiUSxRQUFRQyxJQUFJVDtBcUJMaEI5QixRQUFRdUIsV0FBVyx1QkFBd0IsWUFBWSxTQUFTLGVBQWdCLFNBQVNJLEVBQVV3QyxFQUFPRSxHQUN0R0YsRUFBT21LLGNBQWVqSyxFQUFhaUs7QXBCSHZDdE8sUUFBUXVCLFdBQVcsbUJBQW9CLGVBQWdCLFNBQVMrSixHQUM5RG5KLEtBQUtvTSxNQUFRLEtBQ2JwTSxLQUFLTCxLQUFPLGVBQ1osSUFBSTBKLEdBQVFySixJQUVabUosR0FBYXhKLEtBQUssU0FBU0EsR0FDekIwSixFQUFNK0MsTUFBUXpNLEVBQ2RRLFFBQVFDLElBQUlUIiwiZmlsZSI6ImFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEJvb2tpbmc7XG5cbkJvb2tpbmcgPSBhbmd1bGFyLm1vZHVsZSgnQm9va2luZycsIFsnbmdSb3V0ZScsJ2FuZ3VsYXJVdGlscy5kaXJlY3RpdmVzLmRpclBhZ2luYXRpb24nLCduZ0RpYWxvZycsJ3VpLmNhbGVuZGFyJ10pO1xuXG5Cb29raW5nLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsWyckcm9vdFNjb3BlJywgJyRxJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsICR3aW5kb3cpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIFxuICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBpZiAoJHdpbmRvdy5zZXNzaW9uU3RvcmFnZS50b2tlbikge1xuICAgICAgICBjb25maWcuaGVhZGVycy50b2tlbj0gICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgIGVsc2V7XG4gICAgICAgICAgIC8vIG5vIHRva2VuIGluIFN0b3JlXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiRXJyb3IuaHRtbFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICB9LFxuICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiRXJyb3IuaHRtbFwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcblxuXG5cbkJvb2tpbmcuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCRodHRwUHJvdmlkZXIpe1xuICBcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xuXG4gICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2FkbWluL2luZGV4Lmh0bWwnLFxuICAgICAgY29udHJvbGxlciAgOiAnSG9tZUNvbnRyb2xsZXInXG4gICAgICAgIH0pICBcbiAgICBcbiAgICAud2hlbignL3BvbGljaWVzJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9wb2xpY2llcy5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ1BvbGljaWVzQ29udHJvbGxlcidcbiAgICB9KVxuICAgIC53aGVuKCcvaW52ZW50b3J5Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9pbnZlbnRvcnkuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdJbnZlbnRvcnlDb250cm9sbGVyJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VycycsIHtcbiAgICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdmlld3MvdXNlcnMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2Vyc0NvbnRyb2xsZXInXG4gICAgfSlcbiAgIFxuICAgIC53aGVuKCcvdXNlci1wcm9maWxlJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy91c2VyX3Byb2ZpbGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2VyUHJvZmlsZUNvbnRyb2xsZXInXG4gICAgfSlcblxuICAgLndoZW4oJy9jYWxlbmRlcicsIHtcbiAgICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdmlld3MvY2FsZW5kZXIuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdDYWxlbmRhckNvbnRyb2xsZXInXG4gICAgfSlcbiAgICBcbiAgIFxuICAgIC53aGVuKCcvbG9nb3V0Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAndGVtcGxhdGVzL2FkbWluL2xvZ291dC5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ0xvZ291dENvbnRyb2xsZXInXG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHsgcmVkaXJlY3RUbyA6ICcvJyB9KTtcblxuICAvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICBcblxufV0pO1xuXG5Cb29raW5nLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbil7XG5cbiAkcm9vdFNjb3BlLmxvZ2dlZEluPXRydWU7XG4gXG4vKlxuICAkcm9vdFNjb3BlLiRvbihcIiRyb3V0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcbiAgICBpZiAoTG9naW5TZXJ2aWNlLnVzZXIoKSA9PT0gbnVsbCkge1xuICAgICAgJHJvb3RTY29wZS5sb2dnZWRJbiA9IG51bGw7XG4gICAgICBpZiAoIG5leHQudGVtcGxhdGVVcmwgPT09ICcvdGVtcGxhdGVzL2FkbWluL2xvZ2luLmh0bWwnKSB7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gICovXG5cbn1dKTtcblxuIiwiQm9va2luZy5mYWN0b3J5KCdDb21wYW55U2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCl7XG4gIHJldHVybiB7XG4gICAgZGF0YSA6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkaHR0cC5nZXQoJy9hcGkvY29tcGFueScpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdDdXN0b21lckNvbnRyb2xsZXInLCBbJ0N1c3RvbWVyU2VydmljZScsIGZ1bmN0aW9uKFVzZXJzU2VydmljZSl7XG4gIHRoaXMuY3VzdG9tZXIgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBDdXN0b21lcic7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgQ3VzdG9tZXJTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY3VzdG9tZXIgPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KTtcbn1dKTsiLCJCb29raW5nLnNlcnZpY2UoJ0RhdGFTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcblxuXHQgIHZhciBkYXRhPVtdXG5cblxuXHQgICB0aGlzLnNhdmU9ZnVuY3Rpb24oZHQpe1xuXHQgICAgIFx0ZGF0YS5wdXNoKGR0KTtcblx0ICAgICBcdGNvbnNvbGUubG9nKFwiZGF0YSBTYXZlZFwiKTtcblx0ICAgICBcdGNvbnNvbGUubG9nKGRhdGEpO1xuXG5cdCAgIH1cblx0ICAgdGhpcy5nZXQ9ZnVuY3Rpb24oKXtcblx0ICAgXHRyZXR1cm4gZGF0YTtcblx0ICAgfVxuXG4gICAgIFxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignSW52ZW50b3J5Q29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICdJbnZlbnRvcnlTZXJ2aWNlJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgSW52ZW50b3J5U2VydmljZSl7XG4gIHRoaXMucmVzdWx0cyA9IEludmVudG9yeVNlcnZpY2UucmVzdWx0cztcblxuICAkcm9vdFNjb3BlLiRvbigncXVlcnk6cmVzdWx0cycsIGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5yZXN1bHRzID0gSW52ZW50b3J5U2VydmljZS5yZXN1bHRzO1xuICB9LmJpbmQodGhpcykpO1xuXG5cblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR3aW5kb3cnLCAnTG9naW5TZXJ2aWNlJyxcbiAgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCBMb2dpblNlcnZpY2Upe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgTG9naW5TZXJ2aWNlLmF1dGgoJHNjb3BlLnVzZXIsIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuID0gZGF0YS50b2tlbjtcbiAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2dlZEluID0gZGF0YTtcbiAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWY9Jy9BZG1pbi5odG1sJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIH1dXG4pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ1BvbGljaWVzQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRzY29wZS5wb2xpY2llcyA9IGZ1bmN0aW9uKHNob3cpIHtcbiAgICAgIHJldHVybiBwb2xpY2llcy5zaG93ID0gdHJ1ZTsgIFxuICAgIH07XG4gIH1cbl0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc2VydmF0aW9uQ29udHJvbGxlcicsIFsnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oUmVzZXJ2YXRpb25TZXJ2aWNlKXtcbiAgdGhpcy5yZXNlcnZhdGlvbiA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIFJlcnNlcnZhdGlvbic7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgUm9sZVNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5yZXNlcnZhdGlvbiA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignUm9sZUNvbnRyb2xsZXInLCBbJ1JvbGVTZXJ2aWNlJywgZnVuY3Rpb24oUm9sZVNlcnZpY2Upe1xuICB0aGlzLnJvbGUgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBVc2VyIFJvbGUnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIFJvbGVTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYucm9sZSA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgWydVc2Vyc1NlcnZpY2UnLCBmdW5jdGlvbihVc2Vyc1NlcnZpY2Upe1xuICB0aGlzLnVzZXJzID0gbnVsbDtcbiAgdGhpcy5kYXRhID0gJ0Jvb2tpbmcgVXNlcnMnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIFVzZXJzU2VydmljZS5kYXRhKGZ1bmN0aW9uKGRhdGEpe1xuICAgIF9zZWxmLnVzZXJzID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5kaXJlY3RpdmUoJ2F2YWlsYWJpbGl0eScsIFsnJHJvb3RTY29wZScsICdkYXRlRmlsdGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgZGF0ZUZpbHRlcil7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2F2YWlsYWJpbGl0eS5odG1sJyxcbiAgICBjb250cm9sbGVyICA6IFsnJHNjb3BlJywnJGxvY2F0aW9uJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywnJHN0YXRlUGFyYW1zJywnRGF0YVNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsJGxvY2F0aW9uLFJlc2VydmF0aW9uU2VydmljZSwkc3RhdGVQYXJhbXMsRGF0YVNlcnZpY2Upe1xuICAgICAgXG4gICAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcz1bXTtcbiAgICAgICRzY29wZS5udW1iZXI9LTE7XG4gICRzY29wZS5xdWVycnk9IGFuZ3VsYXIuZnJvbUpzb24oYXRvYigkc3RhdGVQYXJhbXMucXVlcnJ5KSlcbiAgICAgXG5cbiRzY29wZS5zZWxlY3Ryb29tPWZ1bmN0aW9uKGluZGV4LHJvb20pe1xuICAgdmFyIHJtPXt9O1xuICAgIHJtLmlkPWluZGV4O1xuICAgIHJtLnJvb209cm9vbTtcbiAgICByb29tLnNlbGVjdGVkPXRydWU7XG4gICAgJHNjb3BlLnNlbGVjdGVkcm9vbXMucHVzaChybSk7XG4gICAgJHNjb3BlLm51bWJlcj1pbmRleDtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRyb29tcylcbn07XG4kc2NvcGUucmVtb3Zlcm9vbT1mdW5jdGlvbihpbmRleCl7XG5cbiAgIGZvciAoaSBpbiAkc2NvcGUuc2VsZWN0ZWRyb29tcykge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5zZWxlY3RlZHJvb21zW2ldLmlkID09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkcm9vbXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG59O1xuXG4kc2NvcGUuYm9vaz1mdW5jdGlvbigpe1xuICB2YXIgaz17fTtcbiAgICAgay5zZWxlY3RlZHJvb21zPSRzY29wZS5zZWxlY3RlZHJvb21zO1xuICAgICBrLnF1ZXJyeT0kc2NvcGUucXVlcnJ5O1xuICAgICBrLmNvbXBhbnlpZD0kc2NvcGUuc2VsZWN0ZWRyb29tc1swXS5yb29tLmNvbXBhbnlfaWQ7XG4gICAgIGsuaWQ9J2Jvb2tpbmdpbmZvJztcbiAgIHZhciBkZXQ9YnRvYShhbmd1bGFyLnRvSnNvbihrKSk7XG4gICBEYXRhU2VydmljZS5zYXZlKGspO1xuICAkbG9jYXRpb24ucGF0aCgnL3Jlc2VydmUvJytkZXQpO1xuICBcbn07XG5cbiAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLnF1ZXJ5KCRzY29wZS5xdWVyeSlcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIitlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pOyAgXG4gICAgICAgIFxuICAgICAgfTtcbiAgICB9XVxuICB9O1xufV0pOyIsIkJvb2tpbmcuZGlyZWN0aXZlKCdmb290ZXJOYXYnLCBbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICBzY29wZSAgICAgICA6IHt9LFxuICAgIHRyYW5zY2x1ZGUgIDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvZm9vdGVyLmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogJ0Zvb3RlckNvbnRyb2xsZXInXG4gIH07XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBbJ0NvbXBhbnlTZXJ2aWNlJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywnJHNjb3BlJywnbmdEaWFsb2cnLCdJbnZlbnRvcnlTZXJ2aWNlJywgZnVuY3Rpb24oQ29tcGFueVNlcnZpY2UsUmVzZXJ2YXRpb25TZXJ2aWNlLCRzY29wZSxuZ0RpYWxvZyxJbnZlbnRvcnlTZXJ2aWNlKXtcbiAgdGhpcy5jb21wYW55ID0gbnVsbDtcbiAgdGhpcy5kYXRhID0gJ0Jvb2tpbmcgSG9tZSc7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgQ29tcGFueVNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5jb21wYW55ID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcblxuICAgICAgICAgICAgICAkc2NvcGUucXVlcnkgPSB7XG5cdFx0XHQgICAgICAgIGFkdWx0czogMSxcblx0XHRcdCAgICAgICAgY2hpbGRzOiAwLFxuXHRcdFx0ICAgICAgICBjaGVja19pbjogbmV3IG1vbWVudCgpLnRvRGF0ZSgpLFxuXHRcdFx0ICAgICAgICBjaGVja19vdXQ6IG5ldyBtb21lbnQoKS5hZGQoMywgJ2RheXMnKS50b0RhdGUoKVxuXHRcdFx0ICAgICAgfTtcblxuXHRcdFx0ICAgXG5cdFx0XHQgICAgICAgIEludmVudG9yeVNlcnZpY2UucXVlcnkoJHNjb3BlLnF1ZXJ5LCBmdW5jdGlvbihyZXN1bHRzKXtcblx0XHRcdCAgICAgICAgICAkc2NvcGUuYXZhaWxhYmlsaXR5PXJlc3VsdHM7XG5cdFx0XHQgICAgICAgXG5cdFx0XHQgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICBcblxuXG4gIH0pO1xuXG4gICAgICAgIFJlc2VydmF0aW9uU2VydmljZS5wZW5kaW5nUmVzZXJ2YXRpb25zKClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKXsgXG4gICAgICAgICAgICAgICAgICBcdCRzY29wZS5wZW5kaW5nQ29uZmlybWF0aW9uPWRhdGEucmVzdWx0O1xuXHRcdFx0ICAgfSlcblx0XHQgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuXHRcdCAgIFxuICAgICAgICAgICAgXHQkc2NvcGUucGVuZGluZ0NvbmZpcm1hdGlvbj1bXTtcblxuXHRcdCAgICAgfSk7XG4gICAgXG4gICAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLlRvZGF5Y2hlY2tpbnMoKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpeyBcbiAgICAgICAgICAgICAgICAgXHQkc2NvcGUuVG9kYXljaGVja2lucz1kYXRhLnJlc3VsdDtcblx0XHRcdCAgIH0pXG5cdFx0ICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFx0JHNjb3BlLlRvZGF5Y2hlY2tpbnM9W107XG5cblx0XHQgICAgIH0pO1xuXG5cbiAgICAgIFJlc2VydmF0aW9uU2VydmljZS5Ub2RheWNoZWNrb3V0cygpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSl7IFxuICAgICAgICAgICAgICAgICBcdCRzY29wZS5Ub2RheWNoZWNrb3V0cz1kYXRhLnJlc3VsdDtcblx0XHRcdCAgIH0pXG5cdFx0ICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFx0JHNjb3BlLlRvZGF5Y2hlY2tvdXRzPVtdO1xuXG5cdFx0ICAgICB9KTtcblxuICAgICAgICAgIFJlc2VydmF0aW9uU2VydmljZS5HdWVzdENoZWNrZWRpbigpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSl7IFxuICAgICAgICAgICAgICAgICBcdCRzY29wZS5HdWVzdENoZWNrZWRpbj1kYXRhLnJlc3VsdDtcblx0XHRcdCAgIH0pXG5cdFx0ICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFx0JHNjb3BlLkd1ZXN0Q2hlY2tlZGluPVtdO1xuXG5cdFx0ICAgICB9KTtcblxuXG5cdFx0ICRzY29wZS52aWV3ZGV0YWlscyA9ZnVuY3Rpb24oY3VzdG9tZXIpe1xuICAgICAgICAgICAgICRzY29wZS5jdXN0PWN1c3RvbWVyO1xuICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW5Db25maXJtKHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdjdXN0b21lcnRtcGwnLFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZ2RpYWxvZy10aGVtZS1kZWZhdWx0JyxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cbiAgICAgICAgICAgICAgICBcdFJlc2VydmF0aW9uU2VydmljZS5jb25maXJtUmVzZXJ2YXRpb24oJHNjb3BlLmN1c3QpXG4gICAgICAgICAgICAgICAgXHQgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKXsgXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxwPlJlc2VydmF0aW9uIFVwZGF0ZWQ8L3A+Jyxcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucGVuZGluZ0NvbmZpcm1hdGlvbi5zcGxpY2UoJHNjb3BlLnBlbmRpbmdDb25maXJtYXRpb24uaW5kZXhPZigkc2NvcGUuY3VzdCksMSk7XG5cblx0XHRcdFx0XHRcdCAgIH0pXG5cdFx0XHRcdFx0ICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHQgICBcdCAgICAgIG5nRGlhbG9nLm9wZW4oe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5FcnJvciBVcGRhdGluZyBSZXNlcnZhdGlvbiA8L3A+Jyxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdFx0XHRcdFx0ICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgfSAgICAgICBcblxuXG5cdFx0ICRzY29wZS5jaGVja2luID1mdW5jdGlvbihjdXN0b21lcil7XG4gICAgICAgICAgICAgJHNjb3BlLmNsaWVudD1jdXN0b21lcjtcbiAgICAgICAgICAgICAgICBuZ0RpYWxvZy5vcGVuQ29uZmlybSh7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnY2hlY2tpbm1wbCcsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25nZGlhbG9nLXRoZW1lLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblxuICAgICAgICAgICAgICAgIFx0UmVzZXJ2YXRpb25TZXJ2aWNlLmNvbmZpcm1DaGVja2luKCRzY29wZS5jbGllbnQpXG4gICAgICAgICAgICAgICAgXHQgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKXsgXG5cdFx0XHQgICAgICAgICAgICAgICAgICAgIG5nRGlhbG9nLm9wZW4oe1xuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxwPkNsaWVudCBSZXNlcnZhdGlvbiBVcGRhdGVkIHRvIENoZWNrZWQgaW4gPC9wPicsXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLlRvZGF5Y2hlY2tpbnMuc3BsaWNlKCRzY29wZS5Ub2RheWNoZWNraW5zLmluZGV4T2YoJHNjb3BlLmNsaWVudCksMSk7XG5cblx0XHRcdFx0XHRcdCAgIH0pXG5cdFx0XHRcdFx0ICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHQgICBcdCAgICAgIG5nRGlhbG9nLm9wZW4oe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8cD5FcnJvciBVcGRhdGluZyBDbGllbnQgUmVzZXJ2YXRpb24gU3RhdHVzPC9wPicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFpbjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHRcdFx0XHRcdCAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgIH0gICAgXG5cblxuICAgICAgICRzY29wZS5jaGVja291dCA9ZnVuY3Rpb24oY3VzbSl7XG4gICAgICAgICAgICAgJHNjb3BlLmNoZWNrb3V0PWN1c207XG4gICAgICAgICAgICAgICAgbmdEaWFsb2cub3BlbkNvbmZpcm0oe1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJ2NoZWNrb3V0bXBsJyxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmdkaWFsb2ctdGhlbWUtZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGVcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXG4gICAgICAgICAgICAgICAgXHRSZXNlcnZhdGlvblNlcnZpY2UuY29uZmlybUNoZWNrb3V0KCRzY29wZS5jaGVja291dClcbiAgICAgICAgICAgICAgICBcdCAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpeyBcblx0XHRcdCAgICAgICAgICAgICAgICAgICAgbmdEaWFsb2cub3Blbih7XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPHA+Q2xpZW50IFJlc2VydmF0aW9uIFVwZGF0ZWQgdG8gQ2hlY2tlZC1PVVQgPC9wPicsXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLlRvZGF5Y2hlY2tvdXRzLnNwbGljZSgkc2NvcGUuVG9kYXljaGVja291dHMuaW5kZXhPZigkc2NvcGUuY2hlY2tvdXQpLDEpO1xuXG5cdFx0XHRcdFx0XHQgICB9KVxuXHRcdFx0XHRcdCAgIC5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdFx0ICAgXHQgICAgICBuZ0RpYWxvZy5vcGVuKHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnPHA+RXJyb3IgVXBkYXRpbmcgQ2xpZW50IFJlc2VydmF0aW9uIFN0YXR1czwvcD4nLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhaW46IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0XHRcdFx0XHQgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICB9ICA7ICAgICBcbiAgIFxuXG4gICBcblxuXG5cblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdMZWZ0TmF2Q29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3F1ZXJ5JywgWyckcm9vdFNjb3BlJywgJ2RhdGVGaWx0ZXInLCckbG9jYXRpb24nICxmdW5jdGlvbigkcm9vdFNjb3BlLCBkYXRlRmlsdGVyLCRsb2NhdGlvbil7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3F1ZXJ5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogWyckc2NvcGUnLCAnSW52ZW50b3J5U2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgSW52ZW50b3J5U2VydmljZSl7XG4gICAgICAkc2NvcGUubWF4X2FkdWx0cyA9IFsxLDIsM107XG4gICAgICAkc2NvcGUubWF4X2NoaWxkcyA9IFswLDEsMiwzXTtcbiAgICAgICRzY29wZS5xdWVyeSA9IHtcbiAgICAgICAgYWR1bHRzOiAxLFxuICAgICAgICBjaGlsZHM6IDAsXG4gICAgICAgIGNoZWNrX2luOiBuZXcgbW9tZW50KCkudG9EYXRlKCksXG4gICAgICAgIGNoZWNrX291dDogbmV3IG1vbWVudCgpLmFkZCgzLCAnZGF5cycpLnRvRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgSW52ZW50b3J5U2VydmljZS5xdWVyeSgkc2NvcGUucXVlcnksIGZ1bmN0aW9uKHJlc3VsdHMpe1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncXVlcnk6cmVzdWx0cycpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgICB2YXIgZGV0PWJ0b2EoYW5ndWxhci50b0pzb24oJHNjb3BlLnF1ZXJ5KSk7XG4gICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ib29raW5nLycrZGV0KTtcbiAgICAgIH1cbiAgICB9XVxuICB9O1xufV0pO1xuXG4iLCJCb29raW5nLmRpcmVjdGl2ZSgncmVzTmF2JywgW2Z1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgc2NvcGUgICAgICAgOiB7fSxcbiAgICB0cmFuc2NsdWRlICA6IHRydWUsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3Jlcy1uYXYuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnUmVzQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3RvcE5hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9oZWFkZXIuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnSGVhZGVyQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3VzZXJfcHJvZmlsZScsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdXNlcl9wcm9maWxlLmh0bWwnXG4gIH07XG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0NhbGVuZGFyQ29udHJvbGxlcicsIFsnJHNjb3BlJywnJGNvbXBpbGUnLCd1aUNhbGVuZGFyQ29uZmlnJywgZnVuY3Rpb24oJHNjb3BlLCRjb21waWxlLHVpQ2FsZW5kYXJDb25maWcpe1xyXG4gLyogY29uZmlnIG9iamVjdCAqL1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdmFyIGQgPSBkYXRlLmdldERhdGUoKTtcclxuICAgIHZhciBtID0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgdmFyIHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBcclxuICAgICRzY29wZS5jaGFuZ2VUbyA9ICdIdW5nYXJpYW4nO1xyXG4gICAgLyogZXZlbnQgc291cmNlIHRoYXQgcHVsbHMgZnJvbSBnb29nbGUuY29tICovXHJcbiAgICAkc2NvcGUuZXZlbnRTb3VyY2UgPSB7XHJcbiAgICAgICAgICAgIHVybDogXCJodHRwOi8vd3d3Lmdvb2dsZS5jb20vY2FsZW5kYXIvZmVlZHMvdXNhX19lbiU0MGhvbGlkYXkuY2FsZW5kYXIuZ29vZ2xlLmNvbS9wdWJsaWMvYmFzaWNcIixcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnZ2NhbC1ldmVudCcsICAgICAgICAgICAvLyBhbiBvcHRpb24hXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaW1lem9uZTogJ0FtZXJpY2EvQ2hpY2FnbycgLy8gYW4gb3B0aW9uIVxyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgJHNjb3BlLmV2ZW50cyA9IFtcclxuICAgICAge3RpdGxlOiAnQWxsIERheSBFdmVudCcsc3RhcnQ6IG5ldyBEYXRlKHksIG0sIDEpfSxcclxuICAgICAge3RpdGxlOiAnTG9uZyBFdmVudCcsc3RhcnQ6IG5ldyBEYXRlKHksIG0sIGQgLSA1KSxlbmQ6IG5ldyBEYXRlKHksIG0sIGQgLSAyKX0sXHJcbiAgICAgIHtpZDogOTk5LHRpdGxlOiAnUmVwZWF0aW5nIEV2ZW50JyxzdGFydDogbmV3IERhdGUoeSwgbSwgZCAtIDMsIDE2LCAwKSxhbGxEYXk6IGZhbHNlfSxcclxuICAgICAge2lkOiA5OTksdGl0bGU6ICdSZXBlYXRpbmcgRXZlbnQnLHN0YXJ0OiBuZXcgRGF0ZSh5LCBtLCBkICsgNCwgMTYsIDApLGFsbERheTogZmFsc2V9LFxyXG4gICAgICB7dGl0bGU6ICdCaXJ0aGRheSBQYXJ0eScsc3RhcnQ6IG5ldyBEYXRlKHksIG0sIGQgKyAxLCAxOSwgMCksZW5kOiBuZXcgRGF0ZSh5LCBtLCBkICsgMSwgMjIsIDMwKSxhbGxEYXk6IGZhbHNlfSxcclxuICAgICAge3RpdGxlOiAnQ2xpY2sgZm9yIEdvb2dsZScsc3RhcnQ6IG5ldyBEYXRlKHksIG0sIDI4KSxlbmQ6IG5ldyBEYXRlKHksIG0sIDI5KSx1cmw6ICdodHRwOi8vZ29vZ2xlLmNvbS8nfVxyXG4gICAgXTtcclxuXHJcblxyXG4gICAgIC8qIGV2ZW50IHNvdXJjZSB0aGF0IGNhbGxzIGEgZnVuY3Rpb24gb24gZXZlcnkgdmlldyBzd2l0Y2ggKi9cclxuICAgICRzY29wZS5ldmVudHNGID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQsIHRpbWV6b25lLCBjYWxsYmFjaykge1xyXG4gICAgICB2YXIgcyA9IG5ldyBEYXRlKHN0YXJ0KS5nZXRUaW1lKCkgLyAxMDAwO1xyXG4gICAgICB2YXIgZSA9IG5ldyBEYXRlKGVuZCkuZ2V0VGltZSgpIC8gMTAwMDtcclxuICAgICAgdmFyIG0gPSBuZXcgRGF0ZShzdGFydCkuZ2V0TW9udGgoKTtcclxuICAgICAgdmFyIGV2ZW50cyA9IFt7dGl0bGU6ICdGZWVkIE1lICcgKyBtLHN0YXJ0OiBzICsgKDUwMDAwKSxlbmQ6IHMgKyAoMTAwMDAwKSxhbGxEYXk6IGZhbHNlLCBjbGFzc05hbWU6IFsnY3VzdG9tRmVlZCddfV07XHJcbiAgICAgIGNhbGxiYWNrKGV2ZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5jYWxFdmVudHNFeHQgPSB7XHJcbiAgICAgICBjb2xvcjogJyNmMDAnLFxyXG4gICAgICAgdGV4dENvbG9yOiAneWVsbG93JyxcclxuICAgICAgIGV2ZW50czogWyBcclxuICAgICAgICAgIHt0eXBlOidwYXJ0eScsdGl0bGU6ICdMdW5jaCcsc3RhcnQ6IG5ldyBEYXRlKHksIG0sIGQsIDEyLCAwKSxlbmQ6IG5ldyBEYXRlKHksIG0sIGQsIDE0LCAwKSxhbGxEYXk6IGZhbHNlfSxcclxuICAgICAgICAgIHt0eXBlOidwYXJ0eScsdGl0bGU6ICdMdW5jaCAyJyxzdGFydDogbmV3IERhdGUoeSwgbSwgZCwgMTIsIDApLGVuZDogbmV3IERhdGUoeSwgbSwgZCwgMTQsIDApLGFsbERheTogZmFsc2V9LFxyXG4gICAgICAgICAge3R5cGU6J3BhcnR5Jyx0aXRsZTogJ0NsaWNrIGZvciBHb29nbGUnLHN0YXJ0OiBuZXcgRGF0ZSh5LCBtLCAyOCksZW5kOiBuZXcgRGF0ZSh5LCBtLCAyOSksdXJsOiAnaHR0cDovL2dvb2dsZS5jb20vJ31cclxuICAgICAgICBdXHJcbiAgICB9O1xyXG4gICAgLyogYWxlcnQgb24gZXZlbnRDbGljayAqL1xyXG4gICAgJHNjb3BlLmFsZXJ0T25FdmVudENsaWNrID0gZnVuY3Rpb24oIGRhdGUsIGpzRXZlbnQsIHZpZXcpe1xyXG4gICAgICAgICRzY29wZS5hbGVydE1lc3NhZ2UgPSAoZGF0ZS50aXRsZSArICcgd2FzIGNsaWNrZWQgJyk7XHJcbiAgICB9O1xyXG4gICAgLyogYWxlcnQgb24gRHJvcCAqL1xyXG4gICAgICRzY29wZS5hbGVydE9uRHJvcCA9IGZ1bmN0aW9uKGV2ZW50LCBkZWx0YSwgcmV2ZXJ0RnVuYywganNFdmVudCwgdWksIHZpZXcpe1xyXG4gICAgICAgJHNjb3BlLmFsZXJ0TWVzc2FnZSA9ICgnRXZlbnQgRHJvcGVkIHRvIG1ha2UgZGF5RGVsdGEgJyArIGRlbHRhKTtcclxuICAgIH07XHJcbiAgICAvKiBhbGVydCBvbiBSZXNpemUgKi9cclxuICAgICRzY29wZS5hbGVydE9uUmVzaXplID0gZnVuY3Rpb24oZXZlbnQsIGRlbHRhLCByZXZlcnRGdW5jLCBqc0V2ZW50LCB1aSwgdmlldyApe1xyXG4gICAgICAgJHNjb3BlLmFsZXJ0TWVzc2FnZSA9ICgnRXZlbnQgUmVzaXplZCB0byBtYWtlIGRheURlbHRhICcgKyBkZWx0YSk7XHJcbiAgICB9O1xyXG4gICAgXHJcblxyXG4gICAgLyogYWRkIGN1c3RvbSBldmVudCovXHJcbiAgICAkc2NvcGUuYWRkRXZlbnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgJHNjb3BlLmV2ZW50cy5wdXNoKHtcclxuICAgICAgICB0aXRsZTogJ09wZW4gU2VzYW1lJyxcclxuICAgICAgICBzdGFydDogbmV3IERhdGUoeSwgbSwgMjgpLFxyXG4gICAgICAgIGVuZDogbmV3IERhdGUoeSwgbSwgMjkpLFxyXG4gICAgICAgIGNsYXNzTmFtZTogWydvcGVuU2VzYW1lJ11cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyogcmVtb3ZlIGV2ZW50ICovXHJcbiAgICAkc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgJHNjb3BlLmV2ZW50cy5zcGxpY2UoaW5kZXgsMSk7XHJcbiAgICB9O1xyXG4gICAgLyogQ2hhbmdlIFZpZXcgKi9cclxuICAgICRzY29wZS5jaGFuZ2VWaWV3ID0gZnVuY3Rpb24odmlldyxjYWxlbmRhcikge1xyXG4gICAgICB1aUNhbGVuZGFyQ29uZmlnLmNhbGVuZGFyc1tjYWxlbmRhcl0uZnVsbENhbGVuZGFyKCdjaGFuZ2VWaWV3Jyx2aWV3KTtcclxuICAgIH07XHJcbiAgICAvKiBDaGFuZ2UgVmlldyAqL1xyXG4gICAgJHNjb3BlLnJlbmRlckNhbGVuZGVyID0gZnVuY3Rpb24oY2FsZW5kYXIpIHtcclxuICAgICAgaWYodWlDYWxlbmRhckNvbmZpZy5jYWxlbmRhcnNbY2FsZW5kYXJdKXtcclxuICAgICAgICB1aUNhbGVuZGFyQ29uZmlnLmNhbGVuZGFyc1tjYWxlbmRhcl0uZnVsbENhbGVuZGFyKCdyZW5kZXInKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgICAvKiBSZW5kZXIgVG9vbHRpcCAqL1xyXG4gICAgJHNjb3BlLmV2ZW50UmVuZGVyID0gZnVuY3Rpb24oIGV2ZW50LCBlbGVtZW50LCB2aWV3ICkgeyBcclxuICAgICAgICBlbGVtZW50LmF0dHIoeyd0b29sdGlwJzogZXZlbnQudGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICd0b29sdGlwLWFwcGVuZC10by1ib2R5JzogdHJ1ZX0pO1xyXG4gICAgICAgICRjb21waWxlKGVsZW1lbnQpKCRzY29wZSk7XHJcbiAgICB9O1xyXG4gICAgLyogY29uZmlnIG9iamVjdCAqL1xyXG4gICAgJHNjb3BlLnVpQ29uZmlnID0ge1xyXG4gICAgICBjYWxlbmRhcjp7XHJcbiAgICAgICAgaGVpZ2h0OiA0NTAsXHJcbiAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgaGVhZGVyOntcclxuICAgICAgICAgIGxlZnQ6ICd0aXRsZScsXHJcbiAgICAgICAgICBjZW50ZXI6ICcnLFxyXG4gICAgICAgICAgcmlnaHQ6ICd0b2RheSBwcmV2LG5leHQnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBldmVudENsaWNrOiAkc2NvcGUuYWxlcnRPbkV2ZW50Q2xpY2ssXHJcbiAgICAgICAgZXZlbnREcm9wOiAkc2NvcGUuYWxlcnRPbkRyb3AsXHJcbiAgICAgICAgZXZlbnRSZXNpemU6ICRzY29wZS5hbGVydE9uUmVzaXplLFxyXG4gICAgICAgIGV2ZW50UmVuZGVyOiAkc2NvcGUuZXZlbnRSZW5kZXJcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgXHJcbiAgICAvKiBldmVudCBzb3VyY2VzIGFycmF5Ki9cclxuICAgICRzY29wZS5ldmVudFNvdXJjZXMgPSBbJHNjb3BlLmV2ZW50cywgJHNjb3BlLmV2ZW50U291cmNlLCAkc2NvcGUuZXZlbnRzRl07XHJcbiAgICAkc2NvcGUuZXZlbnRTb3VyY2VzMiA9IFskc2NvcGUuY2FsRXZlbnRzRXh0LCAkc2NvcGUuZXZlbnRzRiwgJHNjb3BlLmV2ZW50c107XHJcbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkNvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJGxvY2F0aW9uJywnJHNjb3BlJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJGxvY2F0aW9uLCRzY29wZSxSZXNlcnZhdGlvblNlcnZpY2Upe1xuICAgJHNjb3BlLmZvcm1EYXRhPURhdGFTZXJ2aWNlLmdldCgpOyAgICAgXG4gICAkc2NvcGUuZ3Vlc3RpbmZvPSBfLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImd1ZXN0aW5mb1wifSkuY3VzdG9tZXJQcm9maWxlO1xuICAgJHNjb3BlLmNhcmRpbmZvPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwicGF5bWVudGluZm9cIn0pLnBheW1lbnREZXRhaWxzO1xuICAgJHNjb3BlLmJvb2tpbmdpbmZvPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwiYm9va2luZ2luZm9cIn0pLnNlbGVjdGVkcm9vbXM7XG4gICAgJHNjb3BlLmd1ZXN0U3VtbWFyeT1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImJvb2tpbmdpbmZvXCJ9KS5xdWVycnk7XG4gICAgJHNjb3BlLnJvb21zU3VtbWFyeT1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcInJvb21pbmZvXCJ9KS5zdW1tYXJ5O1xuICAgJHNjb3BlLmNvbXBhbnlfaWQ9Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJib29raW5naW5mb1wifSkuY29tcGFueWlkO1xuXG4gICBcblxuICAgJHNjb3BlLnByb2Nlc3NGb3JtPWZ1bmN0aW9uKCl7XG4gICAgdmFyIGRhdGEgPXt9O1xuICAgICAgICBkYXRhLmd1ZXN0aW5mbz0kc2NvcGUuZ3Vlc3RpbmZvO1xuICAgICAgICBkYXRhLmNhcmRpbmZvPSRzY29wZS5jYXJkaW5mbztcbiAgICAgICAgZGF0YS5ib29raW5naW5mbz0kc2NvcGUuYm9va2luZ2luZm87XG4gICAgICAgICBkYXRhLmd1ZXN0U3VtbWFyeT0kc2NvcGUuZ3Vlc3RTdW1tYXJ5O1xuICAgICAgICAgZGF0YS5yb29tU3VtbWFyeT0kc2NvcGUucm9vbXNTdW1tYXJ5O1xuICAgICAgICAgZGF0YS5jb21wYW55X2lkPSRzY29wZS5jb21wYW55X2lkO1xuXG5cbiAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLmNyZWF0ZShkYXRhKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgICAvLyAgYWxlcnQocmVzcC5zdWNjZXNzKTtcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1EYXRhPVwiXCI7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy90aGFua25vdGUvJytyZXNwLnN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY2xlYXIgZGF0YSBzZXJ2aWNlIGRhdGFcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIityZXNwKTtcbiAgICAgICAgICAgIH0pOyAgXG5cbiAgIH07XG4gICBcblxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignRm9vdGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5jb250cm9sbGVyKCdndWVzdENvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJHN0YXRlJywnJHNjb3BlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJHN0YXRlLCRzY29wZSl7XG4gICAkc2NvcGUuZm9ybURhdGE9e307XG5cblxuICAgJHNjb3BlLnBheW1lbnQ9ZnVuY3Rpb24oKXtcblxuXHQgICBcdCB2YXIgZGF0YT17fTtcblx0ICAgXHQgZGF0YS5pZD0nZ3Vlc3RpbmZvJztcblx0ICAgXHQgZGF0YS5jdXN0b21lclByb2ZpbGU9JHNjb3BlLmZvcm1EYXRhO1xuXHQgICBcdERhdGFTZXJ2aWNlLnNhdmUoZGF0YSk7XG5cdCAgIFx0JHN0YXRlLmdvKCdwYXltZW50Jyk7XG4gICB9O1xuXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xufV0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ291dENvbnRyb2xsZXInLCBbJyRsb2NhdGlvbicsICdMb2dpblNlcnZpY2UnLCBmdW5jdGlvbigkbG9jYXRpb24sIExvZ2luU2VydmljZSl7XG4gIExvZ2luU2VydmljZS5sb2dvdXQoKTtcbiAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xufV0pO1xuXG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcigncGF5bWVudENvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJHN0YXRlJywnJHNjb3BlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJHN0YXRlLCRzY29wZSl7XG4gICAkc2NvcGUuZm9ybURhdGE9e307XG5cblxuICAgJHNjb3BlLmdvdG9Db25maXJtPWZ1bmN0aW9uKCl7XG5cdCAgIFx0IHZhciBkYXRhPXt9O1xuXHQgICBcdCBkYXRhLmlkPSdwYXltZW50aW5mbyc7XG5cdCAgIFx0IGRhdGEucGF5bWVudERldGFpbHM9JHNjb3BlLmZvcm1EYXRhO1xuXHQgICBcdERhdGFTZXJ2aWNlLnNhdmUoZGF0YSk7XG5cdCAgIFx0JHN0YXRlLmdvKCdDb25maXJtYXRpb24nKTtcbiAgIH07XG5cbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRzdGF0ZScsJ1Jlc2VydmF0aW9uU2VydmljZScsICdEYXRhU2VydmljZScsJyRhbmNob3JTY3JvbGwnLCckbG9jYXRpb24nLGZ1bmN0aW9uKCRzY29wZSwkc3RhdGVQYXJhbXMsJHN0YXRlLFJlc2VydmF0aW9uU2VydmljZSxEYXRhU2VydmljZSwkYW5jaG9yU2Nyb2xsLCRsb2NhdGlvbil7XG4gICAkbG9jYXRpb24uaGFzaCgndG9wJyk7XG5cbiAgICAgIC8vIGNhbGwgJGFuY2hvclNjcm9sbCgpXG4gICAgICAkYW5jaG9yU2Nyb2xsKCk7XG5cblx0XG4gICRzY29wZS5mb3JtRGF0YSA9IHt9O1xuICRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscz1hbmd1bGFyLmZyb21Kc29uKGF0b2IoJHN0YXRlUGFyYW1zLnJvb21kZXRhaWxzKSk7XG4gIC8vY29uc29sZS5sb2coJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzKTtcblxuICAkc2NvcGUuc3VtbWFyeT17fTtcbiAgJHNjb3BlLnN1bW1hcnkubm9Sb29tcz0kc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMuc2VsZWN0ZWRyb29tcy5sZW5ndGg7XG4gICRzY29wZS5zdW1tYXJ5Lm5vR3Vlc3Q9ICRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5xdWVycnkuYWR1bHRzOyBcbiAgJHNjb3BlLnN1bW1hcnkuc3RhcnRkYXRlPSRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5xdWVycnkuY2hlY2tfaW47XG4gICRzY29wZS5zdW1tYXJ5LmVuZGRhdGU9JHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnF1ZXJyeS5jaGVja19vdXQ7XG5cbiAgJHNjb3BlLnRvdGFscHJpY2U9ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRwcmljZT0wO1xuICAgICAgICBcblxuICAgICAgIGZvciAodmFyIGk9MCAgO2k8JHNjb3BlLnN1bW1hcnkubm9Sb29tcztpKyspe1xuXG4gICAgICAgICAgIHRwcmljZT10cHJpY2UrJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnNlbGVjdGVkcm9vbXNbaV0ucm9vbS5iYXNlX3ByaWNlO1xuICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRwcmljZTtcbiAgICAgIH07XG5cblxuXG4kc2NvcGUuc3VtbWFyeS50UHJpY2U9ICRzY29wZS50b3RhbHByaWNlKCk7IFxuXG4gICAgXG4gICAgLy8gZnVuY3Rpb24gdG8gcHJvY2VzcyB0aGUgZm9ybVxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgIC8vIGFsZXJ0KCdhd2Vzb21lIScpO1xuXG4gICAgICAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLmNyZWF0ZSgkc2NvcGUuZm9ybURhdGEpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJkYXRhIHNhdmVkIFJlc2VydmF0aW9uIElEIDk4ODlcIik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1EYXRhPVwiXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJycm9yIFwiK2Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7ICBcblxuXG4gICAgfTtcblxuXG4gICAgJHNjb3BlLnByb2NlZWQ9ZnVuY3Rpb24oKXtcbiAgICAgIHZhciBkYXRhPXt9O1xuICAgICAgICBkYXRhLmlkPSdyb29taW5mbyc7XG4gICAgICAgIGRhdGEucm9vbWRldGFpbHM9JHNjb3BlLmZvcm1EYXRhO1xuICAgICAgICBkYXRhLnN1bW1hcnk9JHNjb3BlLnN1bW1hcnk7XG4gICAgICAgICBEYXRhU2VydmljZS5zYXZlKGRhdGEpO1xuICAgICAgICAgICAkc3RhdGUuZ28oJ2d1ZXN0aW5mbycpO1xuICAgIH07XG5cbiAgICBcbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc2VydmVQYXltZW50Q29udHJvbGxlcicsIFsnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oUmVzZXJ2YXRpb25TZXJ2aWNlKXtcblxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignYm9va2luZ0NvbnRyb2xsZXInLCBbJ1Jlc2VydmF0aW9uU2VydmljZScsIGZ1bmN0aW9uKFJlc2VydmF0aW9uU2VydmljZSl7XG5cbn1dKTsiLCJcblxuQm9va2luZy5jb250cm9sbGVyKCd0aGFua25vdGVDb250cm9sbGVyJywgWyckbG9jYXRpb24nLCckc2NvcGUnLCckc3RhdGVQYXJhbXMnICxmdW5jdGlvbigkbG9jYXRpb24sJHNjb3BlLCRzdGF0ZVBhcmFtcyl7XG4gICAgJHNjb3BlLnJlc2VydmF0aW9uaWQ9ICRzdGF0ZVBhcmFtcy5yZXNlcnZhdGlvbmlkO1xuXG5cdH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=