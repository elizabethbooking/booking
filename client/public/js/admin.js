var Booking;Booking=angular.module("Booking",["ngRoute"]),Booking.factory("authInterceptor",["$rootScope","$q","$window",function(e,o,t){return{request:function(e){return e.headers=e.headers||{},t.sessionStorage.token?e.headers.token=t.sessionStorage.token:t.location.href="Error.html",e},response:function(e){return 401===e.status&&(t.location.href="Error.html"),e||o.when(e)}}}]),Booking.config(["$routeProvider","$locationProvider","$httpProvider",function(e,o,t){t.interceptors.push("authInterceptor"),e.when("/",{templateUrl:"/templates/admin/index.html",controller:"HomeController"}).when("/policies",{templateUrl:"/templates/views/policies.html",controller:"PoliciesController"}).when("/inventory",{templateUrl:"/templates/views/inventory.html",controller:"InventoryController"}).when("/users",{templateUrl:"/templates/views/users.html",controller:"UsersController"}).when("/user-profile",{templateUrl:"/templates/views/user_profile.html",controller:"UserProfileController"}).when("/logout",{templateUrl:"templates/admin/logout.html",controller:"LogoutController"}).otherwise({redirectTo:"/"})}]),Booking.run(["$rootScope","$location",function(e,o){}]);
Booking.factory("CompanyService",["$http",function(n){return{data:function(t){n.get("/api/company").success(function(n,c){t(n)})}}}]);
Booking.factory("CustomerService",["$http",function(t){return{data:function(c){t.get("/api/customer").success(function(t,n){c(t)})}}}]);
Booking.service("DataService",["$http",function(o){var t=[];this.save=function(o){t.push(o),console.log("data Saved"),console.log(t)},this.get=function(){return t}}]);
Booking.factory("InventoryService",["$http",function(t){var n=10001;return{results:[],data:function(n){t.get("/api/inventory").success(function(t,i){n(t)})},query:function(i,s){t.post("/api/availability/"+n,i).success(function(t,n){this.results=t,s(t)}.bind(this))}}}]);
Booking.factory("LoginService",["$http","$rootScope",function(o,e){return{auth:function(e,n){o.post("/api/login",e).success(function(o,e){n(o,e)}).error(function(){console.log("error")})},user:function(){var o="";return $cookies.get("user")&&(e.loggedIn=o=JSON.parse($cookies.get("user"))),o},logout:function(){e.loggedIn=null,$cookies.remove("user")}}}]);
Booking.factory("PoliciesService",["$http",function(i){return{data:function(c){i.get("/api/policies").success(function(i,t){c(i)})}}}]);
Booking.factory("ReservationService",["$http",function(r){var t={};return t.data=function(){return r.get("/api/reservation")},t.query=function(t){return r.get("/api/reservation")},t.create=function(t){return r.post("/api/reservation",t)},t}]);
Booking.factory("RoleService",["$http",function(t){return{data:function(n){t.get("/api/role").success(function(t,o){n(t)})}}}]);
Booking.factory("UsersService",["$http",function(t){return{data:function(n){t.get("/api/users").success(function(t,c){n(t)})}}}]);
Booking.directive("availability",["$rootScope","dateFilter",function(e,o){return{restrict:"E",templateUrl:"/templates/directives/availability.html",controller:["$scope","$location","ReservationService","$stateParams","DataService",function(e,o,r,t,s){e.selectedrooms=[],e.number=-1,e.querry=angular.fromJson(atob(t.querry)),e.selectroom=function(o,r){var t={};t.id=o,t.room=r,r.selected=!0,e.selectedrooms.push(t),e.number=o,console.log(e.selectedrooms)},e.removeroom=function(o){for(i in e.selectedrooms)e.selectedrooms[i].id==o&&e.selectedrooms.splice(i,1)},e.book=function(){var r={};r.selectedrooms=e.selectedrooms,r.querry=e.querry,r.companyid=e.selectedrooms[0].room.company_id,r.id="bookinginfo";var t=btoa(angular.toJson(r));s.save(r),o.path("/reserve/"+t)},e.submit=function(){r.query(e.query).success(function(e){}).error(function(e){alert("Errror "+e.message)})}}]}}]);
Booking.directive("footerNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/footer.html",controller:"FooterController"}}]);
Booking.directive("home",[function(){return{restrict:"E",templateUrl:"/templates/home.html"}}]);
Booking.directive("inventory",[function(){return{restrict:"E",templateUrl:"/templates/inventory.html"}}]);
Booking.directive("leftNav",[function(){return{restrict:"A",scope:{},transclude:!0,templateUrl:"/templates/directives/left_nav.html",controller:"LeftNavController"}}]);
Booking.directive("login",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/login.html",controller:"LoginController"}}]);
Booking.directive("policies",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/policies.html",controller:"PoliciesController"}}]);
Booking.directive("query",["$rootScope","dateFilter","$location",function(t,e,o){return{restrict:"E",templateUrl:"/templates/directives/query.html",controller:["$scope","InventoryService",function(e,r){e.max_adults=[1,2,3],e.max_childs=[0,1,2,3],e.query={adults:1,childs:0,check_in:(new moment).toDate(),check_out:(new moment).add(3,"days").toDate()},e.submit=function(){r.query(e.query,function(e){t.$broadcast("query:results")});var n=btoa(angular.toJson(e.query));o.path("/booking/"+n)}}]}}]);
Booking.directive("resNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/res-nav.html",controller:"ResController"}}]);
Booking.directive("topNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/header.html",controller:"HeaderController"}}]);
Booking.directive("users",[function(){return{restrict:"E",templateUrl:"/templates/users.html"}}]);
Booking.directive("user_profile",[function(){return{restrict:"E",templateUrl:"/templates/user_profile.html"}}]);
Booking.controller("confirmationController",["DataService","$location","$scope","ReservationService",function(o,r,n,i){n.formData=o.get(),n.guestinfo=_.findWhere(n.formData,{id:"guestinfo"}).customerProfile,n.cardinfo=_.findWhere(n.formData,{id:"paymentinfo"}).paymentDetails,n.bookinginfo=_.findWhere(n.formData,{id:"bookinginfo"}).selectedrooms,n.guestSummary=_.findWhere(n.formData,{id:"bookinginfo"}).querry,n.roomsSummary=_.findWhere(n.formData,{id:"roominfo"}).summary,n.company_id=_.findWhere(n.formData,{id:"bookinginfo"}).companyid,n.processForm=function(){var o={};o.guestinfo=n.guestinfo,o.cardinfo=n.cardinfo,o.bookinginfo=n.bookinginfo,o.guestSummary=n.guestSummary,o.roomSummary=n.roomsSummary,o.company_id=n.company_id,i.create(o).success(function(o){console.log(o),n.formData="",r.path("/thanknote/"+o.success)}).error(function(o){alert("Errror "+o)})}}]);
Booking.controller("CustomerController",["CustomerService",function(o){this.customer=null,this.data="Booking Customer";var t=this;CustomerService.data(function(o){t.customer=o,console.log(o)})}]);
Booking.controller("FooterController",["$scope",function(o){}]);
Booking.controller("guestController",["DataService","$state","$scope",function(o,t,e){e.formData={},e.payment=function(){var a={};a.id="guestinfo",a.customerProfile=e.formData,o.save(a),t.go("payment")}}]);
Booking.controller("HeaderController",["$scope",function(o){}]);
Booking.controller("HomeController",["CompanyService",function(o){this.company=null,this.data="Booking Home";var n=this;o.data(function(o){n.company=o,console.log(o)})}]);
Booking.controller("InventoryController",["$rootScope","InventoryService",function(t,o){this.results=o.results,t.$on("query:results",function(){this.results=o.results}.bind(this))}]);
Booking.controller("LeftNavController",["$scope",function(o){}]);
Booking.controller("LoginController",["$rootScope","$scope","$window","LoginService",function(o,n,e,t){n.submit=function(){t.auth(n.user,function(n,t){200===t?(e.sessionStorage.token=n.token,o.loggedIn=n,e.location.href="/Admin.html"):delete e.sessionStorage.token})}}]);
Booking.controller("LogoutController",["$location","LoginService",function(o,n){n.logout(),o.path("/login")}]);
Booking.controller("paymentController",["DataService","$state","$scope",function(o,t,a){a.formData={},a.gotoConfirm=function(){var n={};n.id="paymentinfo",n.paymentDetails=a.formData,o.save(n),t.go("Confirmation")}}]);
Booking.controller("PoliciesController",["$rootScope","$scope","$location",function(o,i,c){i.policies=function(o){return policies.show=!0}}]);
Booking.controller("ResController",["$scope",function(o){}]);
Booking.controller("ReservationController",["ReservationService",function(o){this.reservation=null,this.data="Booking Rerservation";var e=this;RoleService.data(function(o){e.reservation=o,console.log(o)})}]);
Booking.controller("ReserveController",["$scope","$stateParams","$state","ReservationService","DataService","$anchorScroll","$location",function(o,r,a,e,t,m,s){s.hash("top"),m(),o.formData={},o.formData.roomDetails=angular.fromJson(atob(r.roomdetails)),o.summary={},o.summary.noRooms=o.formData.roomDetails.selectedrooms.length,o.summary.noGuest=o.formData.roomDetails.querry.adults,o.summary.startdate=o.formData.roomDetails.querry.check_in,o.summary.enddate=o.formData.roomDetails.querry.check_out,o.totalprice=function(){for(var r=0,a=0;a<o.summary.noRooms;a++)r+=o.formData.roomDetails.selectedrooms[a].room.base_price;return r},o.summary.tPrice=o.totalprice(),o.processForm=function(){e.create(o.formData).success(function(r){alert("data saved Reservation ID 9889"),o.formData=""}).error(function(o){alert("Errror "+o.message)})},o.proceed=function(){var r={};r.id="roominfo",r.roomdetails=o.formData,r.summary=o.summary,t.save(r),a.go("guestinfo")}}]);
Booking.controller("ReservePaymentController",["ReservationService",function(e){}]);
Booking.controller("bookingController",["ReservationService",function(o){}]);
Booking.controller("RoleController",["RoleService",function(o){this.role=null,this.data="Booking User Role";var l=this;o.data(function(o){l.role=o,console.log(o)})}]);
Booking.controller("thanknoteController",["$location","$scope","$stateParams",function(o,n,t){n.reservationid=t.reservationid}]);
Booking.controller("UsersController",["UsersService",function(s){this.users=null,this.data="Booking Users";var o=this;s.data(function(s){o.users=s,console.log(s)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIiwiY29tcGFueS5qcyIsImN1c3RvbWVyLmpzIiwiRGF0YVNlcnZpY2UuanMiLCJpbnZlbnRvcnkuanMiLCJsb2dpbi5qcyIsInBvbGljaWVzLmpzIiwicmVzZXJ2YXRpb24uanMiLCJyb2xlLmpzIiwidXNlcnMuanMiLCJhdmFpbGFiaWxpdHkuanMiLCJmb290ZXJfbmF2LmpzIiwiaG9tZS5qcyIsImxlZnRfbmF2LmpzIiwicXVlcnkuanMiLCJyZXpfbmF2LmpzIiwidG9wX25hdi5qcyIsInVzZXJfcHJvZmlsZS5qcyIsImNvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJmb290ZXIuanMiLCJndWVzdENvbnRyb2xsZXIuanMiLCJoZWFkZXIuanMiLCJsb2dvdXQuanMiLCJwYXltZW50Q29udHJvbGxlci5qcyIsInJlcy1oZWFkZXIuanMiLCJSZXNlcnZlQ29udHJvbGxlci5qcyIsIlJlc2VydmVQYXltZW50Q29udHJvbGxlci5qcyIsIlJlc2VydmVQcm9maWxlQ29udHJvbGxlci5qcyIsInRoYW5rbm90ZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiQm9va2luZyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHJvb3RTY29wZSIsIiRxIiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwic2Vzc2lvblN0b3JhZ2UiLCJ0b2tlbiIsImxvY2F0aW9uIiwiaHJlZiIsInJlc3BvbnNlIiwic3RhdHVzIiwid2hlbiIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkbG9jYXRpb24iLCIkaHR0cCIsImRhdGEiLCJjYWxsYmFjayIsImdldCIsInN1Y2Nlc3MiLCJzZXJ2aWNlIiwidGhpcyIsInNhdmUiLCJkdCIsImNvbnNvbGUiLCJsb2ciLCJjb21wYW55X2lkIiwicmVzdWx0cyIsInF1ZXJ5IiwicG9zdCIsImJpbmQiLCJhdXRoIiwiY3JlZGVudGlhbHMiLCJlcnJvciIsInVzZXIiLCIkY29va2llcyIsImxvZ2dlZEluIiwiSlNPTiIsInBhcnNlIiwibG9nb3V0IiwicmVtb3ZlIiwicmVzZXJ2YXRpb24iLCJxdWVycnkiLCJjcmVhdGUiLCJkaXJlY3RpdmUiLCJkYXRlRmlsdGVyIiwicmVzdHJpY3QiLCIkc2NvcGUiLCJSZXNlcnZhdGlvblNlcnZpY2UiLCIkc3RhdGVQYXJhbXMiLCJEYXRhU2VydmljZSIsInNlbGVjdGVkcm9vbXMiLCJudW1iZXIiLCJmcm9tSnNvbiIsImF0b2IiLCJzZWxlY3Ryb29tIiwiaW5kZXgiLCJyb29tIiwicm0iLCJpZCIsInNlbGVjdGVkIiwicmVtb3Zlcm9vbSIsImkiLCJzcGxpY2UiLCJib29rIiwiayIsImNvbXBhbnlpZCIsImRldCIsImJ0b2EiLCJ0b0pzb24iLCJwYXRoIiwic3VibWl0IiwiYWxlcnQiLCJtZXNzYWdlIiwic2NvcGUiLCJ0cmFuc2NsdWRlIiwiSW52ZW50b3J5U2VydmljZSIsIm1heF9hZHVsdHMiLCJtYXhfY2hpbGRzIiwiYWR1bHRzIiwiY2hpbGRzIiwiY2hlY2tfaW4iLCJtb21lbnQiLCJ0b0RhdGUiLCJjaGVja19vdXQiLCJhZGQiLCIkYnJvYWRjYXN0IiwiZm9ybURhdGEiLCJndWVzdGluZm8iLCJfIiwiZmluZFdoZXJlIiwiY3VzdG9tZXJQcm9maWxlIiwiY2FyZGluZm8iLCJwYXltZW50RGV0YWlscyIsImJvb2tpbmdpbmZvIiwiZ3Vlc3RTdW1tYXJ5Iiwicm9vbXNTdW1tYXJ5Iiwic3VtbWFyeSIsInByb2Nlc3NGb3JtIiwicm9vbVN1bW1hcnkiLCJyZXNwIiwiVXNlcnNTZXJ2aWNlIiwiY3VzdG9tZXIiLCJfc2VsZiIsIkN1c3RvbWVyU2VydmljZSIsIiRzdGF0ZSIsInBheW1lbnQiLCJnbyIsIkNvbXBhbnlTZXJ2aWNlIiwiY29tcGFueSIsIiRvbiIsIkxvZ2luU2VydmljZSIsImdvdG9Db25maXJtIiwicG9saWNpZXMiLCJzaG93IiwiUm9sZVNlcnZpY2UiLCIkYW5jaG9yU2Nyb2xsIiwiaGFzaCIsInJvb21EZXRhaWxzIiwicm9vbWRldGFpbHMiLCJub1Jvb21zIiwibGVuZ3RoIiwibm9HdWVzdCIsInN0YXJ0ZGF0ZSIsImVuZGRhdGUiLCJ0b3RhbHByaWNlIiwidHByaWNlIiwiYmFzZV9wcmljZSIsInRQcmljZSIsInByb2NlZWQiLCJyb2xlIiwicmVzZXJ2YXRpb25pZCIsInVzZXJzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxRQUVKQSxTQUFVQyxRQUFRQyxPQUFPLFdBQVksWUFFckNGLFFBQVFHLFFBQVEsbUJBQW1CLGFBQWMsS0FBTSxVQUFXLFNBQVVDLEVBQVlDLEVBQUlDLEdBQ3RGLE9BQ0FDLFFBQVMsU0FBVUMsR0FVakIsTUFSQUEsR0FBT0MsUUFBVUQsRUFBT0MsWUFDcEJILEVBQVFJLGVBQWVDLE1BQzNCSCxFQUFPQyxRQUFRRSxNQUFRTCxFQUFRSSxlQUFlQyxNQUlsQ0wsRUFBUU0sU0FBU0MsS0FBTyxhQUU3QkwsR0FFVE0sU0FBVSxTQUFVQSxHQU1sQixNQUx3QixPQUFwQkEsRUFBU0MsU0FFYlQsRUFBUU0sU0FBU0MsS0FBTyxjQUdqQkMsR0FBWVQsRUFBR1csS0FBS0YsUUFPbkNkLFFBQVFRLFFBQVEsaUJBQWtCLG9CQUFvQixnQkFBaUIsU0FBU1MsRUFBZ0JDLEVBQWtCQyxHQUc5R0EsRUFBY0MsYUFBYUMsS0FBSyxtQkFFbENKLEVBQ0dELEtBQUssS0FDSk0sWUFBYyw4QkFDZEMsV0FBYyxtQkFHZlAsS0FBSyxhQUNKTSxZQUFjLGlDQUNkQyxXQUFjLHVCQUVmUCxLQUFLLGNBQ0pNLFlBQWMsa0NBQ2RDLFdBQWMsd0JBRWZQLEtBQUssVUFDSk0sWUFBYyw4QkFDZEMsV0FBYyxvQkFHZlAsS0FBSyxpQkFDSk0sWUFBYyxxQ0FDZEMsV0FBYywwQkFHZlAsS0FBSyxXQUNKTSxZQUFjLDhCQUNkQyxXQUFjLHFCQUVmQyxXQUFZQyxX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LEdBQ3hCdUYsRUFBTTJCLEtBQU9sSCxFQUNiUSxRQUFRQyxJQUFJVDtBb0JMaEI3QixRQUFRdUIsV0FBVyx1QkFBd0IsWUFBWSxTQUFTLGVBQWdCLFNBQVNJLEVBQVVpQyxFQUFPRSxHQUN0R0YsRUFBT29GLGNBQWVsRixFQUFha0Y7QW5CSHZDaEosUUFBUXVCLFdBQVcsbUJBQW9CLGVBQWdCLFNBQVMyRixHQUM5RGhGLEtBQUsrRyxNQUFRLEtBQ2IvRyxLQUFLTCxLQUFPLGVBQ1osSUFBSXVGLEdBQVFsRixJQUVaZ0YsR0FBYXJGLEtBQUssU0FBU0EsR0FDekJ1RixFQUFNNkIsTUFBUXBILEVBQ2RRLFFBQVFDLElBQUlUIiwiZmlsZSI6ImFkbWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEJvb2tpbmc7XG5cbkJvb2tpbmcgPSBhbmd1bGFyLm1vZHVsZSgnQm9va2luZycsIFsnbmdSb3V0ZSddKTtcblxuQm9va2luZy5mYWN0b3J5KCdhdXRoSW50ZXJjZXB0b3InLFsnJHJvb3RTY29wZScsICckcScsICckd2luZG93JywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRxLCAkd2luZG93KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgcmVxdWVzdDogZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBcbiAgICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgICAgaWYgKCR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgY29uZmlnLmhlYWRlcnMudG9rZW49ICAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuO1xuICAgICAgICB9XG4gICAgICAgICBlbHNle1xuICAgICAgICAgICAvLyBubyB0b2tlbiBpbiBTdG9yZVxuICAgICAgICAgICAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIkVycm9yLmh0bWxcIjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgIC8vIGhhbmRsZSB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIkVycm9yLmh0bWxcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xuICAgICAgfVxuICAgICAgfTtcbiAgICB9XSk7XG5cblxuXG5Cb29raW5nLmNvbmZpZyhbJyRyb3V0ZVByb3ZpZGVyJywgJyRsb2NhdGlvblByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlciwkaHR0cFByb3ZpZGVyKXtcbiAgXG5cbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdhdXRoSW50ZXJjZXB0b3InKTtcblxuICAkcm91dGVQcm92aWRlclxuICAgIC53aGVuKCcvJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9hZG1pbi9pbmRleC5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ0hvbWVDb250cm9sbGVyJ1xuICAgIH0pXG5cbiAgICAud2hlbignL3BvbGljaWVzJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9wb2xpY2llcy5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ1BvbGljaWVzQ29udHJvbGxlcidcbiAgICB9KVxuICAgIC53aGVuKCcvaW52ZW50b3J5Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9pbnZlbnRvcnkuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdJbnZlbnRvcnlDb250cm9sbGVyJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VycycsIHtcbiAgICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdmlld3MvdXNlcnMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2Vyc0NvbnRyb2xsZXInXG4gICAgfSlcbiAgIFxuICAgIC53aGVuKCcvdXNlci1wcm9maWxlJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy91c2VyX3Byb2ZpbGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2VyUHJvZmlsZUNvbnRyb2xsZXInXG4gICAgfSlcbiAgIFxuICAgIC53aGVuKCcvbG9nb3V0Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAndGVtcGxhdGVzL2FkbWluL2xvZ291dC5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ0xvZ291dENvbnRyb2xsZXInXG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHsgcmVkaXJlY3RUbyA6ICcvJyB9KTtcblxuICAvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICBcblxufV0pO1xuXG5Cb29raW5nLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbil7XG5cbiBcbiBcbi8qXG4gICRyb290U2NvcGUuJG9uKFwiJHJvdXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpe1xuICAgIGlmIChMb2dpblNlcnZpY2UudXNlcigpID09PSBudWxsKSB7XG4gICAgICAkcm9vdFNjb3BlLmxvZ2dlZEluID0gbnVsbDtcbiAgICAgIGlmICggbmV4dC50ZW1wbGF0ZVVybCA9PT0gJy90ZW1wbGF0ZXMvYWRtaW4vbG9naW4uaHRtbCcpIHtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgKi9cblxufV0pO1xuXG4iLCJCb29raW5nLmZhY3RvcnkoJ0NvbXBhbnlTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcbiAgcmV0dXJuIHtcbiAgICBkYXRhIDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRodHRwLmdldCgnL2FwaS9jb21wYW55JylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcbiAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0N1c3RvbWVyQ29udHJvbGxlcicsIFsnQ3VzdG9tZXJTZXJ2aWNlJywgZnVuY3Rpb24oVXNlcnNTZXJ2aWNlKXtcbiAgdGhpcy5jdXN0b21lciA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIEN1c3RvbWVyJztcbiAgdmFyIF9zZWxmID0gdGhpcztcblxuICBDdXN0b21lclNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5jdXN0b21lciA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xufV0pOyIsIkJvb2tpbmcuc2VydmljZSgnRGF0YVNlcnZpY2UnLCBbJyRodHRwJywgZnVuY3Rpb24oJGh0dHApe1xuXG5cdCAgdmFyIGRhdGE9W11cblxuXG5cdCAgIHRoaXMuc2F2ZT1mdW5jdGlvbihkdCl7XG5cdCAgICAgXHRkYXRhLnB1c2goZHQpO1xuXHQgICAgIFx0Y29uc29sZS5sb2coXCJkYXRhIFNhdmVkXCIpO1xuXHQgICAgIFx0Y29uc29sZS5sb2coZGF0YSk7XG5cblx0ICAgfVxuXHQgICB0aGlzLmdldD1mdW5jdGlvbigpe1xuXHQgICBcdHJldHVybiBkYXRhO1xuXHQgICB9XG5cbiAgICAgXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdJbnZlbnRvcnlDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJ0ludmVudG9yeVNlcnZpY2UnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCBJbnZlbnRvcnlTZXJ2aWNlKXtcbiAgdGhpcy5yZXN1bHRzID0gSW52ZW50b3J5U2VydmljZS5yZXN1bHRzO1xuXG4gICRyb290U2NvcGUuJG9uKCdxdWVyeTpyZXN1bHRzJywgZnVuY3Rpb24oKXtcbiAgICB0aGlzLnJlc3VsdHMgPSBJbnZlbnRvcnlTZXJ2aWNlLnJlc3VsdHM7XG4gIH0uYmluZCh0aGlzKSk7XG5cblxuXG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHdpbmRvdycsICdMb2dpblNlcnZpY2UnLFxuICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3csIExvZ2luU2VydmljZSl7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICBMb2dpblNlcnZpY2UuYXV0aCgkc2NvcGUudXNlciwgZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4gPSBkYXRhLnRva2VuO1xuICAgICAgICAgICRyb290U2NvcGUubG9nZ2VkSW4gPSBkYXRhO1xuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZj0nL0FkbWluLmh0bWwnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgfV1cbik7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUG9saWNpZXNDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckbG9jYXRpb24nLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLnBvbGljaWVzID0gZnVuY3Rpb24oc2hvdykge1xuICAgICAgcmV0dXJuIHBvbGljaWVzLnNob3cgPSB0cnVlOyAgXG4gICAgfTtcbiAgfVxuXSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2YXRpb25Db250cm9sbGVyJywgWydSZXNlcnZhdGlvblNlcnZpY2UnLCBmdW5jdGlvbihSZXNlcnZhdGlvblNlcnZpY2Upe1xuICB0aGlzLnJlc2VydmF0aW9uID0gbnVsbDtcbiAgdGhpcy5kYXRhID0gJ0Jvb2tpbmcgUmVyc2VydmF0aW9uJztcbiAgdmFyIF9zZWxmID0gdGhpcztcblxuICBSb2xlU2VydmljZS5kYXRhKGZ1bmN0aW9uKGRhdGEpe1xuICAgIF9zZWxmLnJlc2VydmF0aW9uID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdSb2xlQ29udHJvbGxlcicsIFsnUm9sZVNlcnZpY2UnLCBmdW5jdGlvbihSb2xlU2VydmljZSl7XG4gIHRoaXMucm9sZSA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIFVzZXIgUm9sZSc7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgUm9sZVNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5yb2xlID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdVc2Vyc0NvbnRyb2xsZXInLCBbJ1VzZXJzU2VydmljZScsIGZ1bmN0aW9uKFVzZXJzU2VydmljZSl7XG4gIHRoaXMudXNlcnMgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBVc2Vycyc7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgVXNlcnNTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYudXNlcnMgPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KTtcbn1dKTsiLCJCb29raW5nLmRpcmVjdGl2ZSgnYXZhaWxhYmlsaXR5JywgWyckcm9vdFNjb3BlJywgJ2RhdGVGaWx0ZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCBkYXRlRmlsdGVyKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvYXZhaWxhYmlsaXR5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogWyckc2NvcGUnLCckbG9jYXRpb24nLCdSZXNlcnZhdGlvblNlcnZpY2UnLCckc3RhdGVQYXJhbXMnLCdEYXRhU2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwkbG9jYXRpb24sUmVzZXJ2YXRpb25TZXJ2aWNlLCRzdGF0ZVBhcmFtcyxEYXRhU2VydmljZSl7XG4gICAgICBcbiAgICAgICRzY29wZS5zZWxlY3RlZHJvb21zPVtdO1xuICAgICAgJHNjb3BlLm51bWJlcj0tMTtcbiAgJHNjb3BlLnF1ZXJyeT0gYW5ndWxhci5mcm9tSnNvbihhdG9iKCRzdGF0ZVBhcmFtcy5xdWVycnkpKVxuICAgICBcblxuJHNjb3BlLnNlbGVjdHJvb209ZnVuY3Rpb24oaW5kZXgscm9vbSl7XG4gICB2YXIgcm09e307XG4gICAgcm0uaWQ9aW5kZXg7XG4gICAgcm0ucm9vbT1yb29tO1xuICAgIHJvb20uc2VsZWN0ZWQ9dHJ1ZTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcy5wdXNoKHJtKTtcbiAgICAkc2NvcGUubnVtYmVyPWluZGV4O1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWxlY3RlZHJvb21zKVxufTtcbiRzY29wZS5yZW1vdmVyb29tPWZ1bmN0aW9uKGluZGV4KXtcblxuICAgZm9yIChpIGluICRzY29wZS5zZWxlY3RlZHJvb21zKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNlbGVjdGVkcm9vbXNbaV0uaWQgPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbn07XG5cbiRzY29wZS5ib29rPWZ1bmN0aW9uKCl7XG4gIHZhciBrPXt9O1xuICAgICBrLnNlbGVjdGVkcm9vbXM9JHNjb3BlLnNlbGVjdGVkcm9vbXM7XG4gICAgIGsucXVlcnJ5PSRzY29wZS5xdWVycnk7XG4gICAgIGsuY29tcGFueWlkPSRzY29wZS5zZWxlY3RlZHJvb21zWzBdLnJvb20uY29tcGFueV9pZDtcbiAgICAgay5pZD0nYm9va2luZ2luZm8nO1xuICAgdmFyIGRldD1idG9hKGFuZ3VsYXIudG9Kc29uKGspKTtcbiAgIERhdGFTZXJ2aWNlLnNhdmUoayk7XG4gICRsb2NhdGlvbi5wYXRoKCcvcmVzZXJ2ZS8nK2RldCk7XG4gIFxufTtcblxuICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICBSZXNlcnZhdGlvblNlcnZpY2UucXVlcnkoJHNjb3BlLnF1ZXJ5KVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJycm9yIFwiK2Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgXG4gICAgICB9O1xuICAgIH1dXG4gIH07XG59XSk7IiwiQm9va2luZy5kaXJlY3RpdmUoJ2Zvb3Rlck5hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9mb290ZXIuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnRm9vdGVyQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIFsnQ29tcGFueVNlcnZpY2UnLCBmdW5jdGlvbihDb21wYW55U2VydmljZSl7XG4gIHRoaXMuY29tcGFueSA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIEhvbWUnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIENvbXBhbnlTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY29tcGFueSA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xuXG5cblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdMZWZ0TmF2Q29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3F1ZXJ5JywgWyckcm9vdFNjb3BlJywgJ2RhdGVGaWx0ZXInLCckbG9jYXRpb24nICxmdW5jdGlvbigkcm9vdFNjb3BlLCBkYXRlRmlsdGVyLCRsb2NhdGlvbil7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3F1ZXJ5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogWyckc2NvcGUnLCAnSW52ZW50b3J5U2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgSW52ZW50b3J5U2VydmljZSl7XG4gICAgICAkc2NvcGUubWF4X2FkdWx0cyA9IFsxLDIsM107XG4gICAgICAkc2NvcGUubWF4X2NoaWxkcyA9IFswLDEsMiwzXTtcbiAgICAgICRzY29wZS5xdWVyeSA9IHtcbiAgICAgICAgYWR1bHRzOiAxLFxuICAgICAgICBjaGlsZHM6IDAsXG4gICAgICAgIGNoZWNrX2luOiBuZXcgbW9tZW50KCkudG9EYXRlKCksXG4gICAgICAgIGNoZWNrX291dDogbmV3IG1vbWVudCgpLmFkZCgzLCAnZGF5cycpLnRvRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgSW52ZW50b3J5U2VydmljZS5xdWVyeSgkc2NvcGUucXVlcnksIGZ1bmN0aW9uKHJlc3VsdHMpe1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncXVlcnk6cmVzdWx0cycpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgICB2YXIgZGV0PWJ0b2EoYW5ndWxhci50b0pzb24oJHNjb3BlLnF1ZXJ5KSk7XG4gICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ib29raW5nLycrZGV0KTtcbiAgICAgIH1cbiAgICB9XVxuICB9O1xufV0pO1xuXG4iLCJCb29raW5nLmRpcmVjdGl2ZSgncmVzTmF2JywgW2Z1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgc2NvcGUgICAgICAgOiB7fSxcbiAgICB0cmFuc2NsdWRlICA6IHRydWUsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3Jlcy1uYXYuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnUmVzQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3RvcE5hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9oZWFkZXIuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnSGVhZGVyQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3VzZXJfcHJvZmlsZScsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdXNlcl9wcm9maWxlLmh0bWwnXG4gIH07XG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkNvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJGxvY2F0aW9uJywnJHNjb3BlJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJGxvY2F0aW9uLCRzY29wZSxSZXNlcnZhdGlvblNlcnZpY2Upe1xuICAgJHNjb3BlLmZvcm1EYXRhPURhdGFTZXJ2aWNlLmdldCgpOyAgICAgXG4gICAkc2NvcGUuZ3Vlc3RpbmZvPSBfLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImd1ZXN0aW5mb1wifSkuY3VzdG9tZXJQcm9maWxlO1xuICAgJHNjb3BlLmNhcmRpbmZvPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwicGF5bWVudGluZm9cIn0pLnBheW1lbnREZXRhaWxzO1xuICAgJHNjb3BlLmJvb2tpbmdpbmZvPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwiYm9va2luZ2luZm9cIn0pLnNlbGVjdGVkcm9vbXM7XG4gICAgJHNjb3BlLmd1ZXN0U3VtbWFyeT1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImJvb2tpbmdpbmZvXCJ9KS5xdWVycnk7XG4gICAgJHNjb3BlLnJvb21zU3VtbWFyeT1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcInJvb21pbmZvXCJ9KS5zdW1tYXJ5O1xuICAgJHNjb3BlLmNvbXBhbnlfaWQ9Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJib29raW5naW5mb1wifSkuY29tcGFueWlkO1xuXG4gICBcblxuICAgJHNjb3BlLnByb2Nlc3NGb3JtPWZ1bmN0aW9uKCl7XG4gICAgdmFyIGRhdGEgPXt9O1xuICAgICAgICBkYXRhLmd1ZXN0aW5mbz0kc2NvcGUuZ3Vlc3RpbmZvO1xuICAgICAgICBkYXRhLmNhcmRpbmZvPSRzY29wZS5jYXJkaW5mbztcbiAgICAgICAgZGF0YS5ib29raW5naW5mbz0kc2NvcGUuYm9va2luZ2luZm87XG4gICAgICAgICBkYXRhLmd1ZXN0U3VtbWFyeT0kc2NvcGUuZ3Vlc3RTdW1tYXJ5O1xuICAgICAgICAgZGF0YS5yb29tU3VtbWFyeT0kc2NvcGUucm9vbXNTdW1tYXJ5O1xuICAgICAgICAgZGF0YS5jb21wYW55X2lkPSRzY29wZS5jb21wYW55X2lkO1xuXG5cbiAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLmNyZWF0ZShkYXRhKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICAgICAgICAvLyAgYWxlcnQocmVzcC5zdWNjZXNzKTtcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1EYXRhPVwiXCI7XG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy90aGFua25vdGUvJytyZXNwLnN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vY2xlYXIgZGF0YSBzZXJ2aWNlIGRhdGFcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIityZXNwKTtcbiAgICAgICAgICAgIH0pOyAgXG5cbiAgIH07XG4gICBcblxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignRm9vdGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5jb250cm9sbGVyKCdndWVzdENvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJHN0YXRlJywnJHNjb3BlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJHN0YXRlLCRzY29wZSl7XG4gICAkc2NvcGUuZm9ybURhdGE9e307XG5cblxuICAgJHNjb3BlLnBheW1lbnQ9ZnVuY3Rpb24oKXtcblxuXHQgICBcdCB2YXIgZGF0YT17fTtcblx0ICAgXHQgZGF0YS5pZD0nZ3Vlc3RpbmZvJztcblx0ICAgXHQgZGF0YS5jdXN0b21lclByb2ZpbGU9JHNjb3BlLmZvcm1EYXRhO1xuXHQgICBcdERhdGFTZXJ2aWNlLnNhdmUoZGF0YSk7XG5cdCAgIFx0JHN0YXRlLmdvKCdwYXltZW50Jyk7XG4gICB9O1xuXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xufV0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ291dENvbnRyb2xsZXInLCBbJyRsb2NhdGlvbicsICdMb2dpblNlcnZpY2UnLCBmdW5jdGlvbigkbG9jYXRpb24sIExvZ2luU2VydmljZSl7XG4gIExvZ2luU2VydmljZS5sb2dvdXQoKTtcbiAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xufV0pO1xuXG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcigncGF5bWVudENvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJHN0YXRlJywnJHNjb3BlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJHN0YXRlLCRzY29wZSl7XG4gICAkc2NvcGUuZm9ybURhdGE9e307XG5cblxuICAgJHNjb3BlLmdvdG9Db25maXJtPWZ1bmN0aW9uKCl7XG5cdCAgIFx0IHZhciBkYXRhPXt9O1xuXHQgICBcdCBkYXRhLmlkPSdwYXltZW50aW5mbyc7XG5cdCAgIFx0IGRhdGEucGF5bWVudERldGFpbHM9JHNjb3BlLmZvcm1EYXRhO1xuXHQgICBcdERhdGFTZXJ2aWNlLnNhdmUoZGF0YSk7XG5cdCAgIFx0JHN0YXRlLmdvKCdDb25maXJtYXRpb24nKTtcbiAgIH07XG5cbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRzdGF0ZScsJ1Jlc2VydmF0aW9uU2VydmljZScsICdEYXRhU2VydmljZScsJyRhbmNob3JTY3JvbGwnLCckbG9jYXRpb24nLGZ1bmN0aW9uKCRzY29wZSwkc3RhdGVQYXJhbXMsJHN0YXRlLFJlc2VydmF0aW9uU2VydmljZSxEYXRhU2VydmljZSwkYW5jaG9yU2Nyb2xsLCRsb2NhdGlvbil7XG4gICAkbG9jYXRpb24uaGFzaCgndG9wJyk7XG5cbiAgICAgIC8vIGNhbGwgJGFuY2hvclNjcm9sbCgpXG4gICAgICAkYW5jaG9yU2Nyb2xsKCk7XG5cblx0XG4gICRzY29wZS5mb3JtRGF0YSA9IHt9O1xuICRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscz1hbmd1bGFyLmZyb21Kc29uKGF0b2IoJHN0YXRlUGFyYW1zLnJvb21kZXRhaWxzKSk7XG4gIC8vY29uc29sZS5sb2coJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzKTtcblxuICAkc2NvcGUuc3VtbWFyeT17fTtcbiAgJHNjb3BlLnN1bW1hcnkubm9Sb29tcz0kc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMuc2VsZWN0ZWRyb29tcy5sZW5ndGg7XG4gICRzY29wZS5zdW1tYXJ5Lm5vR3Vlc3Q9ICRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5xdWVycnkuYWR1bHRzOyBcbiAgJHNjb3BlLnN1bW1hcnkuc3RhcnRkYXRlPSRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5xdWVycnkuY2hlY2tfaW47XG4gICRzY29wZS5zdW1tYXJ5LmVuZGRhdGU9JHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnF1ZXJyeS5jaGVja19vdXQ7XG5cbiAgJHNjb3BlLnRvdGFscHJpY2U9ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRwcmljZT0wO1xuICAgICAgICBcblxuICAgICAgIGZvciAodmFyIGk9MCAgO2k8JHNjb3BlLnN1bW1hcnkubm9Sb29tcztpKyspe1xuXG4gICAgICAgICAgIHRwcmljZT10cHJpY2UrJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnNlbGVjdGVkcm9vbXNbaV0ucm9vbS5iYXNlX3ByaWNlO1xuICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRwcmljZTtcbiAgICAgIH07XG5cblxuXG4kc2NvcGUuc3VtbWFyeS50UHJpY2U9ICRzY29wZS50b3RhbHByaWNlKCk7IFxuXG4gICAgXG4gICAgLy8gZnVuY3Rpb24gdG8gcHJvY2VzcyB0aGUgZm9ybVxuICAgICRzY29wZS5wcm9jZXNzRm9ybSA9IGZ1bmN0aW9uKCkge1xuICAgICAgIC8vIGFsZXJ0KCdhd2Vzb21lIScpO1xuXG4gICAgICAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLmNyZWF0ZSgkc2NvcGUuZm9ybURhdGEpXG4gICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJkYXRhIHNhdmVkIFJlc2VydmF0aW9uIElEIDk4ODlcIik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZvcm1EYXRhPVwiXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJycm9yIFwiK2Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7ICBcblxuXG4gICAgfTtcblxuXG4gICAgJHNjb3BlLnByb2NlZWQ9ZnVuY3Rpb24oKXtcbiAgICAgIHZhciBkYXRhPXt9O1xuICAgICAgICBkYXRhLmlkPSdyb29taW5mbyc7XG4gICAgICAgIGRhdGEucm9vbWRldGFpbHM9JHNjb3BlLmZvcm1EYXRhO1xuICAgICAgICBkYXRhLnN1bW1hcnk9JHNjb3BlLnN1bW1hcnk7XG4gICAgICAgICBEYXRhU2VydmljZS5zYXZlKGRhdGEpO1xuICAgICAgICAgICAkc3RhdGUuZ28oJ2d1ZXN0aW5mbycpO1xuICAgIH07XG5cbiAgICBcbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc2VydmVQYXltZW50Q29udHJvbGxlcicsIFsnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oUmVzZXJ2YXRpb25TZXJ2aWNlKXtcblxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignYm9va2luZ0NvbnRyb2xsZXInLCBbJ1Jlc2VydmF0aW9uU2VydmljZScsIGZ1bmN0aW9uKFJlc2VydmF0aW9uU2VydmljZSl7XG5cbn1dKTsiLCJcblxuQm9va2luZy5jb250cm9sbGVyKCd0aGFua25vdGVDb250cm9sbGVyJywgWyckbG9jYXRpb24nLCckc2NvcGUnLCckc3RhdGVQYXJhbXMnICxmdW5jdGlvbigkbG9jYXRpb24sJHNjb3BlLCRzdGF0ZVBhcmFtcyl7XG4gICAgJHNjb3BlLnJlc2VydmF0aW9uaWQ9ICRzdGF0ZVBhcmFtcy5yZXNlcnZhdGlvbmlkO1xuXG5cdH1dKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=