var Booking;Booking=angular.module("Booking",["ngRoute","angularUtils.directives.dirPagination"]),Booking.factory("authInterceptor",["$rootScope","$q","$window",function(e,o,t){return{request:function(e){return e.headers=e.headers||{},t.sessionStorage.token?e.headers.token=t.sessionStorage.token:t.location.href="Error.html",e},response:function(e){return 401===e.status&&(t.location.href="Error.html"),e||o.when(e)}}}]),Booking.config(["$routeProvider","$locationProvider","$httpProvider",function(e,o,t){t.interceptors.push("authInterceptor"),e.when("/",{templateUrl:"/templates/admin/index.html",controller:"HomeController"}).when("/policies",{templateUrl:"/templates/views/policies.html",controller:"PoliciesController"}).when("/inventory",{templateUrl:"/templates/views/inventory.html",controller:"InventoryController"}).when("/users",{templateUrl:"/templates/views/users.html",controller:"UsersController"}).when("/user-profile",{templateUrl:"/templates/views/user_profile.html",controller:"UserProfileController"}).when("/logout",{templateUrl:"templates/admin/logout.html",controller:"LogoutController"}).otherwise({redirectTo:"/"})}]),Booking.run(["$rootScope","$location",function(e,o){e.loggedIn=!0}]);
Booking.factory("CompanyService",["$http",function(n){return{data:function(t){n.get("/api/company").success(function(n,c){t(n)})}}}]);
Booking.factory("CustomerService",["$http",function(t){return{data:function(c){t.get("/api/customer").success(function(t,n){c(t)})}}}]);
Booking.service("DataService",["$http",function(o){var t=[];this.save=function(o){t.push(o),console.log("data Saved"),console.log(t)},this.get=function(){return t}}]);
Booking.factory("InventoryService",["$http",function(t){var n=10001;return{results:[],data:function(n){t.get("/api/inventory").success(function(t,i){n(t)})},query:function(i,s){t.post("/api/availability/"+n,i).success(function(t,n){this.results=t,s(t)}.bind(this))}}}]);
Booking.factory("LoginService",["$http","$rootScope",function(o,e){return{auth:function(e,n){o.post("/api/login",e).success(function(o,e){n(o,e)}).error(function(){console.log("error")})},user:function(){var o="";return $cookies.get("user")&&(e.loggedIn=o=JSON.parse($cookies.get("user"))),o},logout:function(){e.loggedIn=null,$cookies.remove("user")}}}]);
Booking.factory("PoliciesService",["$http",function(i){return{data:function(c){i.get("/api/policies").success(function(i,t){c(i)})}}}]);
Booking.factory("ReservationService",["$http",function(e){var n={};return n.data=function(){return e.get("/api/reservation")},n.query=function(n){return e.get("/api/reservation")},n.create=function(n){return e.post("/api/reservation",n)},n.pendingReservations=function(){return e.get("/admin/PendingReservations")},n}]);
Booking.factory("RoleService",["$http",function(t){return{data:function(n){t.get("/api/role").success(function(t,o){n(t)})}}}]);
Booking.factory("UsersService",["$http",function(t){return{data:function(n){t.get("/api/users").success(function(t,c){n(t)})}}}]);
Booking.directive("availability",["$rootScope","dateFilter",function(e,o){return{restrict:"E",templateUrl:"/templates/directives/availability.html",controller:["$scope","$location","ReservationService","$stateParams","DataService",function(e,o,r,t,s){e.selectedrooms=[],e.number=-1,e.querry=angular.fromJson(atob(t.querry)),e.selectroom=function(o,r){var t={};t.id=o,t.room=r,r.selected=!0,e.selectedrooms.push(t),e.number=o,console.log(e.selectedrooms)},e.removeroom=function(o){for(i in e.selectedrooms)e.selectedrooms[i].id==o&&e.selectedrooms.splice(i,1)},e.book=function(){var r={};r.selectedrooms=e.selectedrooms,r.querry=e.querry,r.companyid=e.selectedrooms[0].room.company_id,r.id="bookinginfo";var t=btoa(angular.toJson(r));s.save(r),o.path("/reserve/"+t)},e.submit=function(){r.query(e.query).success(function(e){}).error(function(e){alert("Errror "+e.message)})}}]}}]);
Booking.directive("footerNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/footer.html",controller:"FooterController"}}]);
Booking.directive("home",[function(){return{restrict:"E",templateUrl:"/templates/home.html"}}]);
Booking.directive("inventory",[function(){return{restrict:"E",templateUrl:"/templates/inventory.html"}}]);
Booking.directive("leftNav",[function(){return{restrict:"A",scope:{},transclude:!0,templateUrl:"/templates/directives/left_nav.html",controller:"LeftNavController"}}]);
Booking.directive("login",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/login.html",controller:"LoginController"}}]);
Booking.directive("policies",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/policies.html",controller:"PoliciesController"}}]);
Booking.directive("query",["$rootScope","dateFilter","$location",function(t,e,o){return{restrict:"E",templateUrl:"/templates/directives/query.html",controller:["$scope","InventoryService",function(e,r){e.max_adults=[1,2,3],e.max_childs=[0,1,2,3],e.query={adults:1,childs:0,check_in:(new moment).toDate(),check_out:(new moment).add(3,"days").toDate()},e.submit=function(){r.query(e.query,function(e){t.$broadcast("query:results")});var n=btoa(angular.toJson(e.query));o.path("/booking/"+n)}}]}}]);
Booking.directive("resNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/res-nav.html",controller:"ResController"}}]);
Booking.directive("topNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/header.html",controller:"HeaderController"}}]);
Booking.directive("users",[function(){return{restrict:"E",templateUrl:"/templates/users.html"}}]);
Booking.directive("user_profile",[function(){return{restrict:"E",templateUrl:"/templates/user_profile.html"}}]);
Booking.controller("confirmationController",["DataService","$location","$scope","ReservationService",function(o,r,n,i){n.formData=o.get(),n.guestinfo=_.findWhere(n.formData,{id:"guestinfo"}).customerProfile,n.cardinfo=_.findWhere(n.formData,{id:"paymentinfo"}).paymentDetails,n.bookinginfo=_.findWhere(n.formData,{id:"bookinginfo"}).selectedrooms,n.guestSummary=_.findWhere(n.formData,{id:"bookinginfo"}).querry,n.roomsSummary=_.findWhere(n.formData,{id:"roominfo"}).summary,n.company_id=_.findWhere(n.formData,{id:"bookinginfo"}).companyid,n.processForm=function(){var o={};o.guestinfo=n.guestinfo,o.cardinfo=n.cardinfo,o.bookinginfo=n.bookinginfo,o.guestSummary=n.guestSummary,o.roomSummary=n.roomsSummary,o.company_id=n.company_id,i.create(o).success(function(o){console.log(o),n.formData="",r.path("/thanknote/"+o.success)}).error(function(o){alert("Errror "+o)})}}]);
Booking.controller("CustomerController",["CustomerService",function(o){this.customer=null,this.data="Booking Customer";var t=this;CustomerService.data(function(o){t.customer=o,console.log(o)})}]);
Booking.controller("FooterController",["$scope",function(o){}]);
Booking.controller("guestController",["DataService","$state","$scope",function(o,t,e){e.formData={},e.payment=function(){var a={};a.id="guestinfo",a.customerProfile=e.formData,o.save(a),t.go("payment")}}]);
Booking.controller("HeaderController",["$scope",function(o){}]);
Booking.controller("HomeController",["CompanyService","ReservationService","$scope",function(o,n,e){this.company=null,this.data="Booking Home";var i=this;o.data(function(o){i.company=o,console.log(o)}),n.pendingReservations().success(function(o){console.log("pending Reservation "),console.log(o.result),e.pendingConfirmation=o.result}).error(function(o){console.log("Error in pending Reservation "),console.log(o),e.pendingConfirmation=[]})}]);
Booking.controller("InventoryController",["$rootScope","InventoryService",function(t,o){this.results=o.results,t.$on("query:results",function(){this.results=o.results}.bind(this))}]);
Booking.controller("LeftNavController",["$scope",function(o){}]);
Booking.controller("LoginController",["$rootScope","$scope","$window","LoginService",function(o,n,e,t){n.submit=function(){t.auth(n.user,function(n,t){200===t?(e.sessionStorage.token=n.token,o.loggedIn=n,e.location.href="/Admin.html"):delete e.sessionStorage.token})}}]);
Booking.controller("LogoutController",["$location","LoginService",function(o,n){n.logout(),o.path("/login")}]);
Booking.controller("paymentController",["DataService","$state","$scope",function(o,t,a){a.formData={},a.gotoConfirm=function(){var n={};n.id="paymentinfo",n.paymentDetails=a.formData,o.save(n),t.go("Confirmation")}}]);
Booking.controller("PoliciesController",["$rootScope","$scope","$location",function(o,i,c){i.policies=function(o){return policies.show=!0}}]);
Booking.controller("ResController",["$scope",function(o){}]);
Booking.controller("ReservationController",["ReservationService",function(o){this.reservation=null,this.data="Booking Rerservation";var e=this;RoleService.data(function(o){e.reservation=o,console.log(o)})}]);
Booking.controller("ReserveController",["$scope","$stateParams","$state","ReservationService","DataService","$anchorScroll","$location",function(o,r,a,e,t,m,s){s.hash("top"),m(),o.formData={},o.formData.roomDetails=angular.fromJson(atob(r.roomdetails)),o.summary={},o.summary.noRooms=o.formData.roomDetails.selectedrooms.length,o.summary.noGuest=o.formData.roomDetails.querry.adults,o.summary.startdate=o.formData.roomDetails.querry.check_in,o.summary.enddate=o.formData.roomDetails.querry.check_out,o.totalprice=function(){for(var r=0,a=0;a<o.summary.noRooms;a++)r+=o.formData.roomDetails.selectedrooms[a].room.base_price;return r},o.summary.tPrice=o.totalprice(),o.processForm=function(){e.create(o.formData).success(function(r){alert("data saved Reservation ID 9889"),o.formData=""}).error(function(o){alert("Errror "+o.message)})},o.proceed=function(){var r={};r.id="roominfo",r.roomdetails=o.formData,r.summary=o.summary,t.save(r),a.go("guestinfo")}}]);
Booking.controller("ReservePaymentController",["ReservationService",function(e){}]);
Booking.controller("bookingController",["ReservationService",function(o){}]);
Booking.controller("RoleController",["RoleService",function(o){this.role=null,this.data="Booking User Role";var l=this;o.data(function(o){l.role=o,console.log(o)})}]);
Booking.controller("thanknoteController",["$location","$scope","$stateParams",function(o,n,t){n.reservationid=t.reservationid}]);
Booking.controller("UsersController",["UsersService",function(s){this.users=null,this.data="Booking Users";var o=this;s.data(function(s){o.users=s,console.log(s)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIiwiY29tcGFueS5qcyIsImN1c3RvbWVyLmpzIiwiRGF0YVNlcnZpY2UuanMiLCJpbnZlbnRvcnkuanMiLCJsb2dpbi5qcyIsInBvbGljaWVzLmpzIiwicmVzZXJ2YXRpb24uanMiLCJyb2xlLmpzIiwidXNlcnMuanMiLCJhdmFpbGFiaWxpdHkuanMiLCJmb290ZXJfbmF2LmpzIiwiaG9tZS5qcyIsImxlZnRfbmF2LmpzIiwicXVlcnkuanMiLCJyZXpfbmF2LmpzIiwidG9wX25hdi5qcyIsInVzZXJfcHJvZmlsZS5qcyIsImNvbmZpcm1hdGlvbkNvbnRyb2xsZXIuanMiLCJmb290ZXIuanMiLCJndWVzdENvbnRyb2xsZXIuanMiLCJoZWFkZXIuanMiLCJsb2dvdXQuanMiLCJwYXltZW50Q29udHJvbGxlci5qcyIsInJlcy1oZWFkZXIuanMiLCJSZXNlcnZlQ29udHJvbGxlci5qcyIsIlJlc2VydmVQYXltZW50Q29udHJvbGxlci5qcyIsIlJlc2VydmVQcm9maWxlQ29udHJvbGxlci5qcyIsInRoYW5rbm90ZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiQm9va2luZyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5IiwiJHJvb3RTY29wZSIsIiRxIiwiJHdpbmRvdyIsInJlcXVlc3QiLCJjb25maWciLCJoZWFkZXJzIiwic2Vzc2lvblN0b3JhZ2UiLCJ0b2tlbiIsImxvY2F0aW9uIiwiaHJlZiIsInJlc3BvbnNlIiwic3RhdHVzIiwid2hlbiIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJydW4iLCIkbG9jYXRpb24iLCJsb2dnZWRJbiIsIiRodHRwIiwiZGF0YSIsImNhbGxiYWNrIiwiZ2V0Iiwic3VjY2VzcyIsInNlcnZpY2UiLCJ0aGlzIiwic2F2ZSIsImR0IiwiY29uc29sZSIsImxvZyIsImNvbXBhbnlfaWQiLCJyZXN1bHRzIiwicXVlcnkiLCJwb3N0IiwiYmluZCIsImF1dGgiLCJjcmVkZW50aWFscyIsImVycm9yIiwidXNlciIsIiRjb29raWVzIiwiSlNPTiIsInBhcnNlIiwibG9nb3V0IiwicmVtb3ZlIiwicmVzZXJ2YXRpb24iLCJxdWVycnkiLCJjcmVhdGUiLCJwZW5kaW5nUmVzZXJ2YXRpb25zIiwiZGlyZWN0aXZlIiwiZGF0ZUZpbHRlciIsInJlc3RyaWN0IiwiJHNjb3BlIiwiUmVzZXJ2YXRpb25TZXJ2aWNlIiwiJHN0YXRlUGFyYW1zIiwiRGF0YVNlcnZpY2UiLCJzZWxlY3RlZHJvb21zIiwibnVtYmVyIiwiZnJvbUpzb24iLCJhdG9iIiwic2VsZWN0cm9vbSIsImluZGV4Iiwicm9vbSIsInJtIiwiaWQiLCJzZWxlY3RlZCIsInJlbW92ZXJvb20iLCJpIiwic3BsaWNlIiwiYm9vayIsImsiLCJjb21wYW55aWQiLCJkZXQiLCJidG9hIiwidG9Kc29uIiwicGF0aCIsInN1Ym1pdCIsImFsZXJ0IiwibWVzc2FnZSIsInNjb3BlIiwidHJhbnNjbHVkZSIsIkludmVudG9yeVNlcnZpY2UiLCJtYXhfYWR1bHRzIiwibWF4X2NoaWxkcyIsImFkdWx0cyIsImNoaWxkcyIsImNoZWNrX2luIiwibW9tZW50IiwidG9EYXRlIiwiY2hlY2tfb3V0IiwiYWRkIiwiJGJyb2FkY2FzdCIsImZvcm1EYXRhIiwiZ3Vlc3RpbmZvIiwiXyIsImZpbmRXaGVyZSIsImN1c3RvbWVyUHJvZmlsZSIsImNhcmRpbmZvIiwicGF5bWVudERldGFpbHMiLCJib29raW5naW5mbyIsImd1ZXN0U3VtbWFyeSIsInJvb21zU3VtbWFyeSIsInN1bW1hcnkiLCJwcm9jZXNzRm9ybSIsInJvb21TdW1tYXJ5IiwicmVzcCIsIlVzZXJzU2VydmljZSIsImN1c3RvbWVyIiwiX3NlbGYiLCJDdXN0b21lclNlcnZpY2UiLCIkc3RhdGUiLCJwYXltZW50IiwiZ28iLCJDb21wYW55U2VydmljZSIsImNvbXBhbnkiLCJyZXN1bHQiLCJwZW5kaW5nQ29uZmlybWF0aW9uIiwiJG9uIiwiTG9naW5TZXJ2aWNlIiwiZ290b0NvbmZpcm0iLCJwb2xpY2llcyIsInNob3ciLCJSb2xlU2VydmljZSIsIiRhbmNob3JTY3JvbGwiLCJoYXNoIiwicm9vbURldGFpbHMiLCJyb29tZGV0YWlscyIsIm5vUm9vbXMiLCJsZW5ndGgiLCJub0d1ZXN0Iiwic3RhcnRkYXRlIiwiZW5kZGF0ZSIsInRvdGFscHJpY2UiLCJ0cHJpY2UiLCJiYXNlX3ByaWNlIiwidFByaWNlIiwicHJvY2VlZCIsInJvbGUiLCJyZXNlcnZhdGlvbmlkIiwidXNlcnMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFFBRUpBLFNBQVVDLFFBQVFDLE9BQU8sV0FBWSxVQUFVLDBDQUUvQ0YsUUFBUUcsUUFBUSxtQkFBbUIsYUFBYyxLQUFNLFVBQVcsU0FBVUMsRUFBWUMsRUFBSUMsR0FDdEYsT0FDQUMsUUFBUyxTQUFVQyxHQVVqQixNQVJBQSxHQUFPQyxRQUFVRCxFQUFPQyxZQUNwQkgsRUFBUUksZUFBZUMsTUFDM0JILEVBQU9DLFFBQVFFLE1BQVFMLEVBQVFJLGVBQWVDLE1BSWxDTCxFQUFRTSxTQUFTQyxLQUFPLGFBRTdCTCxHQUVUTSxTQUFVLFNBQVVBLEdBTWxCLE1BTHdCLE9BQXBCQSxFQUFTQyxTQUViVCxFQUFRTSxTQUFTQyxLQUFPLGNBR2pCQyxHQUFZVCxFQUFHVyxLQUFLRixRQU9uQ2QsUUFBUVEsUUFBUSxpQkFBa0Isb0JBQW9CLGdCQUFpQixTQUFTUyxFQUFnQkMsRUFBa0JDLEdBRzlHQSxFQUFjQyxhQUFhQyxLQUFLLG1CQUVsQ0osRUFDR0QsS0FBSyxLQUNKTSxZQUFjLDhCQUNkQyxXQUFjLG1CQUdmUCxLQUFLLGFBQ0pNLFlBQWMsaUNBQ2RDLFdBQWMsdUJBRWZQLEtBQUssY0FDSk0sWUFBYyxrQ0FDZEMsV0FBYyx3QkFFZlAsS0FBSyxVQUNKTSxZQUFjLDhCQUNkQyxXQUFjLG9CQUdmUCxLQUFLLGlCQUNKTSxZQUFjLHFD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T29GLFFBQVEsV0FDYixHQUFJbkgsS0FDRkEsR0FBSzJDLEdBQUcsV0FDUjNDLEVBQUt5RyxZQUFZMUUsRUFBT3dDLFNBQ3hCdkUsRUFBS2lGLFFBQVFsRCxFQUFPa0QsUUFDbkIvQyxFQUFZNUIsS0FBS04sR0FDZnlGLEVBQU9FLEdBQUc7QUN6RHJCekgsUUFBUXVCLFdBQVcsNEJBQTZCLHFCQUFzQixTQUFTdUM7QUNBL0U5RCxRQUFRdUIsV0FBVyxxQkFBc0IscUJBQXNCLFNBQVN1QztBbkJBeEU5RCxRQUFRdUIsV0FBVyxrQkFBbUIsY0FBZSxTQUFTNEcsR0FDNURoRyxLQUFLK0csS0FBTyxLQUNaL0csS0FBS0wsS0FBTyxtQkFDWixJQUFJdUYsR0FBUWxGLElBRVpnRyxHQUFZckcsS0FBSyxTQUFTQSxHQUN4QnVGLEVBQU02QixLQUFPcEgsRUFDYlEsUUFBUUMsSUFBSVQ7QW9CTGhCOUIsUUFBUXVCLFdBQVcsdUJBQXdCLFlBQVksU0FBUyxlQUFnQixTQUFTSSxFQUFVa0MsRUFBT0UsR0FDdEdGLEVBQU9zRixjQUFlcEYsRUFBYW9GO0FuQkh2Q25KLFFBQVF1QixXQUFXLG1CQUFvQixlQUFnQixTQUFTNEYsR0FDOURoRixLQUFLaUgsTUFBUSxLQUNiakgsS0FBS0wsS0FBTyxlQUNaLElBQUl1RixHQUFRbEYsSUFFWmdGLEdBQWFyRixLQUFLLFNBQVNBLEdBQ3pCdUYsRUFBTStCLE1BQVF0SCxFQUNkUSxRQUFRQyxJQUFJVCIsImZpbGUiOiJhZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBCb29raW5nO1xuXG5Cb29raW5nID0gYW5ndWxhci5tb2R1bGUoJ0Jvb2tpbmcnLCBbJ25nUm91dGUnLCdhbmd1bGFyVXRpbHMuZGlyZWN0aXZlcy5kaXJQYWdpbmF0aW9uJ10pO1xuXG5Cb29raW5nLmZhY3RvcnkoJ2F1dGhJbnRlcmNlcHRvcicsWyckcm9vdFNjb3BlJywgJyRxJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHEsICR3aW5kb3cpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIFxuICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuICAgICAgICBpZiAoJHdpbmRvdy5zZXNzaW9uU3RvcmFnZS50b2tlbikge1xuICAgICAgICBjb25maWcuaGVhZGVycy50b2tlbj0gICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgIGVsc2V7XG4gICAgICAgICAgIC8vIG5vIHRva2VuIGluIFN0b3JlXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiRXJyb3IuaHRtbFwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25maWc7XG4gICAgICB9LFxuICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiRXJyb3IuaHRtbFwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XG4gICAgICB9XG4gICAgICB9O1xuICAgIH1dKTtcblxuXG5cbkJvb2tpbmcuY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCAnJGxvY2F0aW9uUHJvdmlkZXInLCckaHR0cFByb3ZpZGVyJywgZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCRodHRwUHJvdmlkZXIpe1xuICBcblxuICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2F1dGhJbnRlcmNlcHRvcicpO1xuXG4gICRyb3V0ZVByb3ZpZGVyXG4gICAgLndoZW4oJy8nLCB7XG4gICAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2FkbWluL2luZGV4Lmh0bWwnLFxuICAgICAgY29udHJvbGxlciAgOiAnSG9tZUNvbnRyb2xsZXInXG4gICAgICAgIH0pICBcbiAgICBcbiAgICAud2hlbignL3BvbGljaWVzJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9wb2xpY2llcy5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ1BvbGljaWVzQ29udHJvbGxlcidcbiAgICB9KVxuICAgIC53aGVuKCcvaW52ZW50b3J5Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy9pbnZlbnRvcnkuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdJbnZlbnRvcnlDb250cm9sbGVyJ1xuICAgIH0pXG4gICAgLndoZW4oJy91c2VycycsIHtcbiAgICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdmlld3MvdXNlcnMuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2Vyc0NvbnRyb2xsZXInXG4gICAgfSlcbiAgIFxuICAgIC53aGVuKCcvdXNlci1wcm9maWxlJywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy92aWV3cy91c2VyX3Byb2ZpbGUuaHRtbCcsXG4gICAgICBjb250cm9sbGVyICA6ICdVc2VyUHJvZmlsZUNvbnRyb2xsZXInXG4gICAgfSlcbiAgIFxuICAgIC53aGVuKCcvbG9nb3V0Jywge1xuICAgICAgdGVtcGxhdGVVcmwgOiAndGVtcGxhdGVzL2FkbWluL2xvZ291dC5odG1sJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ0xvZ291dENvbnRyb2xsZXInXG4gICAgfSlcbiAgICAub3RoZXJ3aXNlKHsgcmVkaXJlY3RUbyA6ICcvJyB9KTtcblxuICAvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbiAgICBcblxufV0pO1xuXG5Cb29raW5nLnJ1bihbJyRyb290U2NvcGUnLCAnJGxvY2F0aW9uJywgIGZ1bmN0aW9uKCRyb290U2NvcGUsICRsb2NhdGlvbil7XG5cbiAkcm9vdFNjb3BlLmxvZ2dlZEluPXRydWU7XG4gXG4vKlxuICAkcm9vdFNjb3BlLiRvbihcIiRyb3V0ZUNoYW5nZVN0YXJ0XCIsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcbiAgICBpZiAoTG9naW5TZXJ2aWNlLnVzZXIoKSA9PT0gbnVsbCkge1xuICAgICAgJHJvb3RTY29wZS5sb2dnZWRJbiA9IG51bGw7XG4gICAgICBpZiAoIG5leHQudGVtcGxhdGVVcmwgPT09ICcvdGVtcGxhdGVzL2FkbWluL2xvZ2luLmh0bWwnKSB7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gICovXG5cbn1dKTtcblxuIiwiQm9va2luZy5mYWN0b3J5KCdDb21wYW55U2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCl7XG4gIHJldHVybiB7XG4gICAgZGF0YSA6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkaHR0cC5nZXQoJy9hcGkvY29tcGFueScpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdDdXN0b21lckNvbnRyb2xsZXInLCBbJ0N1c3RvbWVyU2VydmljZScsIGZ1bmN0aW9uKFVzZXJzU2VydmljZSl7XG4gIHRoaXMuY3VzdG9tZXIgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBDdXN0b21lcic7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgQ3VzdG9tZXJTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY3VzdG9tZXIgPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KTtcbn1dKTsiLCJCb29raW5nLnNlcnZpY2UoJ0RhdGFTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcblxuXHQgIHZhciBkYXRhPVtdXG5cblxuXHQgICB0aGlzLnNhdmU9ZnVuY3Rpb24oZHQpe1xuXHQgICAgIFx0ZGF0YS5wdXNoKGR0KTtcblx0ICAgICBcdGNvbnNvbGUubG9nKFwiZGF0YSBTYXZlZFwiKTtcblx0ICAgICBcdGNvbnNvbGUubG9nKGRhdGEpO1xuXG5cdCAgIH1cblx0ICAgdGhpcy5nZXQ9ZnVuY3Rpb24oKXtcblx0ICAgXHRyZXR1cm4gZGF0YTtcblx0ICAgfVxuXG4gICAgIFxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignSW52ZW50b3J5Q29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICdJbnZlbnRvcnlTZXJ2aWNlJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgSW52ZW50b3J5U2VydmljZSl7XG4gIHRoaXMucmVzdWx0cyA9IEludmVudG9yeVNlcnZpY2UucmVzdWx0cztcblxuICAkcm9vdFNjb3BlLiRvbigncXVlcnk6cmVzdWx0cycsIGZ1bmN0aW9uKCl7XG4gICAgdGhpcy5yZXN1bHRzID0gSW52ZW50b3J5U2VydmljZS5yZXN1bHRzO1xuICB9LmJpbmQodGhpcykpO1xuXG5cblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLCBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyR3aW5kb3cnLCAnTG9naW5TZXJ2aWNlJyxcbiAgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkd2luZG93LCBMb2dpblNlcnZpY2Upe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgTG9naW5TZXJ2aWNlLmF1dGgoJHNjb3BlLnVzZXIsIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuID0gZGF0YS50b2tlbjtcbiAgICAgICAgICAkcm9vdFNjb3BlLmxvZ2dlZEluID0gZGF0YTtcbiAgICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWY9Jy9BZG1pbi5odG1sJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSAkd2luZG93LnNlc3Npb25TdG9yYWdlLnRva2VuO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIH1dXG4pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ1BvbGljaWVzQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCAkbG9jYXRpb24pe1xuICAgICRzY29wZS5wb2xpY2llcyA9IGZ1bmN0aW9uKHNob3cpIHtcbiAgICAgIHJldHVybiBwb2xpY2llcy5zaG93ID0gdHJ1ZTsgIFxuICAgIH07XG4gIH1cbl0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc2VydmF0aW9uQ29udHJvbGxlcicsIFsnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oUmVzZXJ2YXRpb25TZXJ2aWNlKXtcbiAgdGhpcy5yZXNlcnZhdGlvbiA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIFJlcnNlcnZhdGlvbic7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgUm9sZVNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5yZXNlcnZhdGlvbiA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignUm9sZUNvbnRyb2xsZXInLCBbJ1JvbGVTZXJ2aWNlJywgZnVuY3Rpb24oUm9sZVNlcnZpY2Upe1xuICB0aGlzLnJvbGUgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBVc2VyIFJvbGUnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIFJvbGVTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYucm9sZSA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgWydVc2Vyc1NlcnZpY2UnLCBmdW5jdGlvbihVc2Vyc1NlcnZpY2Upe1xuICB0aGlzLnVzZXJzID0gbnVsbDtcbiAgdGhpcy5kYXRhID0gJ0Jvb2tpbmcgVXNlcnMnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIFVzZXJzU2VydmljZS5kYXRhKGZ1bmN0aW9uKGRhdGEpe1xuICAgIF9zZWxmLnVzZXJzID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5kaXJlY3RpdmUoJ2F2YWlsYWJpbGl0eScsIFsnJHJvb3RTY29wZScsICdkYXRlRmlsdGVyJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgZGF0ZUZpbHRlcil7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL2F2YWlsYWJpbGl0eS5odG1sJyxcbiAgICBjb250cm9sbGVyICA6IFsnJHNjb3BlJywnJGxvY2F0aW9uJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywnJHN0YXRlUGFyYW1zJywnRGF0YVNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsJGxvY2F0aW9uLFJlc2VydmF0aW9uU2VydmljZSwkc3RhdGVQYXJhbXMsRGF0YVNlcnZpY2Upe1xuICAgICAgXG4gICAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcz1bXTtcbiAgICAgICRzY29wZS5udW1iZXI9LTE7XG4gICRzY29wZS5xdWVycnk9IGFuZ3VsYXIuZnJvbUpzb24oYXRvYigkc3RhdGVQYXJhbXMucXVlcnJ5KSlcbiAgICAgXG5cbiRzY29wZS5zZWxlY3Ryb29tPWZ1bmN0aW9uKGluZGV4LHJvb20pe1xuICAgdmFyIHJtPXt9O1xuICAgIHJtLmlkPWluZGV4O1xuICAgIHJtLnJvb209cm9vbTtcbiAgICByb29tLnNlbGVjdGVkPXRydWU7XG4gICAgJHNjb3BlLnNlbGVjdGVkcm9vbXMucHVzaChybSk7XG4gICAgJHNjb3BlLm51bWJlcj1pbmRleDtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUuc2VsZWN0ZWRyb29tcylcbn07XG4kc2NvcGUucmVtb3Zlcm9vbT1mdW5jdGlvbihpbmRleCl7XG5cbiAgIGZvciAoaSBpbiAkc2NvcGUuc2VsZWN0ZWRyb29tcykge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5zZWxlY3RlZHJvb21zW2ldLmlkID09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkcm9vbXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG59O1xuXG4kc2NvcGUuYm9vaz1mdW5jdGlvbigpe1xuICB2YXIgaz17fTtcbiAgICAgay5zZWxlY3RlZHJvb21zPSRzY29wZS5zZWxlY3RlZHJvb21zO1xuICAgICBrLnF1ZXJyeT0kc2NvcGUucXVlcnJ5O1xuICAgICBrLmNvbXBhbnlpZD0kc2NvcGUuc2VsZWN0ZWRyb29tc1swXS5yb29tLmNvbXBhbnlfaWQ7XG4gICAgIGsuaWQ9J2Jvb2tpbmdpbmZvJztcbiAgIHZhciBkZXQ9YnRvYShhbmd1bGFyLnRvSnNvbihrKSk7XG4gICBEYXRhU2VydmljZS5zYXZlKGspO1xuICAkbG9jYXRpb24ucGF0aCgnL3Jlc2VydmUvJytkZXQpO1xuICBcbn07XG5cbiAgICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLnF1ZXJ5KCRzY29wZS5xdWVyeSlcbiAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIitlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pOyAgXG4gICAgICAgIFxuICAgICAgfTtcbiAgICB9XVxuICB9O1xufV0pOyIsIkJvb2tpbmcuZGlyZWN0aXZlKCdmb290ZXJOYXYnLCBbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICBzY29wZSAgICAgICA6IHt9LFxuICAgIHRyYW5zY2x1ZGUgIDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvZm9vdGVyLmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogJ0Zvb3RlckNvbnRyb2xsZXInXG4gIH07XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBbJ0NvbXBhbnlTZXJ2aWNlJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywnJHNjb3BlJywgZnVuY3Rpb24oQ29tcGFueVNlcnZpY2UsUmVzZXJ2YXRpb25TZXJ2aWNlLCRzY29wZSl7XG4gIHRoaXMuY29tcGFueSA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIEhvbWUnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIENvbXBhbnlTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY29tcGFueSA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xuXG4gUmVzZXJ2YXRpb25TZXJ2aWNlLnBlbmRpbmdSZXNlcnZhdGlvbnMoKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpeyBcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2coXCJwZW5kaW5nIFJlc2VydmF0aW9uIFwiKTtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2coZGF0YS5yZXN1bHQpO1xuXG4gICAgICAgICAgICBcdCRzY29wZS5wZW5kaW5nQ29uZmlybWF0aW9uPWRhdGEucmVzdWx0O1xuXHRcdFx0ICAgfSlcblx0XHQgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuXHRcdCAgIFx0Y29uc29sZS5sb2coXCJFcnJvciBpbiBwZW5kaW5nIFJlc2VydmF0aW9uIFwiKTtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICBcdCRzY29wZS5wZW5kaW5nQ29uZmlybWF0aW9uPVtdO1xuXG5cdFx0ICAgICB9KTtcblxuXG5cbn1dKTtcbiIsIkJvb2tpbmcuY29udHJvbGxlcignTGVmdE5hdkNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuZGlyZWN0aXZlKCdxdWVyeScsIFsnJHJvb3RTY29wZScsICdkYXRlRmlsdGVyJywnJGxvY2F0aW9uJyAsZnVuY3Rpb24oJHJvb3RTY29wZSwgZGF0ZUZpbHRlciwkbG9jYXRpb24pe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9xdWVyeS5odG1sJyxcbiAgICBjb250cm9sbGVyICA6IFsnJHNjb3BlJywgJ0ludmVudG9yeVNlcnZpY2UnLCBmdW5jdGlvbigkc2NvcGUsIEludmVudG9yeVNlcnZpY2Upe1xuICAgICAgJHNjb3BlLm1heF9hZHVsdHMgPSBbMSwyLDNdO1xuICAgICAgJHNjb3BlLm1heF9jaGlsZHMgPSBbMCwxLDIsM107XG4gICAgICAkc2NvcGUucXVlcnkgPSB7XG4gICAgICAgIGFkdWx0czogMSxcbiAgICAgICAgY2hpbGRzOiAwLFxuICAgICAgICBjaGVja19pbjogbmV3IG1vbWVudCgpLnRvRGF0ZSgpLFxuICAgICAgICBjaGVja19vdXQ6IG5ldyBtb21lbnQoKS5hZGQoMywgJ2RheXMnKS50b0RhdGUoKVxuICAgICAgfTtcblxuICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIEludmVudG9yeVNlcnZpY2UucXVlcnkoJHNjb3BlLnF1ZXJ5LCBmdW5jdGlvbihyZXN1bHRzKXtcbiAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3F1ZXJ5OnJlc3VsdHMnKTtcbiAgICAgICAgfSk7XG4gICAgICAgICAgICAgdmFyIGRldD1idG9hKGFuZ3VsYXIudG9Kc29uKCRzY29wZS5xdWVyeSkpO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYm9va2luZy8nK2RldCk7XG4gICAgICB9XG4gICAgfV1cbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3Jlc05hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9yZXMtbmF2Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogJ1Jlc0NvbnRyb2xsZXInXG4gIH07XG59XSk7XG5cbiIsIkJvb2tpbmcuZGlyZWN0aXZlKCd0b3BOYXYnLCBbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICBzY29wZSAgICAgICA6IHt9LFxuICAgIHRyYW5zY2x1ZGUgIDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvaGVhZGVyLmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogJ0hlYWRlckNvbnRyb2xsZXInXG4gIH07XG59XSk7XG5cbiIsIkJvb2tpbmcuZGlyZWN0aXZlKCd1c2VyX3Byb2ZpbGUnLCBbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL3VzZXJfcHJvZmlsZS5odG1sJ1xuICB9O1xufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdjb25maXJtYXRpb25Db250cm9sbGVyJywgWydEYXRhU2VydmljZScsJyRsb2NhdGlvbicsJyRzY29wZScsJ1Jlc2VydmF0aW9uU2VydmljZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCRsb2NhdGlvbiwkc2NvcGUsUmVzZXJ2YXRpb25TZXJ2aWNlKXtcbiAgICRzY29wZS5mb3JtRGF0YT1EYXRhU2VydmljZS5nZXQoKTsgICAgIFxuICAgJHNjb3BlLmd1ZXN0aW5mbz0gXy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJndWVzdGluZm9cIn0pLmN1c3RvbWVyUHJvZmlsZTtcbiAgICRzY29wZS5jYXJkaW5mbz1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcInBheW1lbnRpbmZvXCJ9KS5wYXltZW50RGV0YWlscztcbiAgICRzY29wZS5ib29raW5naW5mbz1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImJvb2tpbmdpbmZvXCJ9KS5zZWxlY3RlZHJvb21zO1xuICAgICRzY29wZS5ndWVzdFN1bW1hcnk9Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJib29raW5naW5mb1wifSkucXVlcnJ5O1xuICAgICRzY29wZS5yb29tc1N1bW1hcnk9Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJyb29taW5mb1wifSkuc3VtbWFyeTtcbiAgICRzY29wZS5jb21wYW55X2lkPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwiYm9va2luZ2luZm9cIn0pLmNvbXBhbnlpZDtcblxuICAgXG5cbiAgICRzY29wZS5wcm9jZXNzRm9ybT1mdW5jdGlvbigpe1xuICAgIHZhciBkYXRhID17fTtcbiAgICAgICAgZGF0YS5ndWVzdGluZm89JHNjb3BlLmd1ZXN0aW5mbztcbiAgICAgICAgZGF0YS5jYXJkaW5mbz0kc2NvcGUuY2FyZGluZm87XG4gICAgICAgIGRhdGEuYm9va2luZ2luZm89JHNjb3BlLmJvb2tpbmdpbmZvO1xuICAgICAgICAgZGF0YS5ndWVzdFN1bW1hcnk9JHNjb3BlLmd1ZXN0U3VtbWFyeTtcbiAgICAgICAgIGRhdGEucm9vbVN1bW1hcnk9JHNjb3BlLnJvb21zU3VtbWFyeTtcbiAgICAgICAgIGRhdGEuY29tcGFueV9pZD0kc2NvcGUuY29tcGFueV9pZDtcblxuXG4gICAgIFJlc2VydmF0aW9uU2VydmljZS5jcmVhdGUoZGF0YSlcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgLy8gIGFsZXJ0KHJlc3Auc3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xuICAgICAgICAgICAgICAgICRzY29wZS5mb3JtRGF0YT1cIlwiO1xuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdGhhbmtub3RlLycrcmVzcC5zdWNjZXNzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2NsZWFyIGRhdGEgc2VydmljZSBkYXRhXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJyb3IgXCIrcmVzcCk7XG4gICAgICAgICAgICB9KTsgIFxuXG4gICB9O1xuICAgXG5cbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ0Zvb3RlckNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignZ3Vlc3RDb250cm9sbGVyJywgWydEYXRhU2VydmljZScsJyRzdGF0ZScsJyRzY29wZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCRzdGF0ZSwkc2NvcGUpe1xuICAgJHNjb3BlLmZvcm1EYXRhPXt9O1xuXG5cbiAgICRzY29wZS5wYXltZW50PWZ1bmN0aW9uKCl7XG5cblx0ICAgXHQgdmFyIGRhdGE9e307XG5cdCAgIFx0IGRhdGEuaWQ9J2d1ZXN0aW5mbyc7XG5cdCAgIFx0IGRhdGEuY3VzdG9tZXJQcm9maWxlPSRzY29wZS5mb3JtRGF0YTtcblx0ICAgXHREYXRhU2VydmljZS5zYXZlKGRhdGEpO1xuXHQgICBcdCRzdGF0ZS5nbygncGF5bWVudCcpO1xuICAgfTtcblxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignSGVhZGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5jb250cm9sbGVyKCdMb2dvdXRDb250cm9sbGVyJywgWyckbG9jYXRpb24nLCAnTG9naW5TZXJ2aWNlJywgZnVuY3Rpb24oJGxvY2F0aW9uLCBMb2dpblNlcnZpY2Upe1xuICBMb2dpblNlcnZpY2UubG9nb3V0KCk7XG4gICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbn1dKTtcblxuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ3BheW1lbnRDb250cm9sbGVyJywgWydEYXRhU2VydmljZScsJyRzdGF0ZScsJyRzY29wZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCRzdGF0ZSwkc2NvcGUpe1xuICAgJHNjb3BlLmZvcm1EYXRhPXt9O1xuXG5cbiAgICRzY29wZS5nb3RvQ29uZmlybT1mdW5jdGlvbigpe1xuXHQgICBcdCB2YXIgZGF0YT17fTtcblx0ICAgXHQgZGF0YS5pZD0ncGF5bWVudGluZm8nO1xuXHQgICBcdCBkYXRhLnBheW1lbnREZXRhaWxzPSRzY29wZS5mb3JtRGF0YTtcblx0ICAgXHREYXRhU2VydmljZS5zYXZlKGRhdGEpO1xuXHQgICBcdCRzdGF0ZS5nbygnQ29uZmlybWF0aW9uJyk7XG4gICB9O1xuXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdSZXNDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xufV0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc2VydmVDb250cm9sbGVyJywgWyckc2NvcGUnLCckc3RhdGVQYXJhbXMnLCckc3RhdGUnLCdSZXNlcnZhdGlvblNlcnZpY2UnLCAnRGF0YVNlcnZpY2UnLCckYW5jaG9yU2Nyb2xsJywnJGxvY2F0aW9uJyxmdW5jdGlvbigkc2NvcGUsJHN0YXRlUGFyYW1zLCRzdGF0ZSxSZXNlcnZhdGlvblNlcnZpY2UsRGF0YVNlcnZpY2UsJGFuY2hvclNjcm9sbCwkbG9jYXRpb24pe1xuICAgJGxvY2F0aW9uLmhhc2goJ3RvcCcpO1xuXG4gICAgICAvLyBjYWxsICRhbmNob3JTY3JvbGwoKVxuICAgICAgJGFuY2hvclNjcm9sbCgpO1xuXG5cdFxuICAkc2NvcGUuZm9ybURhdGEgPSB7fTtcbiAkc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHM9YW5ndWxhci5mcm9tSnNvbihhdG9iKCRzdGF0ZVBhcmFtcy5yb29tZGV0YWlscykpO1xuICAvL2NvbnNvbGUubG9nKCRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscyk7XG5cbiAgJHNjb3BlLnN1bW1hcnk9e307XG4gICRzY29wZS5zdW1tYXJ5Lm5vUm9vbXM9JHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnNlbGVjdGVkcm9vbXMubGVuZ3RoO1xuICAkc2NvcGUuc3VtbWFyeS5ub0d1ZXN0PSAkc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMucXVlcnJ5LmFkdWx0czsgXG4gICRzY29wZS5zdW1tYXJ5LnN0YXJ0ZGF0ZT0kc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMucXVlcnJ5LmNoZWNrX2luO1xuICAkc2NvcGUuc3VtbWFyeS5lbmRkYXRlPSRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5xdWVycnkuY2hlY2tfb3V0O1xuXG4gICRzY29wZS50b3RhbHByaWNlPWZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB0cHJpY2U9MDtcbiAgICAgICAgXG5cbiAgICAgICBmb3IgKHZhciBpPTAgIDtpPCRzY29wZS5zdW1tYXJ5Lm5vUm9vbXM7aSsrKXtcblxuICAgICAgICAgICB0cHJpY2U9dHByaWNlKyRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5zZWxlY3RlZHJvb21zW2ldLnJvb20uYmFzZV9wcmljZTtcbiAgICAgICB9XG4gICAgICAgIHJldHVybiB0cHJpY2U7XG4gICAgICB9O1xuXG5cblxuJHNjb3BlLnN1bW1hcnkudFByaWNlPSAkc2NvcGUudG90YWxwcmljZSgpOyBcblxuICAgIFxuICAgIC8vIGZ1bmN0aW9uIHRvIHByb2Nlc3MgdGhlIGZvcm1cbiAgICAkc2NvcGUucHJvY2Vzc0Zvcm0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAvLyBhbGVydCgnYXdlc29tZSEnKTtcblxuICAgICAgICAgIFJlc2VydmF0aW9uU2VydmljZS5jcmVhdGUoJHNjb3BlLmZvcm1EYXRhKVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiZGF0YSBzYXZlZCBSZXNlcnZhdGlvbiBJRCA5ODg5XCIpO1xuICAgICAgICAgICAgICAgICRzY29wZS5mb3JtRGF0YT1cIlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIitlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pOyAgXG5cblxuICAgIH07XG5cblxuICAgICRzY29wZS5wcm9jZWVkPWZ1bmN0aW9uKCl7XG4gICAgICB2YXIgZGF0YT17fTtcbiAgICAgICAgZGF0YS5pZD0ncm9vbWluZm8nO1xuICAgICAgICBkYXRhLnJvb21kZXRhaWxzPSRzY29wZS5mb3JtRGF0YTtcbiAgICAgICAgZGF0YS5zdW1tYXJ5PSRzY29wZS5zdW1tYXJ5O1xuICAgICAgICAgRGF0YVNlcnZpY2Uuc2F2ZShkYXRhKTtcbiAgICAgICAgICAgJHN0YXRlLmdvKCdndWVzdGluZm8nKTtcbiAgICB9O1xuXG4gICAgXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdSZXNlcnZlUGF5bWVudENvbnRyb2xsZXInLCBbJ1Jlc2VydmF0aW9uU2VydmljZScsIGZ1bmN0aW9uKFJlc2VydmF0aW9uU2VydmljZSl7XG5cbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ2Jvb2tpbmdDb250cm9sbGVyJywgWydSZXNlcnZhdGlvblNlcnZpY2UnLCBmdW5jdGlvbihSZXNlcnZhdGlvblNlcnZpY2Upe1xuXG59XSk7IiwiXG5cbkJvb2tpbmcuY29udHJvbGxlcigndGhhbmtub3RlQ29udHJvbGxlcicsIFsnJGxvY2F0aW9uJywnJHNjb3BlJywnJHN0YXRlUGFyYW1zJyAsZnVuY3Rpb24oJGxvY2F0aW9uLCRzY29wZSwkc3RhdGVQYXJhbXMpe1xuICAgICRzY29wZS5yZXNlcnZhdGlvbmlkPSAkc3RhdGVQYXJhbXMucmVzZXJ2YXRpb25pZDtcblxuXHR9XSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9