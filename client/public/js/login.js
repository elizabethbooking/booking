var Booking;Booking=angular.module("Booking",["ngRoute"]);
Booking.factory("LoginService",["$http","$rootScope","$window",function(o,e,n){return{auth:function(r,s){o.post("/api/login",r).success(function(o,r){n.sessionStorage.token=o.token,n.sessionStorage.role=o.role,n.sessionStorage.user=o.username,e.loggedIn=!0,s(o,r)}).error(function(){console.log("error")})},user:function(){var o="";return o=n.sessionStorage.role,console.log("user role "+o),o},logout:function(){e.loggedIn=null,delete n.sessionStorage.token,delete n.sessionStorage.role,delete n.sessionStorage.user,n.location.href="login.html"}}}]);
Booking.directive("login",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/login.html",controller:"LoginController"}}]);
Booking.controller("LoginController",["$rootScope","$scope","$window","LoginService",function(o,n,e,t){n.submit=function(){t.auth(n.user,function(n,t){200===t?(e.sessionStorage.token=n.token,o.loggedIn=n,e.location.href="/Admin.html"):delete e.sessionStorage.token})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbIkJvb2tpbmciLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiRodHRwIiwiJHJvb3RTY29wZSIsIiR3aW5kb3ciLCJhdXRoIiwiY3JlZGVudGlhbHMiLCJjYWxsYmFjayIsInBvc3QiLCJzdWNjZXNzIiwiZGF0YSIsInN0YXR1cyIsInNlc3Npb25TdG9yYWdlIiwidG9rZW4iLCJyb2xlIiwidXNlciIsInVzZXJuYW1lIiwibG9nZ2VkSW4iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJsb2dvdXQiLCJsb2NhdGlvbiIsImhyZWYiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwidHJhbnNjbHVkZSIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIiRzY29wZSIsIkxvZ2luU2VydmljZSIsInN1Ym1pdCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsUUFFSkEsU0FBVUMsUUFBUUMsT0FBTyxXQUFZO0FBRnJDRixRQUFRRyxRQUFRLGdCQUFpQixRQUFVLGFBQWEsVUFBVyxTQUFTQyxFQUFPQyxFQUFXQyxHQUM1RixPQUNFQyxLQUFNLFNBQVNDLEVBQWFDLEdBQzFCTCxFQUFNTSxLQUFLLGFBQWNGLEdBQ3RCRyxRQUFRLFNBQVNDLEVBQU1DLEdBQ3RCUCxFQUFRUSxlQUFlQyxNQUFRSCxFQUFLRyxNQUNwQ1QsRUFBUVEsZUFBZUUsS0FBT0osRUFBS0ksS0FDbkNWLEVBQVFRLGVBQWVHLEtBQUtMLEVBQUtNLFNBRS9CYixFQUFXYyxVQUFTLEVBQ3RCVixFQUFTRyxFQUFNQyxLQUVoQk8sTUFBTSxXQUNMQyxRQUFRQyxJQUFJLFlBSWxCTCxLQUFNLFdBQ0osR0FBSUEsR0FBTyxFQUlYLE9BRk9BLEdBQU1YLEVBQVFRLGVBQWVFLEtBQzVCSyxRQUFRQyxJQUFJLGFBQWVMLEdBQzVCQSxHQUdUTSxPQUFRLFdBQ05sQixFQUFXYyxTQUFXLFdBQ2ZiLEdBQVFRLGVBQWVDLFlBQ3ZCVCxHQUFRUSxlQUFlRSxXQUN2QlYsR0FBUVEsZUFBZUcsS0FDOUJYLEVBQVFrQixTQUFTQyxLQUFLO0FBOUI1QnpCLFFBQVEwQixVQUFVLFNBQVUsV0FDMUIsT0FDRUMsU0FBYyxJQUNkQyxTQUNBQyxZQUFjLEVBQ2RDLFlBQWMsbUNBQ2RDLFdBQWM7QUFObEIvQixRQUFRK0IsV0FBVyxtQkFBb0IsYUFBYyxTQUFVLFVBQVcsZUFDeEUsU0FBUzFCLEVBQVkyQixFQUFRMUIsRUFBUzJCLEdBQ3BDRCxFQUFPRSxPQUFTLFdBQ2RELEVBQWExQixLQUFLeUIsRUFBT2YsS0FBTSxTQUFTTCxFQUFNQyxHQUM3QixNQUFYQSxHQUNEUCxFQUFRUSxlQUFlQyxNQUFRSCxFQUFLRyxNQUNyQ1YsRUFBV2MsU0FBV1AsRUFDdEJOLEVBQVFrQixTQUFTQyxLQUFLLHFCQUdibkIsR0FBUVEsZUFBZUMiLCJmaWxlIjoibG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJHdpbmRvdycsICdMb2dpblNlcnZpY2UnLFxuICBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICR3aW5kb3csIExvZ2luU2VydmljZSl7XG4gICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICBMb2dpblNlcnZpY2UuYXV0aCgkc2NvcGUudXNlciwgZnVuY3Rpb24oZGF0YSwgc3RhdHVzKXtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW4gPSBkYXRhLnRva2VuO1xuICAgICAgICAgICRyb290U2NvcGUubG9nZ2VkSW4gPSBkYXRhO1xuICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZj0nL0FkbWluLmh0bWwnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlICR3aW5kb3cuc2Vzc2lvblN0b3JhZ2UudG9rZW47XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgfV1cbik7XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==