var Booking;Booking=angular.module("Booking",["ngCookies","ui.router","angularUtils.directives.dirPagination"]),Booking.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"/templates/views/index.html",controller:"HomeController"}).state("booking",{url:"/booking/:querry",templateUrl:"/templates/booking.html"}).state("reserve",{url:"/reserve/:roomdetails",templateUrl:"/templates/views/reserve.html",controller:"ReserveController"}).state("payment",{url:"/payment",templateUrl:"/templates/views/payment.html",controller:"paymentController"}).state("Confirmation",{url:"/Confirmation",templateUrl:"/templates/views/paymentConfirmation.html",controller:"confirmationController"}).state("thanknote",{url:"/thanknote/:reservationid",templateUrl:"/templates/views/thanknote.html",controller:"thanknoteController"}).state("guestinfo",{url:"/guestinfo",templateUrl:"/templates/views/profile.html",controller:"guestController"})}]);
Booking.factory("CompanyService",["$http",function(n){return{data:function(t){n.get("/api/company").success(function(n,c){t(n)})}}}]);
Booking.factory("CustomerService",["$http",function(t){return{data:function(c){t.get("/api/customer").success(function(t,n){c(t)})}}}]);
Booking.service("DataService",["$http",function(o){var t=[];this.save=function(o){t.push(o),console.log("data Saved"),console.log(t)},this.get=function(){return t}}]);
Booking.factory("InventoryService",["$http",function(t){var n=10001;return{results:[],data:function(n){t.get("/api/inventory").success(function(t,i){n(t)})},query:function(i,s){t.post("/api/availability/"+n,i).success(function(t,n){this.results=t,s(t)}.bind(this))}}}]);
Booking.factory("LoginService",["$http","$cookies","$rootScope",function(o,n,e){return{auth:function(e,r){o.post("/api/login",e).success(function(o,e){n.put("user",JSON.stringify(o)),r(o,e)}).error(function(){console.log("error")})},user:function(){var o=null;return n.get("user")&&(e.loggedIn=o=JSON.parse(n.get("user"))),o},logout:function(){e.loggedIn=null,n.remove("user")}}}]);
Booking.factory("PoliciesService",["$http",function(i){return{data:function(c){i.get("/api/policies").success(function(i,t){c(i)})}}}]);
Booking.factory("ReservationService",["$http",function(r){var t={};return t.data=function(){return r.get("/api/reservation")},t.query=function(t){return r.get("/api/reservation")},t.create=function(t){return r.post("/api/reservation",t)},t}]);
Booking.factory("RoleService",["$http",function(t){return{data:function(n){t.get("/api/role").success(function(t,o){n(t)})}}}]);
Booking.factory("UsersService",["$http",function(t){return{data:function(n){t.get("/api/users").success(function(t,c){n(t)})}}}]);
Booking.directive("availability",["$rootScope","dateFilter",function(e,o){return{restrict:"E",templateUrl:"/templates/directives/availability.html",controller:["$scope","$location","ReservationService","$stateParams","DataService",function(e,o,r,t,s){e.selectedrooms=[],e.number=-1,e.querry=angular.fromJson(atob(t.querry)),e.selectroom=function(o,r){var t={};t.id=o,t.room=r,r.selected=!0,e.selectedrooms.push(t),e.number=o,console.log(e.selectedrooms)},e.removeroom=function(o){for(i in e.selectedrooms)e.selectedrooms[i].id==o&&e.selectedrooms.splice(i,1)},e.book=function(){var r={};r.selectedrooms=e.selectedrooms,r.querry=e.querry,r.companyid=e.selectedrooms[0].room.company_id,r.id="bookinginfo";var t=btoa(angular.toJson(r));s.save(r),o.path("/reserve/"+t)},e.submit=function(){r.query(e.query).success(function(e){}).error(function(e){alert("Errror "+e.message)})}}]}}]);
Booking.directive("footerNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/footer.html",controller:"FooterController"}}]);
Booking.directive("home",[function(){return{restrict:"E",templateUrl:"/templates/home.html"}}]);
Booking.directive("inventory",[function(){return{restrict:"E",templateUrl:"/templates/inventory.html"}}]);
Booking.directive("leftNav",[function(){return{restrict:"A",scope:{},transclude:!0,templateUrl:"/templates/directives/left_nav.html",controller:"LeftNavController"}}]);
Booking.directive("login",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/login.html",controller:"LoginController"}}]);
Booking.directive("policies",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/policies.html",controller:"PoliciesController"}}]);
Booking.directive("query",["$rootScope","dateFilter","$location",function(t,e,o){return{restrict:"E",templateUrl:"/templates/directives/query.html",controller:["$scope","InventoryService",function(e,r){e.max_adults=[1,2,3],e.max_childs=[0,1,2,3],e.query={adults:1,childs:0,check_in:(new moment).toDate(),check_out:(new moment).add(3,"days").toDate()},e.submit=function(){r.query(e.query,function(e){t.$broadcast("query:results")});var n=btoa(angular.toJson(e.query));o.path("/booking/"+n)}}]}}]);
Booking.directive("resNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/res-nav.html",controller:"ResController"}}]);
Booking.directive("topNav",[function(){return{restrict:"E",scope:{},transclude:!0,templateUrl:"/templates/directives/header.html",controller:"HeaderController"}}]);
Booking.directive("users",[function(){return{restrict:"E",templateUrl:"/templates/users.html"}}]);
Booking.directive("user_profile",[function(){return{restrict:"E",templateUrl:"/templates/user_profile.html"}}]);
Booking.controller("confirmationController",["DataService","$location","$scope","ReservationService",function(o,r,n,i){n.formData=o.get(),n.guestinfo=_.findWhere(n.formData,{id:"guestinfo"}).customerProfile,n.cardinfo=_.findWhere(n.formData,{id:"paymentinfo"}).paymentDetails,n.bookinginfo=_.findWhere(n.formData,{id:"bookinginfo"}).selectedrooms,n.guestSummary=_.findWhere(n.formData,{id:"bookinginfo"}).querry,n.roomsSummary=_.findWhere(n.formData,{id:"roominfo"}).summary,n.company_id=_.findWhere(n.formData,{id:"bookinginfo"}).companyid,n.processForm=function(){var o={};o.guestinfo=n.guestinfo,o.cardinfo=n.cardinfo,o.bookinginfo=n.bookinginfo,o.guestSummary=n.guestSummary,o.roomSummary=n.roomsSummary,o.company_id=n.company_id,i.create(o).success(function(o){console.log(o),n.formData="",r.path("/thanknote/"+o.success)}).error(function(o){alert("Errror "+o)})}}]);
Booking.controller("CustomerController",["CustomerService",function(o){this.customer=null,this.data="Booking Customer";var t=this;CustomerService.data(function(o){t.customer=o,console.log(o)})}]);
Booking.controller("FooterController",["$scope",function(o){}]);
Booking.controller("guestController",["DataService","$state","$scope",function(o,t,e){e.formData={},e.payment=function(){var a={};a.id="guestinfo",a.customerProfile=e.formData,o.save(a),t.go("payment")}}]);
Booking.controller("HeaderController",["$scope",function(o){}]);
Booking.controller("HomeController",["CompanyService",function(o){this.company=null,this.data="Booking Home";var n=this;o.data(function(o){n.company=o,console.log(o)})}]);
Booking.controller("InventoryController",["$rootScope","InventoryService",function(t,o){this.results=o.results,t.$on("query:results",function(){this.results=o.results}.bind(this))}]);
Booking.controller("LeftNavController",["$scope",function(o){}]);
Booking.controller("LoginController",["$rootScope","$scope","$location","LoginService",function(o,n,t,i){n.submit=function(){i.auth(n.user,function(n,i){200===i&&(o.loggedIn=n,t.path("/"))})}}]);
Booking.controller("LogoutController",["$location","LoginService",function(o,n){n.logout(),o.path("/login")}]);
Booking.controller("paymentController",["DataService","$state","$scope",function(o,t,a){a.formData={},a.gotoConfirm=function(){var n={};n.id="paymentinfo",n.paymentDetails=a.formData,o.save(n),t.go("Confirmation")}}]);
Booking.controller("PoliciesController",["$rootScope","$scope","$location",function(o,i,c){i.policies=function(o){return policies.show=!0}}]);
Booking.controller("ResController",["$scope",function(o){}]);
Booking.controller("ReservationController",["ReservationService",function(o){this.reservation=null,this.data="Booking Rerservation";var e=this;RoleService.data(function(o){e.reservation=o,console.log(o)})}]);
Booking.controller("ReserveController",["$scope","$stateParams","$state","ReservationService","DataService","$anchorScroll","$location",function(o,r,a,e,t,m,s){s.hash("top"),m(),o.formData={},o.formData.roomDetails=angular.fromJson(atob(r.roomdetails)),o.summary={},o.summary.noRooms=o.formData.roomDetails.selectedrooms.length,o.summary.noGuest=o.formData.roomDetails.querry.adults,o.summary.startdate=o.formData.roomDetails.querry.check_in,o.summary.enddate=o.formData.roomDetails.querry.check_out,o.totalprice=function(){for(var r=0,a=0;a<o.summary.noRooms;a++)r+=o.formData.roomDetails.selectedrooms[a].room.base_price;return r},o.summary.tPrice=o.totalprice(),o.processForm=function(){e.create(o.formData).success(function(r){alert("data saved Reservation ID 9889"),o.formData=""}).error(function(o){alert("Errror "+o.message)})},o.proceed=function(){var r={};r.id="roominfo",r.roomdetails=o.formData,r.summary=o.summary,t.save(r),a.go("guestinfo")}}]);
Booking.controller("ReservePaymentController",["ReservationService",function(e){}]);
Booking.controller("bookingController",["ReservationService",function(o){}]);
Booking.controller("RoleController",["RoleService",function(o){this.role=null,this.data="Booking User Role";var l=this;o.data(function(o){l.role=o,console.log(o)})}]);
Booking.controller("thanknoteController",["$location","$scope","$stateParams",function(o,n,t){n.reservationid=t.reservationid}]);
Booking.controller("UsersController",["UsersService",function(s){this.users=null,this.data="Booking Users";var o=this;s.data(function(s){o.users=s,console.log(s)})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbXBhbnkuanMiLCJjdXN0b21lci5qcyIsIkRhdGFTZXJ2aWNlLmpzIiwiaW52ZW50b3J5LmpzIiwibG9naW4uanMiLCJwb2xpY2llcy5qcyIsInJlc2VydmF0aW9uLmpzIiwicm9sZS5qcyIsInVzZXJzLmpzIiwiYXZhaWxhYmlsaXR5LmpzIiwiZm9vdGVyX25hdi5qcyIsImhvbWUuanMiLCJsZWZ0X25hdi5qcyIsInF1ZXJ5LmpzIiwicmV6X25hdi5qcyIsInRvcF9uYXYuanMiLCJ1c2VyX3Byb2ZpbGUuanMiLCJjb25maXJtYXRpb25Db250cm9sbGVyLmpzIiwiZm9vdGVyLmpzIiwiZ3Vlc3RDb250cm9sbGVyLmpzIiwiaGVhZGVyLmpzIiwibG9nb3V0LmpzIiwicGF5bWVudENvbnRyb2xsZXIuanMiLCJyZXMtaGVhZGVyLmpzIiwiUmVzZXJ2ZUNvbnRyb2xsZXIuanMiLCJSZXNlcnZlUGF5bWVudENvbnRyb2xsZXIuanMiLCJSZXNlcnZlUHJvZmlsZUNvbnRyb2xsZXIuanMiLCJ0aGFua25vdGVDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbIkJvb2tpbmciLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImZhY3RvcnkiLCIkaHR0cCIsImRhdGEiLCJjYWxsYmFjayIsImdldCIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJzZXJ2aWNlIiwidGhpcyIsInNhdmUiLCJkdCIsInB1c2giLCJjb25zb2xlIiwibG9nIiwiY29tcGFueV9pZCIsInJlc3VsdHMiLCJxdWVyeSIsInBvc3QiLCJiaW5kIiwiJGNvb2tpZXMiLCIkcm9vdFNjb3BlIiwiYXV0aCIsImNyZWRlbnRpYWxzIiwicHV0IiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwidXNlciIsImxvZ2dlZEluIiwicGFyc2UiLCJsb2dvdXQiLCJyZW1vdmUiLCJyZXNlcnZhdGlvbiIsInF1ZXJyeSIsImNyZWF0ZSIsImRpcmVjdGl2ZSIsImRhdGVGaWx0ZXIiLCJyZXN0cmljdCIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIlJlc2VydmF0aW9uU2VydmljZSIsIiRzdGF0ZVBhcmFtcyIsIkRhdGFTZXJ2aWNlIiwic2VsZWN0ZWRyb29tcyIsIm51bWJlciIsImZyb21Kc29uIiwiYXRvYiIsInNlbGVjdHJvb20iLCJpbmRleCIsInJvb20iLCJybSIsImlkIiwic2VsZWN0ZWQiLCJyZW1vdmVyb29tIiwiaSIsInNwbGljZSIsImJvb2siLCJrIiwiY29tcGFueWlkIiwiZGV0IiwiYnRvYSIsInRvSnNvbiIsInBhdGgiLCJzdWJtaXQiLCJhbGVydCIsIm1lc3NhZ2UiLCJzY29wZSIsInRyYW5zY2x1ZGUiLCJJbnZlbnRvcnlTZXJ2aWNlIiwibWF4X2FkdWx0cyIsIm1heF9jaGlsZHMiLCJhZHVsdHMiLCJjaGlsZHMiLCJjaGVja19pbiIsIm1vbWVudCIsInRvRGF0ZSIsImNoZWNrX291dCIsImFkZCIsIiRicm9hZGNhc3QiLCJmb3JtRGF0YSIsImd1ZXN0aW5mbyIsIl8iLCJmaW5kV2hlcmUiLCJjdXN0b21lclByb2ZpbGUiLCJjYXJkaW5mbyIsInBheW1lbnREZXRhaWxzIiwiYm9va2luZ2luZm8iLCJndWVzdFN1bW1hcnkiLCJyb29tc1N1bW1hcnkiLCJzdW1tYXJ5IiwicHJvY2Vzc0Zvcm0iLCJyb29tU3VtbWFyeSIsInJlc3AiLCJVc2Vyc1NlcnZpY2UiLCJjdXN0b21lciIsIl9zZWxmIiwiQ3VzdG9tZXJTZXJ2aWNlIiwiJHN0YXRlIiwicGF5bWVudCIsImdvIiwiQ29tcGFueVNlcnZpY2UiLCJjb21wYW55IiwiJG9uIiwiTG9naW5TZXJ2aWNlIiwiZ290b0NvbmZpcm0iLCJwb2xpY2llcyIsInNob3ciLCJSb2xlU2VydmljZSIsIiRhbmNob3JTY3JvbGwiLCJoYXNoIiwicm9vbURldGFpbHMiLCJyb29tZGV0YWlscyIsIm5vUm9vbXMiLCJsZW5ndGgiLCJub0d1ZXN0Iiwic3RhcnRkYXRlIiwiZW5kZGF0ZSIsInRvdGFscHJpY2UiLCJ0cHJpY2UiLCJiYXNlX3ByaWNlIiwidFByaWNlIiwicHJvY2VlZCIsInJvbGUiLCJyZXNlcnZhdGlvbmlkIiwidXNlcnMiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLFFBRUpBLFNBQVVDLFFBQVFDLE9BQU8sV0FBWSxZQUFZLFlBQVksMENBRTdERixRQUFRRyxRQUFRLGlCQUFrQixxQkFBc0IsU0FBU0MsRUFBZ0JDLEdBRWpGQSxFQUFtQkMsVUFBVSxTQUV6QkYsRUFDSUcsTUFBTSxRQUNIQyxJQUFLLFFBQ0pDLFlBQWEsOEJBQ2JDLFdBQVksbUJBRWhCSCxNQUFNLFdBQ0hDLElBQUssbUJBQ0pDLFlBQWEsNEJBR2hCRixNQUFNLFdBQ0pDLElBQUssd0JBQ0pDLFlBQWEsZ0NBQ2JDLFdBQVksc0JBRWZILE1BQU0sV0FDSEMsSUFBSyxXQUNMQyxZQUFhLGdDQUNiQyxXQUFZLHNCQUVmSCxNQUFNLGdCQUNIQyxJQUFLLGdCQUNMQyxZQUFhLDRDQUNiQyxXQUFZLDJCQUdmSCxNQUFNLGFBQ0hDLElBQUssNEJBQ0xDLFlBQWEsa0NBQ2JDLFdBQVksd0JBR2ZILE1BQU0sYUFDSEMsSUFBSyxhQUNMQyxZQUFhLGdDQUNiQyxXQUFZO0FDNUN4QlYsUUFBUVcsUUFBUSxrQkFBbUIsUUFBUyxTQUFTQyxHQUNuRCxPQUNFQyxLQUFPLFNBQVNDLEdBQ2RGLEVBQU1HLElBQUksZ0JBQ1BDLFFBQVEsU0FBU0gsRUFBTUksR0FDdEJILEVBQVNEO0FDTG5CYixRQUFRVyxRQUFRLG1CQUFvQixRQUFTLFNBQVNDLEdBQ3BELE9BQ0VDLEtBQU8sU0FBU0MsR0FDZEYsRUFBTUcsSUFBSSxpQkFDUEMsUUFBUSxTQUFTSCxFQUFNSSxHQUN0QkgsRUFBU0Q7QUNMbkJiLFFBQVFrQixRQUFRLGVBQWdCLFFBQVMsU0FBU04sR0FFL0MsR0FBSUMsS0FHSE0sTUFBS0MsS0FBSyxTQUFTQyxHQUNoQlIsRUFBS1MsS0FBS0QsR0FD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R2ZsRCxFQUFtQk4sT0FBT0ksRUFBT3lDLFVBQzVCMUUsUUFBUSxTQUFVSCxHQUNqQjhELE1BQU0sa0NBQ04xQixFQUFPeUMsU0FBUyxLQUduQnJELE1BQU0sU0FBVUEsR0FDYnNDLE1BQU0sVUFBVXRDLEVBQU11QyxZQU9sQzNCLEVBQU9tRixRQUFRLFdBQ2IsR0FBSXZILEtBQ0ZBLEdBQUtpRCxHQUFHLFdBQ1JqRCxFQUFLNkcsWUFBWXpFLEVBQU95QyxTQUN4QjdFLEVBQUt1RixRQUFRbkQsRUFBT21ELFFBQ25CL0MsRUFBWWpDLEtBQUtQLEdBQ2YrRixFQUFPRSxHQUFHO0FDekRyQjlHLFFBQVFVLFdBQVcsNEJBQTZCLHFCQUFzQixTQUFTeUM7QUNBL0VuRCxRQUFRVSxXQUFXLHFCQUFzQixxQkFBc0IsU0FBU3lDO0FuQkF4RW5ELFFBQVFVLFdBQVcsa0JBQW1CLGNBQWUsU0FBUzRHLEdBQzVEbkcsS0FBS2tILEtBQU8sS0FDWmxILEtBQUtOLEtBQU8sbUJBQ1osSUFBSTZGLEdBQVF2RixJQUVabUcsR0FBWXpHLEtBQUssU0FBU0EsR0FDeEI2RixFQUFNMkIsS0FBT3hILEVBQ2JVLFFBQVFDLElBQUlYO0FvQkxoQmIsUUFBUVUsV0FBVyx1QkFBd0IsWUFBWSxTQUFTLGVBQWdCLFNBQVN3QyxFQUFVRCxFQUFPRyxHQUN0R0gsRUFBT3FGLGNBQWVsRixFQUFha0Y7QW5CSHZDdEksUUFBUVUsV0FBVyxtQkFBb0IsZUFBZ0IsU0FBUzhGLEdBQzlEckYsS0FBS29ILE1BQVEsS0FDYnBILEtBQUtOLEtBQU8sZUFDWixJQUFJNkYsR0FBUXZGLElBRVpxRixHQUFhM0YsS0FBSyxTQUFTQSxHQUN6QjZGLEVBQU02QixNQUFRMUgsRUFDZFUsUUFBUUMsSUFBSVgiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIEJvb2tpbmc7XG5cbkJvb2tpbmcgPSBhbmd1bGFyLm1vZHVsZSgnQm9va2luZycsIFsnbmdDb29raWVzJywndWkucm91dGVyJywnYW5ndWxhclV0aWxzLmRpcmVjdGl2ZXMuZGlyUGFnaW5hdGlvbiddKTtcblxuQm9va2luZy5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKXtcbiBcbiR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9ob21lJyk7XG4gXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgICAgIHVybDogJy9ob21lJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy92aWV3cy9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAuc3RhdGUoJ2Jvb2tpbmcnLCB7XG4gICAgICAgICAgIHVybDogJy9ib29raW5nLzpxdWVycnknLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL2Jvb2tpbmcuaHRtbCdcbiAgICAgICAgfSlcbiAgICAgICBcbiAgICAgICAgLnN0YXRlKCdyZXNlcnZlJywge1xuICAgICAgICAgICB1cmw6ICcvcmVzZXJ2ZS86cm9vbWRldGFpbHMnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3ZpZXdzL3Jlc2VydmUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUmVzZXJ2ZUNvbnRyb2xsZXInXG4gICAgICAgIH0pIFxuICAgICAgICAuc3RhdGUoJ3BheW1lbnQnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcGF5bWVudCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy90ZW1wbGF0ZXMvdmlld3MvcGF5bWVudC5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwYXltZW50Q29udHJvbGxlcidcbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCdDb25maXJtYXRpb24nLCB7XG4gICAgICAgICAgICB1cmw6ICcvQ29uZmlybWF0aW9uJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy92aWV3cy9wYXltZW50Q29uZmlybWF0aW9uLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvbmZpcm1hdGlvbkNvbnRyb2xsZXInXG5cbiAgICAgICAgfSlcbiAgICAgICAgLnN0YXRlKCd0aGFua25vdGUnLCB7XG4gICAgICAgICAgICB1cmw6ICcvdGhhbmtub3RlLzpyZXNlcnZhdGlvbmlkJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3RlbXBsYXRlcy92aWV3cy90aGFua25vdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAndGhhbmtub3RlQ29udHJvbGxlcidcblxuICAgICAgICB9KVxuICAgICAgICAuc3RhdGUoJ2d1ZXN0aW5mbycsIHtcbiAgICAgICAgICAgIHVybDogJy9ndWVzdGluZm8nLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdGVtcGxhdGVzL3ZpZXdzL3Byb2ZpbGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnZ3Vlc3RDb250cm9sbGVyJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIFxuXG4gICAgICAgIFxuICAgICAgIFxuXG5cbn1dKTtcblxuIiwiQm9va2luZy5mYWN0b3J5KCdDb21wYW55U2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCl7XG4gIHJldHVybiB7XG4gICAgZGF0YSA6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkaHR0cC5nZXQoJy9hcGkvY29tcGFueScpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdDdXN0b21lckNvbnRyb2xsZXInLCBbJ0N1c3RvbWVyU2VydmljZScsIGZ1bmN0aW9uKFVzZXJzU2VydmljZSl7XG4gIHRoaXMuY3VzdG9tZXIgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBDdXN0b21lcic7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgQ3VzdG9tZXJTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY3VzdG9tZXIgPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KTtcbn1dKTsiLCJCb29raW5nLnNlcnZpY2UoJ0RhdGFTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKXtcclxuXHJcblx0ICB2YXIgZGF0YT1bXVxyXG5cclxuXHJcblx0ICAgdGhpcy5zYXZlPWZ1bmN0aW9uKGR0KXtcclxuXHQgICAgIFx0ZGF0YS5wdXNoKGR0KTtcclxuXHQgICAgIFx0Y29uc29sZS5sb2coXCJkYXRhIFNhdmVkXCIpO1xyXG5cdCAgICAgXHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcblx0ICAgfVxyXG5cdCAgIHRoaXMuZ2V0PWZ1bmN0aW9uKCl7XHJcblx0ICAgXHRyZXR1cm4gZGF0YTtcclxuXHQgICB9XHJcblxyXG4gICAgIFxyXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdJbnZlbnRvcnlDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJ0ludmVudG9yeVNlcnZpY2UnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCBJbnZlbnRvcnlTZXJ2aWNlKXtcbiAgdGhpcy5yZXN1bHRzID0gSW52ZW50b3J5U2VydmljZS5yZXN1bHRzO1xuXG4gICRyb290U2NvcGUuJG9uKCdxdWVyeTpyZXN1bHRzJywgZnVuY3Rpb24oKXtcbiAgICB0aGlzLnJlc3VsdHMgPSBJbnZlbnRvcnlTZXJ2aWNlLnJlc3VsdHM7XG4gIH0uYmluZCh0aGlzKSk7XG5cblxuXG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGxvY2F0aW9uJywgJ0xvZ2luU2VydmljZScsXG4gIGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgJGxvY2F0aW9uLCBMb2dpblNlcnZpY2Upe1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgTG9naW5TZXJ2aWNlLmF1dGgoJHNjb3BlLnVzZXIsIGZ1bmN0aW9uKGRhdGEsIHN0YXR1cyl7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICRyb290U2NvcGUubG9nZ2VkSW4gPSBkYXRhO1xuICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgfV1cbik7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUG9saWNpZXNDb250cm9sbGVyJywgWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckbG9jYXRpb24nLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsICRsb2NhdGlvbil7XG4gICAgJHNjb3BlLnBvbGljaWVzID0gZnVuY3Rpb24oc2hvdykge1xuICAgICAgcmV0dXJuIHBvbGljaWVzLnNob3cgPSB0cnVlOyAgXG4gICAgfTtcbiAgfVxuXSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2YXRpb25Db250cm9sbGVyJywgWydSZXNlcnZhdGlvblNlcnZpY2UnLCBmdW5jdGlvbihSZXNlcnZhdGlvblNlcnZpY2Upe1xuICB0aGlzLnJlc2VydmF0aW9uID0gbnVsbDtcbiAgdGhpcy5kYXRhID0gJ0Jvb2tpbmcgUmVyc2VydmF0aW9uJztcbiAgdmFyIF9zZWxmID0gdGhpcztcblxuICBSb2xlU2VydmljZS5kYXRhKGZ1bmN0aW9uKGRhdGEpe1xuICAgIF9zZWxmLnJlc2VydmF0aW9uID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdSb2xlQ29udHJvbGxlcicsIFsnUm9sZVNlcnZpY2UnLCBmdW5jdGlvbihSb2xlU2VydmljZSl7XG4gIHRoaXMucm9sZSA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIFVzZXIgUm9sZSc7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgUm9sZVNlcnZpY2UuZGF0YShmdW5jdGlvbihkYXRhKXtcbiAgICBfc2VsZi5yb2xlID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfSk7XG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdVc2Vyc0NvbnRyb2xsZXInLCBbJ1VzZXJzU2VydmljZScsIGZ1bmN0aW9uKFVzZXJzU2VydmljZSl7XG4gIHRoaXMudXNlcnMgPSBudWxsO1xuICB0aGlzLmRhdGEgPSAnQm9va2luZyBVc2Vycyc7XG4gIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgVXNlcnNTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYudXNlcnMgPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICB9KTtcbn1dKTsiLCJCb29raW5nLmRpcmVjdGl2ZSgnYXZhaWxhYmlsaXR5JywgWyckcm9vdFNjb3BlJywgJ2RhdGVGaWx0ZXInLCBmdW5jdGlvbigkcm9vdFNjb3BlLCBkYXRlRmlsdGVyKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdCAgICA6ICdFJyxcbiAgICB0ZW1wbGF0ZVVybCA6ICcvdGVtcGxhdGVzL2RpcmVjdGl2ZXMvYXZhaWxhYmlsaXR5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogWyckc2NvcGUnLCckbG9jYXRpb24nLCdSZXNlcnZhdGlvblNlcnZpY2UnLCckc3RhdGVQYXJhbXMnLCdEYXRhU2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwkbG9jYXRpb24sUmVzZXJ2YXRpb25TZXJ2aWNlLCRzdGF0ZVBhcmFtcyxEYXRhU2VydmljZSl7XG4gICAgICBcbiAgICAgICRzY29wZS5zZWxlY3RlZHJvb21zPVtdO1xuICAgICAgJHNjb3BlLm51bWJlcj0tMTtcbiAgJHNjb3BlLnF1ZXJyeT0gYW5ndWxhci5mcm9tSnNvbihhdG9iKCRzdGF0ZVBhcmFtcy5xdWVycnkpKVxuICAgICBcblxuJHNjb3BlLnNlbGVjdHJvb209ZnVuY3Rpb24oaW5kZXgscm9vbSl7XG4gICB2YXIgcm09e307XG4gICAgcm0uaWQ9aW5kZXg7XG4gICAgcm0ucm9vbT1yb29tO1xuICAgIHJvb20uc2VsZWN0ZWQ9dHJ1ZTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcy5wdXNoKHJtKTtcbiAgICAkc2NvcGUubnVtYmVyPWluZGV4O1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5zZWxlY3RlZHJvb21zKVxufTtcbiRzY29wZS5yZW1vdmVyb29tPWZ1bmN0aW9uKGluZGV4KXtcblxuICAgZm9yIChpIGluICRzY29wZS5zZWxlY3RlZHJvb21zKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLnNlbGVjdGVkcm9vbXNbaV0uaWQgPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2VsZWN0ZWRyb29tcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbn07XG5cbiRzY29wZS5ib29rPWZ1bmN0aW9uKCl7XG4gIHZhciBrPXt9O1xuICAgICBrLnNlbGVjdGVkcm9vbXM9JHNjb3BlLnNlbGVjdGVkcm9vbXM7XG4gICAgIGsucXVlcnJ5PSRzY29wZS5xdWVycnk7XG4gICAgIGsuY29tcGFueWlkPSRzY29wZS5zZWxlY3RlZHJvb21zWzBdLnJvb20uY29tcGFueV9pZDtcbiAgICAgay5pZD0nYm9va2luZ2luZm8nO1xuICAgdmFyIGRldD1idG9hKGFuZ3VsYXIudG9Kc29uKGspKTtcbiAgIERhdGFTZXJ2aWNlLnNhdmUoayk7XG4gICRsb2NhdGlvbi5wYXRoKCcvcmVzZXJ2ZS8nK2RldCk7XG4gIFxufTtcblxuICAgICAgJHNjb3BlLnN1Ym1pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICBSZXNlcnZhdGlvblNlcnZpY2UucXVlcnkoJHNjb3BlLnF1ZXJ5KVxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJycm9yIFwiK2Vycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7ICBcbiAgICAgICAgXG4gICAgICB9O1xuICAgIH1dXG4gIH07XG59XSk7IiwiQm9va2luZy5kaXJlY3RpdmUoJ2Zvb3Rlck5hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9mb290ZXIuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnRm9vdGVyQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIFsnQ29tcGFueVNlcnZpY2UnLCBmdW5jdGlvbihDb21wYW55U2VydmljZSl7XG4gIHRoaXMuY29tcGFueSA9IG51bGw7XG4gIHRoaXMuZGF0YSA9ICdCb29raW5nIEhvbWUnO1xuICB2YXIgX3NlbGYgPSB0aGlzO1xuXG4gIENvbXBhbnlTZXJ2aWNlLmRhdGEoZnVuY3Rpb24oZGF0YSl7XG4gICAgX3NlbGYuY29tcGFueSA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH0pO1xuXG5cblxufV0pO1xuIiwiQm9va2luZy5jb250cm9sbGVyKCdMZWZ0TmF2Q29udHJvbGxlcicsIFsnJHNjb3BlJywgZnVuY3Rpb24oJHNjb3BlKXtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3F1ZXJ5JywgWyckcm9vdFNjb3BlJywgJ2RhdGVGaWx0ZXInLCckbG9jYXRpb24nICxmdW5jdGlvbigkcm9vdFNjb3BlLCBkYXRlRmlsdGVyLCRsb2NhdGlvbil7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3F1ZXJ5Lmh0bWwnLFxuICAgIGNvbnRyb2xsZXIgIDogWyckc2NvcGUnLCAnSW52ZW50b3J5U2VydmljZScsIGZ1bmN0aW9uKCRzY29wZSwgSW52ZW50b3J5U2VydmljZSl7XG4gICAgICAkc2NvcGUubWF4X2FkdWx0cyA9IFsxLDIsM107XG4gICAgICAkc2NvcGUubWF4X2NoaWxkcyA9IFswLDEsMiwzXTtcbiAgICAgICRzY29wZS5xdWVyeSA9IHtcbiAgICAgICAgYWR1bHRzOiAxLFxuICAgICAgICBjaGlsZHM6IDAsXG4gICAgICAgIGNoZWNrX2luOiBuZXcgbW9tZW50KCkudG9EYXRlKCksXG4gICAgICAgIGNoZWNrX291dDogbmV3IG1vbWVudCgpLmFkZCgzLCAnZGF5cycpLnRvRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICAkc2NvcGUuc3VibWl0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgSW52ZW50b3J5U2VydmljZS5xdWVyeSgkc2NvcGUucXVlcnksIGZ1bmN0aW9uKHJlc3VsdHMpe1xuICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgncXVlcnk6cmVzdWx0cycpO1xuICAgICAgICB9KTtcbiAgICAgICAgICAgICB2YXIgZGV0PWJ0b2EoYW5ndWxhci50b0pzb24oJHNjb3BlLnF1ZXJ5KSk7XG4gICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9ib29raW5nLycrZGV0KTtcbiAgICAgIH1cbiAgICB9XVxuICB9O1xufV0pO1xuXG4iLCJCb29raW5nLmRpcmVjdGl2ZSgncmVzTmF2JywgW2Z1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3QgICAgOiAnRScsXG4gICAgc2NvcGUgICAgICAgOiB7fSxcbiAgICB0cmFuc2NsdWRlICA6IHRydWUsXG4gICAgdGVtcGxhdGVVcmwgOiAnL3RlbXBsYXRlcy9kaXJlY3RpdmVzL3Jlcy1uYXYuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnUmVzQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3RvcE5hdicsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHNjb3BlICAgICAgIDoge30sXG4gICAgdHJhbnNjbHVkZSAgOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvZGlyZWN0aXZlcy9oZWFkZXIuaHRtbCcsXG4gICAgY29udHJvbGxlciAgOiAnSGVhZGVyQ29udHJvbGxlcidcbiAgfTtcbn1dKTtcblxuIiwiQm9va2luZy5kaXJlY3RpdmUoJ3VzZXJfcHJvZmlsZScsIFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0ICAgIDogJ0UnLFxuICAgIHRlbXBsYXRlVXJsIDogJy90ZW1wbGF0ZXMvdXNlcl9wcm9maWxlLmh0bWwnXG4gIH07XG59XSk7XG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ2NvbmZpcm1hdGlvbkNvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJGxvY2F0aW9uJywnJHNjb3BlJywnUmVzZXJ2YXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJGxvY2F0aW9uLCRzY29wZSxSZXNlcnZhdGlvblNlcnZpY2Upe1xyXG4gICAkc2NvcGUuZm9ybURhdGE9RGF0YVNlcnZpY2UuZ2V0KCk7ICAgICBcclxuICAgJHNjb3BlLmd1ZXN0aW5mbz0gXy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJndWVzdGluZm9cIn0pLmN1c3RvbWVyUHJvZmlsZTtcclxuICAgJHNjb3BlLmNhcmRpbmZvPV8uZmluZFdoZXJlKCRzY29wZS5mb3JtRGF0YSwge2lkOlwicGF5bWVudGluZm9cIn0pLnBheW1lbnREZXRhaWxzO1xyXG4gICAkc2NvcGUuYm9va2luZ2luZm89Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJib29raW5naW5mb1wifSkuc2VsZWN0ZWRyb29tcztcclxuICAgICRzY29wZS5ndWVzdFN1bW1hcnk9Xy5maW5kV2hlcmUoJHNjb3BlLmZvcm1EYXRhLCB7aWQ6XCJib29raW5naW5mb1wifSkucXVlcnJ5O1xyXG4gICAgJHNjb3BlLnJvb21zU3VtbWFyeT1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcInJvb21pbmZvXCJ9KS5zdW1tYXJ5O1xyXG4gICAkc2NvcGUuY29tcGFueV9pZD1fLmZpbmRXaGVyZSgkc2NvcGUuZm9ybURhdGEsIHtpZDpcImJvb2tpbmdpbmZvXCJ9KS5jb21wYW55aWQ7XHJcblxyXG4gICBcclxuXHJcbiAgICRzY29wZS5wcm9jZXNzRm9ybT1mdW5jdGlvbigpe1xyXG4gICAgdmFyIGRhdGEgPXt9O1xyXG4gICAgICAgIGRhdGEuZ3Vlc3RpbmZvPSRzY29wZS5ndWVzdGluZm87XHJcbiAgICAgICAgZGF0YS5jYXJkaW5mbz0kc2NvcGUuY2FyZGluZm87XHJcbiAgICAgICAgZGF0YS5ib29raW5naW5mbz0kc2NvcGUuYm9va2luZ2luZm87XHJcbiAgICAgICAgIGRhdGEuZ3Vlc3RTdW1tYXJ5PSRzY29wZS5ndWVzdFN1bW1hcnk7XHJcbiAgICAgICAgIGRhdGEucm9vbVN1bW1hcnk9JHNjb3BlLnJvb21zU3VtbWFyeTtcclxuICAgICAgICAgZGF0YS5jb21wYW55X2lkPSRzY29wZS5jb21wYW55X2lkO1xyXG5cclxuXHJcbiAgICAgUmVzZXJ2YXRpb25TZXJ2aWNlLmNyZWF0ZShkYXRhKVxyXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgICAgICAgICAgLy8gIGFsZXJ0KHJlc3Auc3VjY2Vzcyk7XHJcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybURhdGE9XCJcIjtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvdGhhbmtub3RlLycrcmVzcC5zdWNjZXNzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9jbGVhciBkYXRhIHNlcnZpY2UgZGF0YVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAocmVzcCkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJyb3IgXCIrcmVzcCk7XHJcbiAgICAgICAgICAgIH0pOyAgXHJcblxyXG4gICB9O1xyXG4gICBcclxuXHJcbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ0Zvb3RlckNvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignZ3Vlc3RDb250cm9sbGVyJywgWydEYXRhU2VydmljZScsJyRzdGF0ZScsJyRzY29wZScsIGZ1bmN0aW9uKERhdGFTZXJ2aWNlLCRzdGF0ZSwkc2NvcGUpe1xyXG4gICAkc2NvcGUuZm9ybURhdGE9e307XHJcblxyXG5cclxuICAgJHNjb3BlLnBheW1lbnQ9ZnVuY3Rpb24oKXtcclxuXHJcblx0ICAgXHQgdmFyIGRhdGE9e307XHJcblx0ICAgXHQgZGF0YS5pZD0nZ3Vlc3RpbmZvJztcclxuXHQgICBcdCBkYXRhLmN1c3RvbWVyUHJvZmlsZT0kc2NvcGUuZm9ybURhdGE7XHJcblx0ICAgXHREYXRhU2VydmljZS5zYXZlKGRhdGEpO1xyXG5cdCAgIFx0JHN0YXRlLmdvKCdwYXltZW50Jyk7XHJcbiAgIH07XHJcblxyXG59XSk7IiwiQm9va2luZy5jb250cm9sbGVyKCdIZWFkZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpe1xufV0pO1xuXG4iLCJCb29raW5nLmNvbnRyb2xsZXIoJ0xvZ291dENvbnRyb2xsZXInLCBbJyRsb2NhdGlvbicsICdMb2dpblNlcnZpY2UnLCBmdW5jdGlvbigkbG9jYXRpb24sIExvZ2luU2VydmljZSl7XG4gIExvZ2luU2VydmljZS5sb2dvdXQoKTtcbiAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xufV0pO1xuXG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcigncGF5bWVudENvbnRyb2xsZXInLCBbJ0RhdGFTZXJ2aWNlJywnJHN0YXRlJywnJHNjb3BlJywgZnVuY3Rpb24oRGF0YVNlcnZpY2UsJHN0YXRlLCRzY29wZSl7XHJcbiAgICRzY29wZS5mb3JtRGF0YT17fTtcclxuXHJcblxyXG4gICAkc2NvcGUuZ290b0NvbmZpcm09ZnVuY3Rpb24oKXtcclxuXHQgICBcdCB2YXIgZGF0YT17fTtcclxuXHQgICBcdCBkYXRhLmlkPSdwYXltZW50aW5mbyc7XHJcblx0ICAgXHQgZGF0YS5wYXltZW50RGV0YWlscz0kc2NvcGUuZm9ybURhdGE7XHJcblx0ICAgXHREYXRhU2VydmljZS5zYXZlKGRhdGEpO1xyXG5cdCAgIFx0JHN0YXRlLmdvKCdDb25maXJtYXRpb24nKTtcclxuICAgfTtcclxuXHJcbn1dKTsiLCJCb29raW5nLmNvbnRyb2xsZXIoJ1Jlc0NvbnRyb2xsZXInLCBbJyRzY29wZScsIGZ1bmN0aW9uKCRzY29wZSl7XG59XSk7XG5cbiIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2ZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRzdGF0ZVBhcmFtcycsJyRzdGF0ZScsJ1Jlc2VydmF0aW9uU2VydmljZScsICdEYXRhU2VydmljZScsJyRhbmNob3JTY3JvbGwnLCckbG9jYXRpb24nLGZ1bmN0aW9uKCRzY29wZSwkc3RhdGVQYXJhbXMsJHN0YXRlLFJlc2VydmF0aW9uU2VydmljZSxEYXRhU2VydmljZSwkYW5jaG9yU2Nyb2xsLCRsb2NhdGlvbil7XHJcbiAgICRsb2NhdGlvbi5oYXNoKCd0b3AnKTtcclxuXHJcbiAgICAgIC8vIGNhbGwgJGFuY2hvclNjcm9sbCgpXHJcbiAgICAgICRhbmNob3JTY3JvbGwoKTtcclxuXHJcblx0XHJcbiAgJHNjb3BlLmZvcm1EYXRhID0ge307XHJcbiAkc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHM9YW5ndWxhci5mcm9tSnNvbihhdG9iKCRzdGF0ZVBhcmFtcy5yb29tZGV0YWlscykpO1xyXG4gIC8vY29uc29sZS5sb2coJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzKTtcclxuXHJcbiAgJHNjb3BlLnN1bW1hcnk9e307XHJcbiAgJHNjb3BlLnN1bW1hcnkubm9Sb29tcz0kc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMuc2VsZWN0ZWRyb29tcy5sZW5ndGg7XHJcbiAgJHNjb3BlLnN1bW1hcnkubm9HdWVzdD0gJHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnF1ZXJyeS5hZHVsdHM7IFxyXG4gICRzY29wZS5zdW1tYXJ5LnN0YXJ0ZGF0ZT0kc2NvcGUuZm9ybURhdGEucm9vbURldGFpbHMucXVlcnJ5LmNoZWNrX2luO1xyXG4gICRzY29wZS5zdW1tYXJ5LmVuZGRhdGU9JHNjb3BlLmZvcm1EYXRhLnJvb21EZXRhaWxzLnF1ZXJyeS5jaGVja19vdXQ7XHJcblxyXG4gICRzY29wZS50b3RhbHByaWNlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHRwcmljZT0wO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgIGZvciAodmFyIGk9MCAgO2k8JHNjb3BlLnN1bW1hcnkubm9Sb29tcztpKyspe1xyXG5cclxuICAgICAgICAgICB0cHJpY2U9dHByaWNlKyRzY29wZS5mb3JtRGF0YS5yb29tRGV0YWlscy5zZWxlY3RlZHJvb21zW2ldLnJvb20uYmFzZV9wcmljZTtcclxuICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHByaWNlO1xyXG4gICAgICB9O1xyXG5cclxuXHJcblxyXG4kc2NvcGUuc3VtbWFyeS50UHJpY2U9ICRzY29wZS50b3RhbHByaWNlKCk7IFxyXG5cclxuICAgIFxyXG4gICAgLy8gZnVuY3Rpb24gdG8gcHJvY2VzcyB0aGUgZm9ybVxyXG4gICAgJHNjb3BlLnByb2Nlc3NGb3JtID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAvLyBhbGVydCgnYXdlc29tZSEnKTtcclxuXHJcbiAgICAgICAgICBSZXNlcnZhdGlvblNlcnZpY2UuY3JlYXRlKCRzY29wZS5mb3JtRGF0YSlcclxuICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJkYXRhIHNhdmVkIFJlc2VydmF0aW9uIElEIDk4ODlcIik7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybURhdGE9XCJcIjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkVycnJvciBcIitlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7ICBcclxuXHJcblxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgJHNjb3BlLnByb2NlZWQ9ZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIGRhdGE9e307XHJcbiAgICAgICAgZGF0YS5pZD0ncm9vbWluZm8nO1xyXG4gICAgICAgIGRhdGEucm9vbWRldGFpbHM9JHNjb3BlLmZvcm1EYXRhO1xyXG4gICAgICAgIGRhdGEuc3VtbWFyeT0kc2NvcGUuc3VtbWFyeTtcclxuICAgICAgICAgRGF0YVNlcnZpY2Uuc2F2ZShkYXRhKTtcclxuICAgICAgICAgICAkc3RhdGUuZ28oJ2d1ZXN0aW5mbycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBcclxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignUmVzZXJ2ZVBheW1lbnRDb250cm9sbGVyJywgWydSZXNlcnZhdGlvblNlcnZpY2UnLCBmdW5jdGlvbihSZXNlcnZhdGlvblNlcnZpY2Upe1xyXG5cclxufV0pOyIsIkJvb2tpbmcuY29udHJvbGxlcignYm9va2luZ0NvbnRyb2xsZXInLCBbJ1Jlc2VydmF0aW9uU2VydmljZScsIGZ1bmN0aW9uKFJlc2VydmF0aW9uU2VydmljZSl7XHJcblxyXG59XSk7IiwiXHJcblxyXG5Cb29raW5nLmNvbnRyb2xsZXIoJ3RoYW5rbm90ZUNvbnRyb2xsZXInLCBbJyRsb2NhdGlvbicsJyRzY29wZScsJyRzdGF0ZVBhcmFtcycgLGZ1bmN0aW9uKCRsb2NhdGlvbiwkc2NvcGUsJHN0YXRlUGFyYW1zKXtcclxuICAgICRzY29wZS5yZXNlcnZhdGlvbmlkPSAkc3RhdGVQYXJhbXMucmVzZXJ2YXRpb25pZDtcclxuXHJcblx0fV0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==